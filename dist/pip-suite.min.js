!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;((t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).pip||(t.pip={})).rest=e()}}(function(){return function i(a,s,c){function u(t,e){if(!s[t]){if(!a[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(p)return p(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var o=s[t]={exports:{}};a[t][0].call(o.exports,function(e){return u(a[t][1][e]||e)},o,o.exports,i,a,s,c)}return s[t].exports}for(var p="function"==typeof require&&require,e=0;e<c.length;e++)u(c[e]);return u}({1:[function(e,t,i){"use strict";o.$inject=["$httpProvider"],Object.defineProperty(i,"__esModule",{value:!0}),i.UnauthorizedRedirect="pipUnauthorizedRedirect",i.AccessDenyRedirect="pipAccessDenyRedirect";var r=(n.$inject=["$q","$rootScope","$location","$log"],n);function n(e,t,r,n){var o=this;this.$q=e,this.$rootScope=t,this.$location=r,this.$log=n,this.responseError=function(e){var t=o.$rootScope[pip.services.StateVar]&&o.$rootScope[pip.services.StateVar].name?o.$rootScope[pip.services.StateVar].name:null,r=o.$rootScope[pip.services.StateVar]&&o.$rootScope[pip.services.StateVar].params?o.$rootScope[pip.services.StateVar].params:null;switch(e.status){case 401:case 440:o.$log.error("Response Error 401",e),o.$rootScope.$emit(i.UnauthorizedRedirect,{redirect_to:t&&r&&r.redirect_to?"":o.$location.url(),toState:t,toParams:r});break;case 403:o.$log.error("Response Error 403",e),o.$rootScope.$emit(i.AccessDenyRedirect);break;default:o.$log.error("errors_unknown",e)}return o.$q.reject(e)}}function o(e){e.interceptors.push("pipAuthHttpResponseInterceptor")}angular.module("pipAuthState").config(o).service("pipAuthHttpResponseInterceptor",r)},{}],2:[function(e,t,r){"use strict";o.$inject=["$delegate","$timeout"],i.$inject=["$provide"],Object.defineProperty(r,"__esModule",{value:!0});var n=e("./IAuthStateService");function o(e,t){return e.config=new n.AuthStateConfig,e.signinState=function(e){e&&(this._config.signinState=e);return this._config.signinState},e.signoutState=function(e){e&&(this._config.signoutState=e);return this._config.signoutState},e.authorizedState=function(e){e&&(this._config.authorizedState=e);return this._config.authorizedState},e.unauthorizedState=function(e){e&&(this._config.unauthorizedState=e);return this._config.unauthorizedState},e.goToSignin=function(e){if(null==this._config.signinState)throw new Error("Signin state was not defined");e=function(e){return e&&e.toParams&&(e.server_url=e.toParams.server_url?e.toParams.server_url:null,e.email=e.toParams.email?e.toParams.email:null,e.language=e.toParams.language?e.toParams.language:"en"),e}(e),this.go(this._config.signinState,e)},e.goToSignout=function(e){if(null==this._config.signoutState)throw new Error("Signout state was not defined");this.go(this._config.signoutState,e)},e.goToAuthorized=function(e){if(null==this._config.authorizedState)throw new Error("Authorized state was not defined");this.go(this._config.authorizedState,e)},e.goToUnauthorized=function(e){if(null==this._config.unauthorizedState)throw new Error("Signin state was not defined");this.go(this._config.unauthorizedState,e)},e}function i(e){e.decorator("pipAuthState",o)}angular.module("pipAuthState").config(i)},{"./IAuthStateService":5}],3:[function(e,t,r){"use strict";function n(e,a,t,s,c){a.$on("$stateChangeStart",function(e,t,r,n,o){if(c.redirect&&c.redirect(e,t,r,a))return;if((t.auth||void 0===t.auth)&&!s.isOpened()){e.preventDefault();var i=c.href(t.name,r);return 0<i.length&&"#"==i[0]&&(i=i.substring(1)),void c.goToSignin({redirect_to:i,toState:t,toParams:r})}if(t.name==c.unauthorizedState()&&s.isOpened())return e.preventDefault(),void c.goToAuthorized({})}),a.$on("pipUnauthorizedRedirect",function(e,t){c.goToSignout(t)}),a.$on("$stateChangeSuccess",function(e,t,r,n,o){a[pip.services.RoutingVar]=!1})}function o(e){e.translations("en",{ERROR_SWITCHING:"Error while switching route. Try again."}),e.translations("ru",{ERROR_SWITCHING:"Ошибка при переходе. Попробуйте ещё раз."})}o.$inject=["pipTranslateProvider"],n.$inject=["$log","$rootScope","$state","pipSession","pipAuthState"],Object.defineProperty(r,"__esModule",{value:!0}),angular.module("pipAuthState").config(o).run(n)},{}],4:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./IAuthStateService"),o=(i.$inject=["$stateProvider"],i.prototype.redirect=function(e,t){this._redirectedStates[e]=t},Object.defineProperty(i.prototype,"signinState",{get:function(){return this._config.signinState},set:function(e){this._config.signinState=e||null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"signoutState",{get:function(){return this._config.signoutState},set:function(e){this._config.signoutState=e||null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"authorizedState",{get:function(){return this._config.authorizedState},set:function(e){this._config.authorizedState=e||"/"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"unauthorizedState",{get:function(){return this._config.unauthorizedState},set:function(e){this._config.unauthorizedState=e||"/"},enumerable:!0,configurable:!0}),i.prototype.$get=["$state","$timeout",function(e,i){return null==this._service&&(e._config=this._config,e._redirectedStates=this._redirectedStates,e.redirect=function(e,t,r){var n=this,o=this._redirectedStates[t.name];if(_.isFunction(o)&&(o=o(t.name,r),_.isNull(o)))throw new Error("Redirected toState cannot be null");return!!o&&(i(function(){e.preventDefault(),n.transitionTo(o,r,{location:"replace"})}),!0)}),this._service=e,this._service}],i);function i(e){var r=this;this.$stateProvider=e,this._redirectedStates={},this._config=new n.AuthStateConfig,this.state=function(e,t){if(null==e)throw new Error("stateName cannot be null");if(null==t)throw new Error("stateConfig cannot be null");return t&&(t.auth||t.authenticate)&&(t.resolve=t.resolve||{}),r.$stateProvider.state(e,t),r}}angular.module("pipAuthState").provider("pipAuthState",o)},{"./IAuthStateService":5}],5:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});function n(){this.signinState=null,this.signoutState=null,this.authorizedState="/",this.unauthorizedState="/"}r.AuthStateConfig=n},{}],6:[function(e,t,r){"use strict";function n(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}Object.defineProperty(r,"__esModule",{value:!0}),angular.module("pipAuthState",["ngResource","pipServices","LocalStorageModule"]),e("./AuthHttpResponseInterceptor"),e("./AuthStateDecorator"),e("./AuthStateInit"),e("./IAuthStateService"),e("./AuthStateService"),n(e("./AuthHttpResponseInterceptor")),n(e("./IAuthStateService"))},{"./AuthHttpResponseInterceptor":1,"./AuthStateDecorator":2,"./AuthStateInit":3,"./AuthStateService":4,"./IAuthStateService":5}],7:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=(o.$inject=["$q","pipDataModel"],o.prototype.hash=function(e){var t={};null!=e&&(t.filter=e.filter,t.search=e.search,t.start=e.start,t.take=e.take,t.skip=e.skip);var r=angular.toJson(t);if(null==r||0===r.length)return 0;for(var n=0,o=0,i=r.length;o<i;o++)n=(n<<5)-n+r.charCodeAt(o),n|=0;return n},o.prototype.generateKey=function(e,t){var r=this.hash(t);return e+(0!=r?"_"+r:"")},o.prototype.clear=function(e){if(null==e)this._cache={};else for(var t in this._cache)t!=e&&!t.startsWith(e+"_")||delete this._cache[t]},o.prototype.retrieve=function(e,t){if(null==e)throw new Error("Resource cannot be null");if(""==e)throw new Error("Resource cannot be empty");var r=this.generateKey(e,t),n=this._cache[r];return null==n?null:n.expire&&_.now()-n.expire>this.CACHE_TIMEOUT?(delete this._cache[r],null):n.data},o.prototype.store=function(e,t,r){if(null==e)throw new Error("Resource cannot be null");if(""==e)throw new Error("Resource cannot be empty");this._cache[this.generateKey(e,r)]={expire:_.now(),data:t}},o.prototype.storePermanently=function(e,t,r){if(null==e)throw new Error("Resource cannot be null");if(""==e)throw new Error("Resource cannot be empty");this._cache[this.generateKey(e,r)]={expire:null,data:t}},o.prototype.remove=function(e,t){if(null==e)throw new Error("Resource cannot be null");if(""==e)throw new Error("Resource cannot be empty");delete this._cache[this.generateKey(e,t)]},o.prototype.updateOne=function(e,t,r){if(null==e)throw new Error("Resource cannot be null");if(null!=t){var n=this.retrieve(e,r);if(null!=n){for(var o=!1,i=n.length,a=0;a<i;a++)if(n[a].id==t.id)return n[a]=t,void(o=!0);o||n.push(t),this.store(e,n,r)}}},o.prototype.retrieveOrLoad=function(t,r,n){var o=this;if(null==t)throw new Error("params cannot be null");var e,i=t.resource,a=t.filter,s=t.force?null:this.retrieve(i,t),c=this.$q.defer();return e=t.paging?"page":t.singleResult?"readOne":"read",s?(a&&(s.data?s.data=a(s.data):s=a(s)),_.isFunction(r)&&r(s),c.resolve(s)):this.pipDataModel[e](t,function(e){t.updatedItem?o.updateOne(i,e,t):o.store(i,e,t),a&&(e=a(e)),c.resolve(e),_.isFunction(r)&&r(e)},function(e){c.reject(e),_.isFunction(n)&&n(e)}),c.promise},o.prototype.removeOne=function(e,t){if(null==e)throw new Error("Resource cannot be null");if(null!=t)for(var r in this._cache)if(r==e||r.startsWith(e+"_")){var n=this._cache[r].data;if(angular.isArray(n))for(var o=0;o<n.length;o++)n[o].id==t.id&&(n.splice(o,1),o--)}},o.prototype.decorateAddCallback=function(t,r,n){var o=this;return function(e){r&&r.notClearedCache||o.clear(t),_.isFunction(n)&&n(e)}},o.prototype.decorateRemoveCallback=function(t,r,n){var o=this;return function(e){o.removeOne(t,r),_.isFunction(n)&&n(e)}},o.prototype.decorateUpdateCallback=function(o,e,i){var a=this;return function(e){for(var t in a._cache)if(t==o||t.startsWith(o+"_")){var r=a._cache[t].data;if(angular.isArray(r))for(var n=0;n<r.length;n++)r[n].id==e.id&&(r[n]=e)}_.isFunction(i)&&i(e)}},o.prototype.setTimeout=function(e){return e&&(this.CACHE_TIMEOUT=e),this.CACHE_TIMEOUT},o);function o(e,t){this.$q=e,this.pipDataModel=t,this.CACHE_TIMEOUT=6e5,this._cache={}}var i=(a.prototype.$get=["$q","pipDataModel",function(e,t){return null==this._service&&(this._service=new n(e,t)),this._service}],a);function a(){}angular.module("pipDataCache",[]).provider("pipDataCache",i)},{}],8:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});function n(){}r.CacheParams=n},{}],9:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),angular.module("pipDataCache",["pipDataModel"]),e("./DataCacheService"),e("./IDataCacheService"),function(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}(e("./IDataCacheService"))},{"./DataCacheService":7,"./IDataCacheService":8}],10:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=(o.$inject=["$stateParams","pipRest"],o.prototype.execute=function(t,r,n){var o,i=t.transaction;if(!i||t.skipTransactionBegin||(o=t.transactionId=i.begin(t.transactionOperation||"PROCESSING")))return this.pipRest.getResource(t.resource)[t.operation](t.item,function(e){i&&o&&i.aborted(o)||(i&&!t.skipTransactionEnd&&i.end(),r&&r(e))},function(e){i&&i.end(e),n&&n(e)})},o.prototype.create=function(t,r,n){return t.transactionOperation=t.transactionOperation||"SAVING",t.operation=t.operation||"save",this.execute(t,function(e){t.itemCollection&&t.itemCollection.push(e),r&&r(e)},function(e){n&&n(e)})},o.prototype.update=function(r,n,t){return r.transactionOperation=r.transactionOperation||"SAVING",r.operation=r.operation||"update",this.execute(r,function(t){if(r.itemCollection)var e=_.findIndex(r.itemCollection,function(e){return e.id==t.id});-1<e&&(r.itemCollection[e]=t),n&&n(t)},function(e){t&&t(e)})},o.prototype.delete=function(t,r,n){return t.transactionOperation=t.transactionOperation||"SAVING",t.operation=t.operation||"remove",this.execute(t,function(e){t.itemCollection&&_.remove(t.itemCollection,{id:e.id||(t.object||{}).id||(t.item||{}).id}),r&&r(e)},function(e){n&&n(e)})},o.prototype.read=function(e,t,r){return e.transactionOperation=e.transactionOperation||"READING",e.operation=e.operation||"query",this.execute(e,function(e){t&&t(e)},function(e){r&&r(e)})},o.prototype.readOne=function(r,n,t){return r.transactionOperation=r.transactionOperation||"READING",r.operation=r.operation||"page",this.execute(r,function(e){if(r.itemCollection&&e){var t=_.findIndex(r.itemCollection,{id:e.id});0<=t?r.itemCollection[t]=e:r.itemCollection.push(e)}n&&n(e)},function(e){t&&t(e)})},o.prototype.page=function(r,n,t){return r.transactionOperation=r.transactionOperation||"READING",r.operation=r.operation||"page",this.execute(r,function(e){if(r.itemCollection&&e.data)for(var t=0;t<e.data.length;t++)r.itemCollection.push(e.data[t]);n&&n(e)},function(e){t&&t(e)})},o.prototype.uploadFiles=function(t,r,n){var o,i=t.transaction;if(!i||t.skipTransactionBegin||(o=t.transactionId=i.begin(t.transactionOperation||"SAVING"))){var e=[{pictures:t.pictures,documents:t.documents}];if(t.item&&t.item.content){var a=!0;async.eachSeries(_.union(t.item.content,e),function(e,t){e.pictures||e.documents?e.pictures?e.pictures.save(function(){i&&o&&i.aborted(o)&&(a=!1,t("aborted")),e.documents?e.documents.save(function(){i&&o&&i.aborted(o)&&(a=!1,t("aborted")),t()},function(e){a=!1,t(e)}):t()},function(e){a=!1,t(e)}):e.documents&&e.documents.save(function(){i&&o&&i.aborted(o)&&(a=!1,t("aborted")),t()},function(e){a=!1,t(e)}):t()},function(e){!e&&a?(i&&!t.skipTransactionEnd&&i.end(),_.each(t.item.content,function(e){delete e.pictures,delete e.documents}),r&&r()):(i&&i.end(e),n&&n(e))})}else t.pictures?t.pictures.save(function(){i&&o&&i.aborted(o)||(t.documents?t.documents.save(function(){i&&o&&i.aborted(o)||(i&&!t.skipTransactionEnd&&i.end(),r&&r())},function(e){i&&i.end(e),n&&n(e)}):(i&&!t.skipTransactionEnd&&i.end(),r&&r()))},function(e){i&&i.end(e),n&&n(e)}):t.documents?t.documents.save(function(){i&&o&&i.aborted(o)||(i&&!t.skipTransactionEnd&&i.end(),r&&r())},function(e){i&&i.end(e),n&&n(e)}):(i&&!t.skipTransactionEnd&&i.end(),r&&r())}},o.prototype.abortFilesUpload=function(e){e.pictures&&e.pictures.abort(),e.documents&&e.documents.abort(),e.transaction&&e.transaction.abort()},o);function o(e,t){this.$stateParams=e,this.pipRest=t,this.save=this.update,this.remove=this.delete,this.query=this.read,this.get=this.readOne,this.readPage=this.page,this.queryPage=this.page}var i=(a.prototype.$get=["$stateParams","pipRest",function(e,t){return null==this._service&&(this._service=new n(e,t)),this._service}],a);function a(){}angular.module("pipDataModel").provider("pipDataModel",i)},{}],11:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0})},{}],12:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),angular.module("pipDataModel",["pipRest"]),e("./IDataModelService"),e("./DataModelService")},{"./DataModelService":10,"./IDataModelService":11}],13:[function(e,t,r){"use strict";function n(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}Object.defineProperty(r,"__esModule",{value:!0}),e("./rest"),e("./data"),e("./cache"),e("./auth_state"),angular.module("pipCommonRest",["pipDataCache","pipRest","pipDataModel","pipAuthState"]),n(e("./cache")),n(e("./auth_state"))},{"./auth_state":6,"./cache":9,"./data":12,"./rest":16}],14:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0})},{}],15:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=(o.$inject=["$resource","$http","$stateParams","serverUrl","lockServerUrl","resourceConfigs"],o.prototype.reInitResource=function(){this._resources={},this.initResources(this.resourceConfigs)},o.prototype.initResources=function(e){var r=this;_.each(e,function(e){var t;switch(e.operation){case"createResource":t=r.createResource(r._serverUrl,e.path,e.defaultParams,e.actions);break;case"createOperation":t=r.createOperation(r._serverUrl,e.path);break;case"createCollection":t=r.createCollection(r._serverUrl,e.path,e.defaultParams);break;case"createPagedCollection":t=r.createPagedCollection(r._serverUrl,e.path,e.defaultParams);break;case"createPartyCollection":t=r.createPartyCollection(r._serverUrl,e.path,e.defaultParams)}t&&(r._resources[e.name]=t)})},o.prototype.createResource=function(e,t,r,n){return e=e||this._serverUrl,this.$resource(this._serverUrl+t,r,n)},o.prototype.createOperation=function(e,t){return e=e||this._serverUrl,this.$resource(e+t,{},{call:{method:"POST"}})},o.prototype.createCollection=function(e,t,r){return e=e||this._serverUrl,this.$resource(e+t,r||{id:"@id"},{update:{method:"PUT"}})},o.prototype.createPagedCollection=function(e,t,r){return e=e||this._serverUrl,this.$resource(e+t,r||{id:"@id"},{page:{method:"GET",isArray:!1},update:{method:"PUT"}})},o.prototype.createPartyCollection=function(e,t,r){return this.createPagedCollection(e,t,r||{id:"@id",party_id:"@party_id"})},Object.defineProperty(o.prototype,"serverUrl",{get:function(){return this._serverUrl},set:function(e){this._serverUrl=e,this.reInitResource()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"lockServerUrl",{get:function(){return this._lockServerUrl},set:function(e){this._lockServerUrl=e},enumerable:!0,configurable:!0}),o.prototype.setHeaders=function(e){for(var t in e)e.hasOwnProperty(t)&&!_.isObject(e[t])&&(this.$http.defaults.headers.common[t]=e[t])},o.prototype.getResource=function(e){var t=this._resources[e];if(!t)throw new Error("Resource not found");return t},o);function o(e,t,r,n,o,i){this.$resource=e,this.$http=t,this.$stateParams=r,this.resourceConfigs=i,this._resources={},this._serverUrl=n,this._lockServerUrl=o,this.initResources(i)}var i=(a.$inject=["$httpProvider"],Object.defineProperty(a.prototype,"serverUrl",{get:function(){return this._serverUrl},set:function(e){this._serverUrl=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"lockServerUrl",{get:function(){return this._lockServerUrl},set:function(e){this._lockServerUrl=e},enumerable:!0,configurable:!0}),a.prototype.setHeaders=function(e){for(var t in e)e.hasOwnProperty(t)&&(this._http.defaults.headers.common[t]=e[t])},a.prototype.registerResource=function(e,t,r,n){this._resourceConfigs.push({operation:"createResource",name:e,path:t,defaultParams:r||null,actions:n||null})},a.prototype.registerOperation=function(e,t,r,n){this._resourceConfigs.push({operation:"createOperation",name:e,path:t,defaultParams:r||null,actions:n||null})},a.prototype.registerCollection=function(e,t,r,n){this._resourceConfigs.push({operation:"createCollection",name:e,path:t,defaultParams:r||null,actions:n||null})},a.prototype.registerPagedCollection=function(e,t,r,n){this._resourceConfigs.push({operation:"createPagedCollection",name:e,path:t,defaultParams:r||null,actions:n||null})},a.prototype.registerPartyCollection=function(e,t,r,n){this._resourceConfigs.push({operation:"createPartyCollection",name:e,path:t,defaultParams:r||null,actions:n||null})},a.prototype.$get=["$resource","$http","$stateParams",function(e,t,r){return null==this._service&&(this._service=new n(e,t,r,this._serverUrl,this._lockServerUrl,this._resourceConfigs)),this._service}],a);function a(e){this._resourceConfigs=[],this._http=e}angular.module("pipRest").provider("pipRest",i)},{}],16:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),angular.module("pipRest",["ngResource"]),e("./IRestService"),e("./RestService")},{"./IRestService":14,"./RestService":15}]},{},[13])(13)});


!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;((t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).pip||(t.pip={})).entry=e()}}(function(){return function n(s,a,p){function c(t,e){if(!a[t]){if(!s[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(l)return l(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var o=a[t]={exports:{}};s[t][0].call(o.exports,function(e){return c(s[t][1][e]||e)},o,o.exports,n,s,a,p)}return a[t].exports}for(var l="function"==typeof require&&require,e=0;e<p.length;e++)c(p[e]);return c}({1:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=(o.$inject=["$state","pipChangePasswordViewModel","pipEntryCommon","pipEntry","pipAuthState","pipSession","$window"],o.prototype.goBack=function(){this.$window.history.back()},Object.defineProperty(o.prototype,"config",{get:function(){return this.pipChangePasswordViewModel.config},enumerable:!0,configurable:!0}),o.prototype.onChange=function(){this.pipChangePasswordViewModel.onChange()},o);function o(e,t,i,r,o,n,s){this.pipChangePasswordViewModel=t,this.$window=s,i.configureAppBar(),!1!==r.passwordExpire&&n.isOpened()||e.go(o.signinState(),{})}i.ChangePasswordController=r,angular.module("pipEntry.ChangePassword",["pipEntry.Common","pipChangePasswordPanel"])},{}],2:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=(s.$inject=["$mdDialog"],s.prototype.show=function(e,t,i){this.$mdDialog.show({targetEvent:e.event,templateUrl:"change_password/ChangePasswordDialog.html",controller:o,controllerAs:"$ctrl",locals:{params:e},clickOutsideToClose:!1}).then(function(){t&&t()},function(){i&&i()})},s),o=(n.$inject=["$mdDialog","pipChangePasswordViewModel"],Object.defineProperty(n.prototype,"config",{get:function(){return this.pipChangePasswordViewModel.config},enumerable:!0,configurable:!0}),n.prototype.onChange=function(){var e=this;this.pipChangePasswordViewModel.onChange(function(){e.goBack()})},n);function n(e,t){this.pipChangePasswordViewModel=t,this.goBack=e.cancel}function s(e){this.$mdDialog=e}angular.module("pipEntry.ChangePasswordDialog",["pipEntry.Common","pipChangePasswordPanel"]).service("pipChangePasswordDialog",r)},{}],3:[function(e,t,i){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var h,n=e("../common/EntryModel"),s=(h=n.EntryModel,o(a,h),a.$inject=["pipEntryCommon","pipTransaction","$rootScope","$location","$state","$injector","pipAuthState","pipFormErrors","pipRest","pipTranslate","pipEntryData","pipEntry","pipToasts"],a.prototype.init=function(e){this.initModel(e),this.setElementVisability()},a.prototype.setElementVisability=function(){this.hideObject.subTitle=1==new Boolean(this.hideObject.subTitle),this.hideObject.title=1==new Boolean(this.hideObject.title),this.hideObject.server=1==new Boolean(this.hideObject.server),this.hideObject.hint=1==new Boolean(this.hideObject.hint),this.hideObject.progress=1==new Boolean(this.hideObject.progress)},a.prototype.onShowToast=function(e,t){e&&(e=this.pipTranslate.translate(e),"message"!=(t=t||"message")?"error"!=t||this.pipToasts.showError(e,null,null,null,null):this.pipToasts.showMessage(e,null,null,null))},a.prototype.onChange=function(i){var r=this;if(this.config.form.$invalid)this.pipFormErrors.resetFormErrors(this.config.form,!0);else{var o=this.transaction.begin("PROCESSING");o&&(this.pipRest.lockServerUrl||(this.pipRest.serverUrl=this.config.data.serverUrl),this.pipEntryData.expireChangePassword({login:this.config.data.login,old_password:this.config.data.password,new_password:this.config.data.passwordNew,user_id:this.pipEntryData.getUserId()},function(e){if(r.pipFormErrors.resetFormErrors(r.config.form,!1),!r.transaction.aborted(o)){var t=String()+"CHANGE_PWD_SUCCESS_TEXT";r.onShowToast(t,"message"),r.transaction.end(),i&&i(),r.pipEntry.signout(function(){r.$state.go("signin",{server_url:r.config.data.serverUrl,login:r.config.data.login})})}},function(e){r.transaction.end(e),r.pipFormErrors.resetFormErrors(r.config.form,!0),r.pipFormErrors.setFormError(r.config.form,e,{NO_LOGIN:"login",WRONG_LOGIN:"login",LOGIN_NOT_FOUND:"login",WRONG_PASSWORD:"password",act_execute:"form",UNKNOWN:"form","-1":"form"})}))}},a);function a(e,t,i,r,o,n,s,a,p,c,l,d,g){var u=h.call(this,e)||this;return u.$rootScope=i,u.$location=r,u.$state=o,u.$injector=n,u.pipAuthState=s,u.pipFormErrors=a,u.pipRest=p,u.pipTranslate=c,u.pipEntryData=l,u.pipEntry=d,u.pipToasts=g,u.transaction=t.create("entry.change_password"),u}i.ChangePasswordModel=s},{"../common/EntryModel":10}],4:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r={bindings:{},controller:(o.$inject=["$scope","pipFormErrors","pipRest","pipChangePasswordViewModel"],o.prototype.$postLink=function(){this.config.form=this.$scope.form,this.config.data.password=null,this.config.data.passwordNew=null},Object.defineProperty(o.prototype,"config",{get:function(){return this.pipChangePasswordViewModel.config},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"transaction",{get:function(){return this.pipChangePasswordViewModel.transaction},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"showServerError",{get:function(){return this.pipChangePasswordViewModel.showServerError},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"hideObject",{get:function(){return this.pipChangePasswordViewModel.hideObject},enumerable:!0,configurable:!0}),o.prototype.onShowToast=function(e,t){this.pipChangePasswordViewModel.onShowToast(e,t)},o.prototype.onServerUrlChanged=function(){this.config.onServerUrlChanged(this.config.form,this.config.selected.searchURLs)},o.prototype.onChanged=function(){this.pipFormErrors.resetFormErrors(this.config.form,!1),this.pipFormErrors.resetFieldsErrors(this.config.form,null),this.pipRest.serverUrl=this.config.selected.searchURLs,this.config.data.serverUrl=this.config.selected.searchURLs},o.prototype.onChangePassword=function(){this.pipFormErrors.resetFieldsErrors(this.config.form,"passwordNew")},o.prototype.onChangePasswordNew=function(){this.pipFormErrors.resetFieldsErrors(this.config.form,"password"),this.pipFormErrors.resetFieldsErrors(this.config.form,"passwordConfirm")},o.prototype.onChangePasswordConfirm=function(){this.pipFormErrors.resetFieldsErrors(this.config.form,"passwordNew")},o),templateUrl:"change_password/ChangePasswordPanel.html"};function o(e,t,i,r){this.$scope=e,this.pipFormErrors=t,this.pipRest=i,this.pipChangePasswordViewModel=r,this.touchedErrorsWithHint=t.touchedErrorsWithHint,r.initModel(e)}angular.module("pipChangePasswordPanel",["pipFocused","pipEntry.Strings"]).component("pipChangePasswordPanel",r)},{}],5:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var u=e("./ChangePasswordModel"),r=(o.$inject=["pipEntryCommon","pipTransaction","$rootScope","$location","$state","$injector","pipAuthState","pipFormErrors","pipRest","pipEntry","pipTranslate","pipEntryData","pipToasts"],Object.defineProperty(o.prototype,"transaction",{get:function(){return this.model.transaction},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"hideObject",{get:function(){return this.model.hideObject},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"showServerError",{get:function(){return this.model.showServerError},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"config",{get:function(){return this.model.config},enumerable:!0,configurable:!0}),o.prototype.initModel=function(e){this.model.init(e)},o.prototype.onShowToast=function(e,t){this.model.onShowToast(e,t)},o.prototype.onChange=function(e){this.model.onChange(e)},o);function o(e,t,i,r,o,n,s,a,p,c,l,d,g){this.pipTranslate=l,this.pipEntryData=d,this.pipToasts=g,this.model=new u.ChangePasswordModel(e,t,i,r,o,n,s,a,p,l,d,c,g)}i.ChangePasswordViewModel=r,angular.module("pipEntry.ChangePassword").service("pipChangePasswordViewModel",r)},{"./ChangePasswordModel":3}],6:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=(r.$inject=["$scope","$element","$attrs","ngModel","$http","pipEntryData"],r);function r(e,t,i,r,o,n){var s=this;this.oldEmail=i.pipEmailUnique,e.$watch(i.ngModel,_.throttle(function(e){var t=r.$validators.emailUnique;e&&0!=e.length&&s.oldEmail!=e?(e||r.$setValidity("emailUnique",!0),n.signupValidate(e,function(e){r.$setValidity("emailUnique",!0)},function(e){r.$setValidity("emailUnique",!1)})):r.$setValidity("emailUnique",t)},500))}angular.module("pipEmailUnique",["ngResource","pipEntryData"]).directive("pipEmailUnique",["$http","pipEntryData",function(o,n){return{restrict:"A",require:"ngModel",link:function(e,t,i,r){new s(e,t,i,r,o,n)}}}])},{}],7:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var l=e("./EntryPageConfig"),r=(o.$inject=["$rootScope","$state","pipAppBar","pipNavService","pipRest","pipEntry","pipFormErrors","pipIdentity","pipTranslate","localStorageService"],o.prototype.getLastUsedLogin=function(e){var t=this.localStorageService.get("servers");if(t&&t[e])return t[e].login},o.prototype.getPastSessions=function(){return this.localStorageService.get("servers")||{}},o.prototype.getUsedServerUrls=function(){var e,t=this.localStorageService.get("servers")||{},i=[];for(var r in t)t.hasOwnProperty(r)&&(e=t[r].serverUrl)&&i.push(e);return i},o.prototype.configureAppBar=function(){this.pipNavService.sidenav.hide(),this.pipNavService.actions.hide(),this.pipNavService.appbar.part("menu",!1),this.pipEntry.showLanguage&&this.pipNavService.appbar.part("actions","language"),this.pipEntry.appbarTitle?this.pipNavService.appbar.part("title","breadcrumb"):this.pipNavService.appbar.part("title",!1),this.pipNavService.breadcrumb.text=this.pipEntry.appbarTitle,this.pipNavService.appbar.addShadow(),this.pipNavService.icon.hide(),this.pipNavService.search.close(),this.pipAppBar.part("icon",this.pipEntry.showIcon),this.pipEntry.showIcon&&this.pipNavService.icon.showIcon(this.pipEntry.appbarIcon)},o.prototype.initScope=function(e){var i=this;this._config.appbarTitle=this.pipEntry.appbarTitle,this._config.showIcon=this.pipEntry.showIcon,this._config.showLanguage=this.pipEntry.showLanguage,this._config.adminOnly=this.pipEntry.adminOnly,this._config.fixedServerUrl=this.pipEntry.fixedServerUrl,this._config.enableAvatar=this.pipEntry.enableAvatar,this._config.useEmailAsLogin=this.pipEntry.useEmailAsLogin,this._config.entryHideObject=this.pipEntry.entryHideObject;var t=this.$state.params.language;t&&this.pipTranslate.use(t);var r=null;r=this._config.useEmailAsLogin?this.$state.params.email?decodeURIComponent(this.$state.params.email):this.$state.params.login?decodeURIComponent(this.$state.params.login):null:this.$state.params.email?decodeURIComponent(this.$state.params.email):null;var o=null;if(o=this.$state.params.login?decodeURIComponent(this.$state.params.login):null,this.$state.current.auth&&this.pipIdentity.identity&&this.pipIdentity.identity.user&&(r=this.pipIdentity.identity.user.email||this.pipIdentity.identity.user.login,o=this.pipIdentity.identity.user.login),this._config.data={serverUrl:this.$state.params.server_url?decodeURIComponent(this.$state.params.server_url):this.pipRest.serverUrl,login:o,email:r,password:"",remember:!1,adminOnly:this._config.adminOnly,name:"signup"!=this.$state.name&&this.$state.params.name?this.$state.params.name:null,code:this.$state.params.code||null,resetCode:this.$state.params.reset_code||null},this._config.data.email&&!this._config.data.login&&(this._config.data.login=this._config.data.email),!this._config.data.serverUrl)throw new Error("Server url can not be empty!");if(this._config.showServerUrl=!1,this._config.fixedServerUrl=!1,this._config.data.serverUrl=this._config.data.serverUrl||this.pipRest.serverUrl,this.pipEntry.fixedServerUrl&&(this._config.data.serverUrl=this.pipRest.serverUrl,this._config.fixedServerUrl=!0),"signup"!=this.$state.name&&(this._config.data.login=this._config.data.login||this.getLastUsedLogin(this._config.data.serverUrl)),this._config.serverUrls=this.getUsedServerUrls(),this._config.servers=this.getPastSessions(),this._config.selected={},this._config.selected.searchURLs=this._config.data.serverUrl,!this.$state.current.auth&&this._config.data.serverUrl&&!this._config.data.login&&"signup"!=this.$state.name){var n=this._config.servers[this._config.data.serverUrl];this._config.data.login=(n||{}).login}return this._config.filterItem=function(e){return i.filterItem(e)},this._config.getMatches=function(e){return i.getMatches(e)},this._config.onServerUrlChanged=function(e,t){i.onServerUrlChanged(e,t)},this._config.isEmpty=_.isEmpty,_.cloneDeep(this._config)},o.prototype.filterItem=function(e){return this._config.selected.searchURLs&&e&&0<=e.toLowerCase().indexOf(this._config.selected.searchURLs.toLowerCase())},o.prototype.getMatches=function(e){return e?(this._config.data.serverUrl=e,this._config.selected.searchURLs=e,_.filter(this._config.serverUrls,this._config.filterItem)):this._config.showServerUrl},o.prototype.onServerUrlChanged=function(e,t){if(e=e||this._config.form,t=t||this._config.selected.searchURLs){var i=this._config.servers[t];i&&"signup"!=this.$state.name&&(this._config.data.login=i.login,this.pipRest.serverUrl=t,this._config.data.serverUrl=t),e&&(this.pipFormErrors.resetFormErrors(e,!1),this.pipFormErrors.resetFieldsErrors(e,null))}},o);function o(e,t,i,r,o,n,s,a,p,c){this.$rootScope=e,this.$state=t,this.pipAppBar=i,this.pipNavService=r,this.pipRest=o,this.pipEntry=n,this.pipFormErrors=s,this.pipIdentity=a,this.pipTranslate=p,this.localStorageService=c,this._config=new l.EntryPageConfig}angular.module("pipEntry.CommonService",[]).service("pipEntryCommon",r)},{"./EntryPageConfig":11}],8:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});function r(){this.remember=!1}i.EntryHideObject=r},{}],9:[function(e,t,i){"use strict";function r(e,t,i,r,o){t.$on(pip.services.SessionOpenedEvent,function(e,t){r.clear(),o.start()}),t.$on(pip.services.SessionClosedEvent,function(e,t){r.clear()}),e.reopenSession()}r.$inject=["pipEntry","$rootScope","pipSession","pipDataCache","pipTimer"],Object.defineProperty(i,"__esModule",{value:!0}),angular.module("pipEntry.Service").run(r)},{}],10:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=(o.$inject=["pipEntryCommon"],o.prototype.initModel=function(e){this.config=this.pipEntryCommon.initScope(e),this.config.form=this.config.form||e.form,this.hideObject=this.config.entryHideObject},o);function o(e){this.pipEntryCommon=e,this.showServerError=!0}i.EntryModel=r},{}],11:[function(e,t,i){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var n,s=e("./EntryService"),a=(n=s.EntryConfig,o(p,n),p);function p(){var e=null!==n&&n.apply(this,arguments)||this;return e.showServerUrl=!1,e}i.EntryPageConfig=a;function c(){}i.EntryDataConfig=c;function l(){}i.SigninParams=l;function d(){}i.SignupParams=d;function g(){this.serverUrl=void 0,this.sessionId=void 0,this.userId=void 0}i.AuthSessionData=g;function u(){}i.PastSession=u},{"./EntryService":12}],12:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=e("./EntryPageConfig"),r=e("./EntryHideObject"),n=function(){};i.EntryConfig=n;var d=(s.$inject=["config","pipRest","localStorageService","$cookies","$cookieStore","pipSession","pipIdentity","pipTimer","pipTranslate","pipTheme","$timeout","pipAuthState"],s.prototype.restore=function(e){var t=new o.AuthSessionData;for(var i in e)e.hasOwnProperty(i)&&(_.isObject(e[i])?t[i]=e[i]:t[i]=this.$cookies.get(i)||this.localStorageService.get(i));return t},s.prototype.storeToLocal=function(e){for(var t in e)e.hasOwnProperty(t)&&!_.isObject(e[t])&&this.localStorageService.set(t,e[t])},s.prototype.removeLocal=function(e){for(var t in e)e.hasOwnProperty(t)&&!_.isObject(e[t])&&this.localStorageService.remove(t)},s.prototype.storeToCookie=function(e){for(var t in e)e.hasOwnProperty(t)&&!_.isObject(e[t])&&this.$cookies.put(t,e[t],{path:"/"})},s.prototype.removeCookie=function(e){for(var t in e)e.hasOwnProperty(t)&&!_.isObject(e[t])&&this.$cookies.remove(t)},s.prototype.storeKnownServer=function(e){e&&(this.$cookies.put(e,e,{path:"/"}),this.localStorageService.set(e,e))},Object.defineProperty(s.prototype,"appbarIcon",{get:function(){return this.config.appbarIcon},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"appbarTitle",{get:function(){return this.config.appbarTitle},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"showIcon",{get:function(){return this.config.showIcon},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"showLanguage",{get:function(){return this.config.showLanguage},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"adminOnly",{get:function(){return this.config.adminOnly},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"fixedServerUrl",{get:function(){return this.config.fixedServerUrl},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"passwordExpire",{get:function(){return this.config.passwordExpire},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"entryHideObject",{get:function(){return this.config.entryHideObject},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"enableAvatar",{get:function(){return this.config.enableAvatar},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"useEmailAsLogin",{get:function(){return this.config.useEmailAsLogin},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"isPostSignup",{get:function(){return this.config.isPostSignup},enumerable:!0,configurable:!0}),s.prototype.openSession=function(e,t){var i=new o.AuthSessionData;if(i.sessionId=e?e.id:null,i.userId=this.getUserId(e),i.serverUrl=this.pipRest.serverUrl,!i.sessionId)throw new Error("Error: session Id not found");if(!i.userId)throw new Error("Error: user Id not found");if(this.sessionState="open",this.pipRest.setHeaders({"x-session-id":i.sessionId}),t){var r=this.localStorageService.get("servers")||{};r[i.serverUrl]={serverUrl:i.serverUrl,login:e.user.login},this.localStorageService.set("servers",r),this.storeToLocal(i)}this.storeKnownServer(i.serverUrl),this.storeToCookie(i),this.pipIdentity.identity=e,this.pipSession.open(i),this.pipTranslate.use(e.user.language),e.user.theme&&e.user.theme!=this.pipTheme.theme&&this.pipTheme.use(e.user.theme)},s.prototype.getUserId=function(e){return e?e.user_id?e.user_id:e.user?e.user.id:null:null},s.prototype.checkEmailVerification=function(e){return e.user&&e.user.settings&&e.user.settings.verified_email&&"true"==e.user.settings.verified_email},s.prototype.restoreSessionComplete=function(e,t){angular.isFunction(t)&&t(),this.pipIdentity.identity=e,this.pipTranslate.use(e.user.language)},s.prototype.restoreSession=function(i){var r=this;if("open"!==this.sessionState){var e=new o.AuthSessionData;(e=this.restore(e))&&e.sessionId?this.pipRest.getResource("restoreSessions").call({session_id:e.sessionId},function(t){t&&t.id?(e.userId=r.getUserId(t),e.serverUrl=r.pipRest.serverUrl,r.storeToCookie(e),r.checkEmailVerification(t)?r.restoreSessionComplete(t,i):r.pipRest.getResource("email_settings").get({user_id:t.user.id},function(e){e&&e.verified&&e.email==t.user.login?r.restoreSessionComplete(t,i):r.restoreSessionComplete(t,function(){i&&i(),r.pipAuthState.go("verify_email",{email:t.user.login||t.user.email,serverUrl:r.pipRest.serverUrl})})},function(e){})):r.signout(function(){r.pipAuthState.goToUnauthorized({})})},function(e){angular.isFunction(i)&&i(e),r.signout(function(){r.pipAuthState.goToUnauthorized({})})}):this.signout(function(){r.pipAuthState.goToUnauthorized({})})}else angular.isFunction(i)&&i()},s.prototype.reopenSession=function(){var e=this,t=new o.AuthSessionData;(t=this.restore(t))&&t.sessionId?(this.sessionState="reopen",this.pipRest.setHeaders({"x-session-id":t.sessionId}),this.pipRest.lockServerUrl&&this.pipRest.serverUrl||!t.serverUrl||(this.pipRest.serverUrl=t.serverUrl),this.pipSession.open(t)):this.signout(function(){e.pipAuthState.goToUnauthorized({})})},s.prototype.closeSession=function(){var e=new o.AuthSessionData;e.sessionId=null,e.userId=null,e.serverUrl=null,this.pipRest.setHeaders({"x-session-id":void 0}),this.pipIdentity.identity=null,this.removeLocal(e),this.removeCookie(e),this.pipTimer.stop(),this.pipSession.close()},s.prototype.signout=function(e){this.pipSession.isOpened()&&this.pipRest.getResource("signout").call({},e,e),this.closeSession()},s);function s(e,t,i,r,o,n,s,a,p,c,l,d){var g=this;this.config=e,this.pipRest=t,this.localStorageService=i,this.$cookies=r,this.$cookieStore=o,this.pipSession=n,this.pipIdentity=s,this.pipTimer=a,this.pipTranslate=p,this.pipTheme=c,this.$timeout=l,this.pipAuthState=d,this.pipSession.addOpenListener(function(e){g.restoreSession(e)})}var a=(Object.defineProperty(p.prototype,"appbarIcon",{set:function(e){this.config.appbarIcon=e},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"appbarTitle",{set:function(e){this.config.appbarTitle=e},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"showIcon",{set:function(e){this.config.showIcon=e},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"showLanguage",{set:function(e){this.config.showLanguage=e},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"adminOnly",{set:function(e){this.config.adminOnly=e},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"fixedServerUrl",{set:function(e){this.config.fixedServerUrl=e},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"passwordExpire",{set:function(e){this.config.passwordExpire=e},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"entryHideObject",{set:function(e){this.config.entryHideObject=e},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"enableAvatar",{set:function(e){this.config.enableAvatar=e},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"useEmailAsLogin",{set:function(e){this.config.useEmailAsLogin=e},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"isPostSignup",{set:function(e){this.config.isPostSignup=e},enumerable:!0,configurable:!0}),p.prototype.$get=["pipRest","localStorageService","$cookies","$cookieStore","pipSession","pipIdentity","pipTimer","pipTranslate","pipTheme","$timeout","pipAuthState",function(e,t,i,r,o,n,s,a,p,c,l){return(_.isNull(this._service)||_.isUndefined(this._service))&&(this._service=new d(this.config,e,t,i,r,o,n,s,a,p,c,l)),this._service}],p);function p(){this.config=new n,this.config.appbarTitle="",this.config.appbarIcon="",this.config.adminOnly=!1,this.config.showIcon=!1,this.config.showLanguage=!0,this.config.adminOnly=!1,this.config.fixedServerUrl=null,this.config.passwordExpire=!1,this.config.enableAvatar=!1,this.config.useEmailAsLogin=!1,this.config.isPostSignup=!0,this.config.entryHideObject=new r.EntryHideObject}angular.module("pipEntry.Service",[]).provider("pipEntry",a)},{"./EntryHideObject":8,"./EntryPageConfig":11}],13:[function(e,t,i){!function(){"use strict";angular.module("pipEntry.Strings",[]).config(["pipTranslateProvider",function(e){e.translations("en",{FULLNAME:"First and last name",EMAIL:"Email",LOGIN:"Login",PASSWORD:"Password",LANGUAGE:"Language",GENDER:"Gender",BIRTHDAY:"Birthday",LOCATION:"Location",VERIFY:"Verify",CONTINUE:"Continue",HINT_FULLNAME:"Use your real name, so others know who you are",HINT_PASSWORD:"Minimum 6 characters",SIGNIN_HINT_PASSWORD:"Please, type password",HINT_ABOUT:"Few words about yourself",VERIFY_EMAIL:"Please, verify your email address. ",HINT_EMAIL:"Enter your email address, please",VERIFY_LOGIN:"Please, verify your login address. ",HINT_LOGIN:"Enter your login, please",SIGNIN_TITLE:"Sign in",SIGNIN_NOT_MEMBER:"Not a member?",SIGNIN_REMEMBER:"Remember",SIGNIN_FORGOT_PASSWORD:"Forgot password?",SIGNIN_SIGNUP_HERE:" Sign up here",SIGNUP_TITLE:"Sign up",SIGNUP_NOT_MEMBER:"Not a member? Sign up now",SIGNUP_TEXT_11:"By clicking Sign up, you agree to the",SIGNUP_PRIVACY:"privacy statement",SIGNUP_TEXT_12:"and",SIGNUP_SERVICES:"services agreement",SIGNUP_TEXT_2:"Do you have an account?",SIGNUP_SIGNIN_HERE:" Sign in here",SIGNUP_EMAIL_REGISTERED:"This email is already registered",SIGNUP_LOGIN_REGISTERED:"This login is already registered",SIGNUP_FULLNAME_WRONG:"xxxx",SIGNUP_EMAIL_WRONG:"xxxx",SIGNUP_LOGIN_WRONG:"xxxx",POST_SIGNUP_TITLE:"Welcome to Pip.Life",POST_SIGNUP_TEXT_1:"Your account was successfully created.",POST_SIGNUP_TEXT_2:"Tell us some more about yourself.",RECOVER_PWD_TITLE:"Forgot password?",RECOVER_PWD_TEXT_1_LOGIN:"Enter the login you used when you joined and we'll send you instructions to reset your password.",RECOVER_PWD_TEXT_1_EMAIL:"Enter the e-mail you used when you joined and we'll send you instructions to reset your password.",RECOVER_PWD_TEXT_2:"For security reasons, we do NOT store your password. So rest assured that we will never send your password via email.",RECOVER_PWD_RECOVER:"Recover password",RESET_PWD_PASSWORD:"Reset password",RESET_PWD_TEXT_LOGIN:"Enter the login together with the reset code you received in email from. Remember the code is only active for 24 hours.",RESET_PWD_TEXT_EMAIL:"Enter the e-mail together with the reset code you received in email from. Remember the code is only active for 24 hours.",RESET_PWD_SUCCESS_TEXT:"Your password was successfully changed",VERIFY_EMAIL_WAIT:"Email verification. Please, wait.",VERIFY_EMAIL_TITLE:"Email verification",VERIFY_EMAIL_TEXT_1:"Confirm your email address using verification code",VERIFY_EMAIL_TEXT_21:"If you haven't received the code, press ",VERIFY_EMAIL_RESEND:"resend",VERIFY_EMAIL_TEXT_22:"to send it again.",VERIFY_EMAIL_SUCCESS_TEXT:"Your email address was successfully verified. Thank you!",PASSWORD_MATCH:"Passwords don't match",PASSWORD_CONFIRM:"Confirm the password",PASSWORD_SET:"Set a password",ENTRY_CHANGE_SERVER:"Change server",ENTRY_SERVER_URL:"Server URL",ENTRY_RESET_CODE:"Reset code",ENTRY_VERIFICATION_CODE:"Verification code",ENTRY_NEW_PASSWORD:"New password",ENTRY_SET_PASSWORD:"Set Password",ENTRY_RESET_PASSWORD:"Set",ENTRY_FREE:"Free",ENTRY_REPEAT:"Repeat",CHANGE_PWD_PASSWORD:"Change password",EXPIRE_CHANGE_PWD_PASSWORD:"Change expire password",CHANGE_PWD_TEXT:"Enter a new password to login.",EXPIRE_CHANGE_PWD_TEXT:"Your password has expired. Enter a new password to login.",ENTRY_CHANGE_PASSWORD:"Change",ENTRY_EXPIRE_CHANGE_PASSWORD:"Change",OLD_PASSWORD:"Current password",NEW_PASSWORD_SET:"New password",NEW_PASSWORD_CONFIRM:"Repeat password",CHANGE_PWD_SUCCESS_TEXT:"Password changed successfuly",EXPIRE_CHANGE_PWD_SUCCESS_TEXT:"Password changed successfuly",ERROR_EMAIL_INVALID:"Enter a valid email",ERROR_LOGIN_INVALID:"Enter a valid login",ERROR_PASSWORD_INVALID:"Enter a valid password",MINLENGTH_PASSWORD:"Minimum password length 6 characters",ERROR_FULLNAME_INVALID:"Enter full name",ERROR_CODE_INVALID:"Enter a code from mail",ERROR_CODE_WRONG:"Wrong recovery code",ERROR_SERVER_INVALID:"Enter server URL",LANGUAGE_RUSSIAN:"Russian",LANGUAGE_ENGLISH:"English",ERROR_ACT_EXECUTE:"Bad Request. User was not found.",ERROR_WRONG_LOGIN:"Account was not found",ERROR_LOGIN_NOT_FOUND:"Account was not found",ERROR_NO_LOGIN:"Missing account login",ERROR_WRONG_PASSWORD:"Invalid password",ERROR_WRONG_CODE:"Invalid password recovery code",ERROR_INVALID_CODE:"Invalid email verification code",ERROR_NO_EMAIL:"Missing email",ERROR_NO_NAME:"Missing account name",ERROR_ALREADY_EXIST:"User account already exist",ERROR_LOGIN_ALREADY_USED:"User account already exist",ERROR_ALREADY_EXIST_EMAIL:"User account already exist",ERROR_WRONG_LOGIN_EMAIL:"Account was not found",ERROR_NO_LOGIN_EMAIL:"Missing account login",ERROR_SERVER:"Server is not responding",ERROR_ACCOUNT_LOCKED:"Number of attempts exceeded. You account was locked.",ERROR_UNKNOWN:"Unknown error",PASSWORD_IDENTICAL:"Old and new passwords are identical"}),e.translations("ru",{FULLNAME:"Имя и фамилия",EMAIL:"Адрес эл.почты",LOGIN:"Логин",PASSWORD:"Пароль",LANGUAGE:"Язык",GENDER:"Пол",BIRTHDAY:"Дата рождения",LOCATION:"Местонахождение",VERIFY:"Подтвердить",CONTINUE:"Продолжить",HINT_FULLNAME:"Пожалуйста, введите свое полное имя - так, как вы хотите чтобы вас видели другие пользователи.",HINT_PASSWORD:"Минимум 6 символов",SIGNIN_HINT_PASSWORD:"Введите пароль",HINT_ABOUT:"Несколько слов о себе",VERIFY_EMAIL:"Подтвердите адрес своей эл.почты",HINT_EMAIL:"Введите адрес своей эл.почты",VERIFY_LOGIN:"Подтвердите свой логин",HINT_LOGIN:"Введите свой логин",SIGNIN_TITLE:"Вход в систему",SIGNIN_NOT_MEMBER:"Еще не зарегистрировались?",SIGNIN_REMEMBER:"Запомнить",SIGNIN_FORGOT_PASSWORD:"Забыли пароль?",SIGNIN_SIGNUP_HERE:" Зарегистрироваться здесь",SIGNUP_TITLE:"Регистрация",SIGNUP_NOT_MEMBER:"Новенький? Зарегистрируйтесь сейчас",SIGNUP_TEXT_11:"Нажимая кнопку регистрация, я соглашаюсь с",SIGNUP_SERVICES:"договором об услугах",SIGNUP_TEXT_12:"и",SIGNUP_PRIVACY:"соглашением о личных данных",SIGNUP_TEXT_2:"Уже зарегистрировались?",SIGNUP_SIGNIN_HERE:" Вход здесь",SIGNUP_EMAIL_REGISTERED:"Введенный адрес эл.почты уже занят",SIGNUP_LOGIN_REGISTERED:"Введенный логин уже занят",POST_SIGNUP_TITLE:"Добро пожаловать в Pip.Life",POST_SIGNUP_TEXT_1:"Ваша учетная запись создана.",POST_SIGNUP_TEXT_2:"Несклько слов о о себе",RECOVER_PWD_TITLE:"Забыли пароль?",RECOVER_PWD_TEXT_1_LOGIN:"Введите логин, который вы использовали при регистрации и мы вышлем вам инструкции как изменить пароль.",RECOVER_PWD_TEXT_1_EMAIL:"Введите эл. почту, которую вы использовали при регистрации и мы вышлем вам инструкции как изменить пароль.",RECOVER_PWD_TEXT_2:"По соображениям безопасности мы НЕ храним пароли. Таким образом, мы никогда не пошлем ваш пароль по электронной почте.",RECOVER_PWD_RECOVER:"Восстановить пароль",RESET_PWD_PASSWORD:"Изменить пароль",RESET_PWD_TEXT_LOGIN:"Введите логин вместе с кодом, который вы получили в почтовом сообщении. Помните, что код действителен только 24 часа.",RESET_PWD_TEXT_EMAIL:"Введите эл. почту вместе с кодом, который вы получили в почтовом сообщении. Помните, что код действителен только 24 часа.",RESET_PWD_SUCCESS_TEXT:"Ваш пароль успешно изменён",VERIFY_EMAIL_WAIT:"Верификация эл. почты. Подождите немного.",VERIFY_EMAIL_TITLE:"Подтверждение адреса эл.почты",VERIFY_EMAIL_TEXT_1:"Введите код, который вы получили по эл.почте",VERIFY_EMAIL_TEXT_21:"Если вы не получили почтовое сообщение с кодом, нажмите ",VERIFY_EMAIL_RESEND:"отправить снова",VERIFY_EMAIL_TEXT_22:".",VERIFY_EMAIL_SUCCESS_TEXT:"Адрес вашей электронной почты успешно подтвержден. Спасибо!",PASSWORD_MATCH:"Пароли не совпадают",PASSWORD_CONFIRM:"Подтвердите пароль",PASSWORD_SET:"Задайте пароль",ENTRY_CHANGE_SERVER:"Изменить сервер",ENTRY_SERVER_URL:"URL сервера",ENTRY_RESET_CODE:"Код сброса пароля",ENTRY_VERIFICATION_CODE:"Код проверки электронной почты",ENTRY_NEW_PASSWORD:"Новый пароль",ENTRY_SET_PASSWORD:"Изменить пароль",ENTRY_RESET_PASSWORD:"Изменить",ENTRY_FREE:"бесплатно",ENTRY_REPEAT:"Повторить",CHANGE_PWD_PASSWORD:"Изменение пароля",EXPIRE_CHANGE_PWD_PASSWORD:"Изменение пароля",CHANGE_PWD_TEXT:"Для входа введите новый пароль.",EXPIRE_CHANGE_PWD_TEXT:"Время действия Вашего пароля истекло. Для входа введите новый пароль.",ENTRY_CHANGE_PASSWORD:"Изменить",ENTRY_EXPIRE_CHANGE_PASSWORD:"Изменить",OLD_PASSWORD:"Текущий пароль",NEW_PASSWORD_SET:"Новый пароль",NEW_PASSWORD_CONFIRM:"Повторите пароль",CHANGE_PWD_SUCCESS_TEXT:"Пароль был успешно изменен",EXPIRE_CHANGE_PWD_SUCCESS_TEXT:"Пароль был успешно изменен",ERROR_EMAIL_INVALID:"Введите адрес электронной почты",ERROR_LOGIN_INVALID:"Введите логин",ERROR_PASSWORD_INVALID:"Введите пароль",MINLENGTH_PASSWORD:"Минимальная длинна пароля 6 символов",ERROR_FULLNAME_INVALID:"Введите полное имя",ERROR_CODE_INVALID:"Введите код",ERROR_CODE_WRONG:"Неправильный код",ERROR_SERVER_INVALID:"Введите URL сервера",LANGUAGE_RUSSIAN:"Русский",LANGUAGE_ENGLISH:"Английский",ERROR_ACT_EXECUTE:"Неверный запрос. Пользователь не найден.",ERROR_WRONG_LOGIN:"Учетная запись пользователя не существует",ERROR_LOGIN_NOT_FOUND:"Учетная запись пользователя не существует",ERROR_NO_LOGIN:"Не задан логин",ERROR_WRONG_PASSWORD:"Не верный пароль",ERROR_WRONG_CODE:"Не верный код восстановления пароля",ERROR_INVALID_CODE:"Не верный код верификации электронной почты",ERROR_NO_EMAIL:"Не задан адресс электронной почты",ERROR_NO_NAME:"Не задано имя пользователя",ERROR_ALREADY_EXIST:"Логин уже зарегистрирован",ERROR_LOGIN_ALREADY_USED:"Логин уже зарегистрирован",ERROR_ALREADY_EXIST_EMAIL:"Логин уже зарегистрирован",ERROR_WRONG_LOGIN_EMAIL:"Учетная запись пользователя не существует",ERROR_NO_LOGIN_EMAIL:"Не задан логин",ERROR_SERVER:"Сервер не отвечает. Проверьте URL сервера.",ERROR_ACCOUNT_LOCKED:"Количесво попыток превышено. Ваша учетная запись заблокирована.",ERROR_UNKNOWN:"Неизвестная ошибка",PASSWORD_IDENTICAL:"Старый и новый пароль совпадают"})}])}()},{}],14:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0})},{}],15:[function(e,t,i){function r(a){return{require:"ngModel",link:function(o,e,n,s){s.$validators.ERROR_compareTo=function(e,t){if(s.$isEmpty(e))return!0;var i,r=a(n.compareTo);return!(e&&!i)||(!r||e!=(i=r(o)))}}}}function o(a){return{require:"ngModel",link:function(o,e,n,s){s.$validators.ERROR_compareTo=function(e,t){if(s.$isEmpty(e))return!0;var i,r=a(n.compareTo1);return!(e&&!i)||(!r||e!=(i=r(o)))}}}}function n(a){return{require:"ngModel",link:function(o,e,n,s){s.$validators.ERROR_compareTo=function(e,t){if(s.$isEmpty(e))return!0;var i,r=a(n.compareTo2);return!(e&&!i)||(!r||e==(i=r(o)))}}}}r.$inject=["$parse"],o.$inject=["$parse"],n.$inject=["$parse"],angular.module("pipPasswordMatch",[]).directive("pipCompareOldPassword",r).directive("pipCompareNewPassword",o).directive("pipComparePasswordMatch",n)},{}],16:[function(e,t,i){!function(){"use strict";angular.module("pipEntry.Common",["pipEntry.CommonService","pipEntry.Service"])}()},{}],17:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});function r(){}i.Account=r},{}],18:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});function r(){}i.EmailSettings=r},{}],19:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=(o.$inject=["$stateParams","pipRest","pipEntry","pipSession"],o.prototype.getUserId=function(){return this.pipSession.session?this.pipSession.session.userId:null},o.prototype.signup=function(e,t,i){return this.pipRest.getResource("signup").call(e,t,i)},o.prototype.recoverPassword=function(e,t,i){return this.pipRest.getResource("recoverPassword").call({login:e.login},t,i)},o.prototype.resetPassword=function(e,t,i){return this.pipRest.getResource("resetPassword").call({login:e.login,code:e.code,password:e.password},t,i)},o.prototype.expireChangePassword=function(e,t,i){var r=e||{};return r.user_id=this.getUserId(),this.pipRest.getResource("changePassword").save(r,t,i)},o.prototype.requestEmailVerification=function(e,t,i){return this.pipRest.getResource("requestEmailVerification").call({login:e.login},t,i)},o.prototype.verifyEmail=function(e,t,i){return this.pipRest.getResource("verifyEmail").call(e,t,i)},o.prototype.readEmailSettings=function(e,t,i){var r=e||{};return r.user_id=r.user_id?r.user_id:this.getUserId(),this.pipRest.getResource("email_settings").get(e,t,i)},o.prototype.signupValidate=function(e,t,i){return this.pipRest.getResource("signupValidate").get({login:e},t,i)},o.prototype.saveSettingsKey=function(e,t,i,r,o){return this.pipRest.getResource("settings").save({section:e,key:t},{value:i},function(e){r&&r(e)},function(e){o&&o(e)})},o);function o(e,t,i,r){this.$stateParams=e,this.pipRest=t,this.pipEntry=i,this.pipSession=r}angular.module("pipEntryData",["pipRest"]).service("pipEntryData",r)},{}],20:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});function r(){}i.GENDER=r},{}],21:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0})},{}],22:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0})},{}],23:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});function r(){}i.Role=r},{}],24:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});function r(){}i.Session=r},{}],25:[function(e,t,i){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var n,s=e("./Session"),a=(n=s.Session,o(p,n),p);function p(){return null!==n&&n.apply(this,arguments)||this}i.SessionData=a},{"./Session":24}],26:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=(o.$inject=["$stateParams","pipRest","pipSession"],o.prototype.getSessionId=function(){return this.pipSession.session?this.pipSession.session.sessionId:null},o.prototype.getUserId=function(){return this.pipSession.session?this.pipSession.session.userId:null},o.prototype.getSessions=function(e,t,i){return e=e||{},this.pipRest.getResource(this.RESOURCE).call(e,t,i)},o.prototype.restoreSession=function(e,t,i){return(e=e||{}).session_id=this.getSessionId(),this.pipRest.getResource(this.RESOURCE_RESTORE).call(e,t,i)},o.prototype.getUserSessions=function(e,t,i){return(e=e||{}).user_id=this.getUserId(),this.pipRest.getResource(this.RESOURCE_USER).get(e,t,i)},o);function o(e,t,i){this.$stateParams=e,this.pipRest=t,this.pipSession=i,this.RESOURCE="sessions",this.RESOURCE_USER="userSessions",this.RESOURCE_RESTORE="restoreSessions"}angular.module("pipSessionData",["pipRest"]).service("pipSessionData",r)},{}],27:[function(e,t,i){"use strict";function r(e){for(var t in e)i.hasOwnProperty(t)||(i[t]=e[t])}Object.defineProperty(i,"__esModule",{value:!0}),e("./Session"),e("./Account"),e("./Enums"),e("./Role"),e("./SessionData"),e("./SessionDataService"),e("./ISessionDataService"),e("./EntryDataService"),e("./IEntryDataService"),angular.module("pipEntry.Data",["pipRest","pipEntryData","pipSessionData"]),r(e("./Session")),r(e("./Account")),r(e("./Enums")),r(e("./Role")),r(e("./SessionData"))},{"./Account":17,"./EntryDataService":19,"./Enums":20,"./IEntryDataService":21,"./ISessionDataService":22,"./Role":23,"./Session":24,"./SessionData":25,"./SessionDataService":26}],28:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=(o.$inject=["$state","pipExpireChangePasswordViewModel","pipEntryCommon","pipEntry","pipAuthState","pipSession","$window"],o.prototype.goBack=function(){this.$window.history.back()},Object.defineProperty(o.prototype,"config",{get:function(){return this.pipExpireChangePasswordViewModel.config},enumerable:!0,configurable:!0}),o.prototype.onChange=function(){this.pipExpireChangePasswordViewModel.onChange()},o);function o(e,t,i,r,o,n,s){this.pipExpireChangePasswordViewModel=t,this.$window=s,i.configureAppBar(),!1!==r.passwordExpire&&n.isOpened()||e.go(o.signinState(),{})}i.ExpireChangePasswordController=r,angular.module("pipEntry.ExpireChangePassword",["pipEntry.Common","pipExpireChangePasswordPanel"])},{}],29:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=(s.$inject=["$mdDialog"],s.prototype.show=function(e,t,i){this.$mdDialog.show({targetEvent:e.event,templateUrl:"expire_change_password/ExpireChangePasswordDialog.html",controller:o,controllerAs:"$ctrl",locals:{params:e},clickOutsideToClose:!1}).then(function(){t&&t()},function(){i&&i()})},s),o=(n.$inject=["$mdDialog","pipExpireChangePasswordViewModel"],Object.defineProperty(n.prototype,"config",{get:function(){return this.pipExpireChangePasswordViewModel.config},enumerable:!0,configurable:!0}),n.prototype.onChange=function(){var e=this;this.pipExpireChangePasswordViewModel.onChange(function(){e.goBack()})},n);function n(e,t){this.pipExpireChangePasswordViewModel=t,this.goBack=e.cancel}function s(e){this.$mdDialog=e}angular.module("pipEntry.ExpireChangePasswordDialog",["pipEntry.Common","pipExpireChangePasswordPanel"]).service("pipExpireChangePasswordDialog",r)},{}],30:[function(e,t,i){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var h,n=e("../common/EntryModel"),s=(h=n.EntryModel,o(a,h),a.$inject=["pipEntryCommon","pipTransaction","$rootScope","$location","$state","$injector","pipAuthState","pipFormErrors","pipRest","pipTranslate","pipEntryData","pipEntry","pipToasts"],a.prototype.init=function(e){this.initModel(e),this.setElementVisability()},a.prototype.setElementVisability=function(){this.hideObject.subTitle=1==new Boolean(this.hideObject.subTitle),this.hideObject.title=1==new Boolean(this.hideObject.title),this.hideObject.server=1==new Boolean(this.hideObject.server),this.hideObject.hint=1==new Boolean(this.hideObject.hint),this.hideObject.progress=1==new Boolean(this.hideObject.progress)},a.prototype.onShowToast=function(e,t){e&&(e=this.pipTranslate.translate(e),"message"!=(t=t||"message")?"error"!=t||this.pipToasts.showError(e,null,null,null,null):this.pipToasts.showMessage(e,null,null,null))},a.prototype.onChange=function(i){var r=this;if(this.config.form.$invalid)this.pipFormErrors.resetFormErrors(this.config.form,!0);else{var o=this.transaction.begin("PROCESSING");o&&(this.pipRest.lockServerUrl||(this.pipRest.serverUrl=this.config.data.serverUrl),this.pipEntryData.expireChangePassword({login:this.config.data.login,old_password:this.config.data.password,new_password:this.config.data.passwordNew,user_id:this.pipEntryData.getUserId()},function(e){if(r.pipFormErrors.resetFormErrors(r.config.form,!1),!r.transaction.aborted(o)){var t=String()+"EXPIRE_CHANGE_PWD_SUCCESS_TEXT";r.onShowToast(t,"message"),r.transaction.end(),i&&i(),r.pipEntry.signout(function(){r.$state.go("signin",{server_url:r.config.data.serverUrl,login:r.config.data.login})})}},function(e){r.transaction.end(e),r.pipFormErrors.resetFormErrors(r.config.form,!0),r.pipFormErrors.setFormError(r.config.form,e,{NO_LOGIN:"login",WRONG_LOGIN:"login",LOGIN_NOT_FOUND:"login",WRONG_PASSWORD:"password",act_execute:"form","-1":"form"})}))}},a);function a(e,t,i,r,o,n,s,a,p,c,l,d,g){var u=h.call(this,e)||this;return u.$rootScope=i,u.$location=r,u.$state=o,u.$injector=n,u.pipAuthState=s,u.pipFormErrors=a,u.pipRest=p,u.pipTranslate=c,u.pipEntryData=l,u.pipEntry=d,u.pipToasts=g,u.transaction=t.create("entry.expire_change_password"),u}i.ExpireChangePasswordModel=s},{"../common/EntryModel":10}],31:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r={bindings:{},controller:(o.$inject=["$scope","pipFormErrors","pipRest","pipExpireChangePasswordViewModel"],o.prototype.$postLink=function(){this.config.form=this.$scope.form,this.config.data.password=null,this.config.data.passwordNew=null},Object.defineProperty(o.prototype,"config",{get:function(){return this.pipExpireChangePasswordViewModel.config},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"transaction",{get:function(){return this.pipExpireChangePasswordViewModel.transaction},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"showServerError",{get:function(){return this.pipExpireChangePasswordViewModel.showServerError},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"hideObject",{get:function(){return this.pipExpireChangePasswordViewModel.hideObject},enumerable:!0,configurable:!0}),o.prototype.onServerUrlChanged=function(){this.config.onServerUrlChanged(this.config.form,this.config.selected.searchURLs)},o.prototype.onChanged=function(){this.pipFormErrors.resetFormErrors(this.config.form,!1),this.pipFormErrors.resetFieldsErrors(this.config.form,null),this.pipRest.serverUrl=this.config.selected.searchURLs,this.config.data.serverUrl=this.config.selected.searchURLs},o.prototype.onShowToast=function(e,t){this.pipExpireChangePasswordViewModel.onShowToast(e,t)},o),templateUrl:"expire_change_password/ExpireChangePasswordPanel.html"};function o(e,t,i,r){this.$scope=e,this.pipFormErrors=t,this.pipRest=i,this.pipExpireChangePasswordViewModel=r,this.touchedErrorsWithHint=t.touchedErrorsWithHint,r.initModel(e)}angular.module("pipExpireChangePasswordPanel",["pipFocused","pipEntry.Strings"]).component("pipExpireChangePasswordPanel",r)},{}],32:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var u=e("./ExpireChangePasswordModel"),r=(o.$inject=["pipEntryCommon","pipTransaction","$rootScope","$location","$state","$injector","pipAuthState","pipFormErrors","pipRest","pipEntry","pipTranslate","pipEntryData","pipToasts"],Object.defineProperty(o.prototype,"transaction",{get:function(){return this.model.transaction},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"hideObject",{get:function(){return this.model.hideObject},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"showServerError",{get:function(){return this.model.showServerError},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"config",{get:function(){return this.model.config},enumerable:!0,configurable:!0}),o.prototype.initModel=function(e){this.model.init(e)},o.prototype.onShowToast=function(e,t){this.model.onShowToast(e,t)},o.prototype.onChange=function(e){this.model.onChange(e)},o);function o(e,t,i,r,o,n,s,a,p,c,l,d,g){this.pipTranslate=l,this.pipEntryData=d,this.pipToasts=g,this.model=new u.ExpireChangePasswordModel(e,t,i,r,o,n,s,a,p,l,d,c,g)}i.ExpireChangePasswordViewModel=r,angular.module("pipEntry.ExpireChangePassword").service("pipExpireChangePasswordViewModel",r)},{"./ExpireChangePasswordModel":30}],33:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),e("./data"),e("./rest"),e("./common");function r(e,t,i,r){e.state("recover_password",{url:"/recover_password?server_url&email",auth:!1,controllerAs:"$ctrl",controller:n.RecoverPasswordController,templateUrl:"recover_password/RecoverPassword.html"}).state("change_password",{url:"/change_password?server_url&login",auth:!0,controllerAs:"$ctrl",controller:c.ChangePasswordController,templateUrl:"change_password/ChangePassword.html"}).state("expire_change_password",{url:"/expire_change_password?server_url&login",auth:!0,controllerAs:"$ctrl",controller:l.ExpireChangePasswordController,templateUrl:"expire_change_password/ExpireChangePassword.html"}).state("reset_password",{url:"/reset_password?server_url&email&reset_code",auth:!1,controller:s.ResetPasswordController,controllerAs:"$ctrl",templateUrl:"reset_password/ResetPassword.html"}).state("signout",{url:"/signout",controller:p.SignoutController,auth:!1}).state("post_signup",{url:"/post_signup?party_id",auth:!0,controller:a.PostSignupController,controllerAs:"$ctrl",templateUrl:"post_signup/PostSignup.html"}).state("verify_email",{url:"/verify_email?server_url&email&code&language",auth:!0,controller:o.VerifyEmailController,controllerAs:"$ctrl",templateUrl:"verify_email/VerifyEmail.html"}).state("verify_email_success",{url:"/verify_email_success",auth:!0,controller:o.VerifyEmailSuccessController,controllerAs:"$ctrl",templateUrl:"verify_email/VerifyEmailSuccess.html"}),r.signinState="signin",r.signoutState="signout"}var o=e("./verify_email/VerifyEmail"),n=e("./recover_password/RecoverPassword"),s=e("./reset_password/ResetPassword"),a=e("./post_signup/PostSignup"),p=e("./signout/Signout"),c=e("./change_password/ChangePassword"),l=e("./expire_change_password/ExpireChangePassword");r.$inject=["$stateProvider","$locationProvider","$httpProvider","pipAuthStateProvider"],angular.module("pipEntry",["ui.router","ngMessages","ngCookies","LocalStorageModule","pipControls","pipLocations","pipErrors","pipTranslate","pipCommonRest","pipEntry.Strings","pipEntry.Data","pipEntry.Rest","pipEntry.Common","pipEntry.Signin","pipEntry.Signup","pipEntry.PostSignup","pipEntry.VerifyEmail","pipEntry.RecoverPassword","pipEntry.ResetPassword","pipEntry.ResetPasswordDialog","pipEntry.RecoverPasswordDialog","pipEntry.ChangePassword","pipEntry.ChangePasswordDialog","pipEntry.ExpireChangePassword","pipEntry.ExpireChangePasswordDialog","pipEntry.Templates"]).config(r),function(e){for(var t in e)i.hasOwnProperty(t)||(i[t]=e[t])}(e("./data"))},{"./change_password/ChangePassword":1,"./common":16,"./data":27,"./expire_change_password/ExpireChangePassword":28,"./post_signup/PostSignup":34,"./recover_password/RecoverPassword":39,"./reset_password/ResetPassword":44,"./rest":52,"./signout/Signout":58,"./verify_email/VerifyEmail":64}],34:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=(o.$inject=["$window","$party","pipPostSignupViewModel"],o.prototype.$onInit=function(){},o.prototype.onPostSignupSubmit=function(){this.pipPostSignupViewModel.onPostSignupSubmit()},Object.defineProperty(o.prototype,"transaction",{get:function(){return this.pipPostSignupViewModel.transaction},enumerable:!0,configurable:!0}),o);function o(e,t,i){this.$window=e,this.$party=t,this.pipPostSignupViewModel=i}i.PostSignupController=r,angular.module("pipEntry.PostSignup",["pipEntry.Common","pipPostSignupPanel"]).controller("pipPostSignupController",r)},{}],35:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=(s.$inject=["$mdDialog"],s.prototype.show=function(e,t,i){this.$mdDialog.show({targetEvent:e.event,templateUrl:"post_signup/PostSignupDialog.html",controller:o,controllerAs:"$ctrl",locals:{params:e},clickOutsideToClose:!1}).then(function(){t&&t()},function(){i&&i()})},s),o=(n.$inject=["$mdDialog","params","pipPostSignupViewModel"],n.prototype.onPostSignupSubmit=function(){var e=this;this.pipPostSignupViewModel.onPostSignupSubmit(function(){e.goBack()})},Object.defineProperty(n.prototype,"transaction",{get:function(){return this.pipPostSignupViewModel.transaction},enumerable:!0,configurable:!0}),n);function n(e,t,i){this.pipPostSignupViewModel=i,this.goBack=e.cancel,this.$party=t.$party}function s(e){this.$mdDialog=e}angular.module("pipEntry.PostSignupDialog",["pipEntry.Common","pipPostSignupPanel"]).service("pipPostSignupDialog",r)},{}],36:[function(e,t,i){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var f,n=e("../common/EntryModel"),s=(f=n.EntryModel,o(a,f),a.$inject=["pipEntryCommon","pipTransaction","$rootScope","$location","$state","$injector","pipErrorPageConfigService","pipAuthState","pipFormErrors","pipEntry","pipRest","pipTranslate","pipEntryData","pipToasts"],a.prototype.init=function(e){this.initModel(e),this.setElementVisability()},a.prototype.setElementVisability=function(){this.hideObject.subTitle=1==new Boolean(this.hideObject.subTitle),this.hideObject.title=1==new Boolean(this.hideObject.title),this.hideObject.successTitle=1==new Boolean(this.hideObject.successTitle),this.hideObject.progress=1==new Boolean(this.hideObject.progress)},a.prototype.checkSupported=function(){var e=this.$injector.has("pipSystemInfo")?this.$injector.get("pipSystemInfo"):null;if(!e)return!0;if(!(this.pipErrorPageConfigService&&this.pipErrorPageConfigService.configs&&this.pipErrorPageConfigService.configs.Unsupported&&this.pipErrorPageConfigService.configs.Unsupported.Active))return!0;var t=e.browserName,i=e.browserVersion;i=i.split(".")[0];var r=this.pipErrorPageConfigService.configs.Unsupported.Params&&this.pipErrorPageConfigService.configs.Unsupported.Params.supported?this.pipErrorPageConfigService.configs.Unsupported.Params.supported:null;return!r||!!(t&&r[t]&&i>=r[t])||(this.pipEntry.signout(),this.$state.go(pip.errors.ErrorsUnsupportedState),!1)},a.prototype.onPostSignupSubmit=function(e){this.config.form.$invalid?this.pipFormErrors.resetFormErrors(this.config.form,!0):this.transaction.begin("PROCESSING")&&e&&e()},a);function a(e,t,i,r,o,n,s,a,p,c,l,d,g,u){var h=f.call(this,e)||this;return h.$rootScope=i,h.$location=r,h.$state=o,h.$injector=n,h.pipErrorPageConfigService=s,h.pipAuthState=a,h.pipFormErrors=p,h.pipEntry=c,h.pipRest=l,h.pipTranslate=d,h.pipEntryData=g,h.pipToasts=u,h.transaction=t.create("entry.signin"),h}i.PostSignupModel=s},{"../common/EntryModel":10}],37:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=e("../data/Enums"),r={bindings:{$party:"=pipParty"},templateUrl:"post_signup/PostSignupPanel.html",controller:(n.$inject=["$scope","pipTranslate","pipFormErrors","pipPostSignupViewModel"],n.prototype.$postLink=function(){this.config.form=this.$scope.form},Object.defineProperty(n.prototype,"config",{get:function(){return this.pipPostSignupViewModel.config},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"transaction",{get:function(){return this.pipPostSignupViewModel.transaction},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"showServerError",{get:function(){return this.pipPostSignupViewModel.showServerError},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hideObject",{get:function(){return this.pipPostSignupViewModel.hideObject},enumerable:!0,configurable:!0}),n.prototype.onPictureChanged=function(e){this.config.enableAvatar&&this.picture&&this.picture.save(function(){},function(e){})},n.prototype.onPictureCreated=function(e){this.picture=e.sender},n)};function n(e,t,i,r){this.$scope=e,(this.pipPostSignupViewModel=r).initModel(e),this.touchedErrorsWithHint=i.touchedErrorsWithHint,this.config.data={id:this.$party.id,name:this.$party.name,email:this.$party.email,about:this.$party.about,language:t.language,birthday:this.$party.birthday,gender:this.$party.gender||o.GENDER.NOT_SPECIFIED,location:this.$party.location}}angular.module("pipPostSignupPanel",["pipFocused","pipEntry.Strings"]).component("pipPostSignupPanel",r)},{"../data/Enums":20}],38:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var h=e("./PostSignupModel"),r=(o.$inject=["pipEntryCommon","pipTransaction","$rootScope","$location","$state","$injector","pipErrorPageConfigService","pipAuthState","pipEntry","pipFormErrors","pipRest","pipTranslate","pipEntryData","pipToasts"],Object.defineProperty(o.prototype,"transaction",{get:function(){return this.model.transaction},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"hideObject",{get:function(){return this.model.hideObject},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"showServerError",{get:function(){return this.model.showServerError},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"config",{get:function(){return this.model.config},enumerable:!0,configurable:!0}),o.prototype.initModel=function(e){this.model.init(e)},o.prototype.onPostSignupSubmit=function(e){this.model.onPostSignupSubmit(e)},o);function o(e,t,i,r,o,n,s,a,p,c,l,d,g,u){this.pipTranslate=d,this.pipEntryData=g,this.pipToasts=u,this.model=new h.PostSignupModel(e,t,i,r,o,n,s,a,c,p,l,d,g,u)}i.PostSignupViewModel=r,angular.module("pipEntry.PostSignup").service("pipPostSignupViewModel",r)},{"./PostSignupModel":36}],39:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=(o.$inject=["$scope","pipRecoverPasswordViewModel","pipResetPasswordDialog","pipEntryCommon","$state","pipAuthState","pipFormErrors","$window"],o.prototype.goBack=function(){this.$state.go(this.pipAuthState.signinState())},Object.defineProperty(o.prototype,"transaction",{get:function(){return this.pipRecoverPasswordViewModel.transaction},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"config",{get:function(){return this.pipRecoverPasswordViewModel.config},enumerable:!0,configurable:!0}),o.prototype.onRecover=function(){var e=this;this.pipRecoverPasswordViewModel.onRecover(function(){e.pipResetPasswordDialog.show({},function(){e.$scope.$broadcast("RecoverPasswordInit")},function(){e.$scope.$broadcast("RecoverPasswordInit")})})},o);function o(e,t,i,r,o,n,s,a){this.$scope=e,this.pipRecoverPasswordViewModel=t,this.pipResetPasswordDialog=i,this.$state=o,this.pipAuthState=n,this.pipFormErrors=s,this.$window=a,r.configureAppBar()}i.RecoverPasswordController=r,angular.module("pipEntry.RecoverPassword",["pipEntry.Common","pipRecoverPasswordPanel","pipEntry.ResetPasswordDialog"])},{}],40:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=(s.$inject=["$mdDialog"],s.prototype.show=function(e,t,i){this.$mdDialog.show({targetEvent:e.event,templateUrl:"recover_password/RecoverPasswordDialog.html",controller:o,controllerAs:"$ctrl",locals:{params:e},clickOutsideToClose:!1}).then(function(){t&&t()},function(){i&&i()})},s),o=(n.$inject=["pipResetPasswordDialog","pipRecoverPasswordViewModel","pipFormErrors","$mdDialog"],Object.defineProperty(n.prototype,"transaction",{get:function(){return this.pipRecoverPasswordViewModel.transaction},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"config",{get:function(){return this.pipRecoverPasswordViewModel.config},enumerable:!0,configurable:!0}),n.prototype.onRecover=function(){var e=this;this.$mdDialog.cancel,this.pipRecoverPasswordViewModel.onRecover(function(){e.pipResetPasswordDialog.show({})})},n);function n(e,t,i,r){this.pipResetPasswordDialog=e,this.pipRecoverPasswordViewModel=t,this.pipFormErrors=i,this.$mdDialog=r,this.goBack=r.cancel}function s(e){this.$mdDialog=e}angular.module("pipEntry.RecoverPasswordDialog",["pipEntry.Common","pipRecoverPasswordPanel","pipEntry.ResetPasswordDialog"]).service("pipRecoverPasswordDialog",r)},{}],41:[function(e,t,i){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var u,n=e("../common/EntryModel"),s=(u=n.EntryModel,o(a,u),a.$inject=["pipEntryCommon","pipTransaction","$rootScope","$location","$state","$injector","pipAuthState","pipFormErrors","pipRest","pipTranslate","pipEntryData","pipToasts"],a.prototype.init=function(e){this.initModel(e),this.setElementVisability()},a.prototype.setElementVisability=function(){this.hideObject.title=1==new Boolean(this.hideObject.title),this.hideObject.subTitle1=1==new Boolean(this.hideObject.subTitle1),this.hideObject.subTitle2=1==new Boolean(this.hideObject.subTitle2),this.hideObject.server=1==new Boolean(this.hideObject.server),this.hideObject.hint=1==new Boolean(this.hideObject.hint),this.hideObject.progress=1==new Boolean(this.hideObject.progress)},a.prototype.onRecover=function(t){var i=this;if(this.config.form.$invalid)this.pipFormErrors.resetFormErrors(this.config.form,!0);else{var r=this.transaction.begin("PROCESSING");r&&(this.pipRest.lockServerUrl||(this.pipRest.serverUrl=this.config.data.serverUrl),this.pipEntryData.recoverPassword({login:this.config.data.login},function(e){i.pipFormErrors.resetFormErrors(i.config.form,!0),i.transaction.aborted(r)||(i.transaction.end(),t?t():i.$state.go("reset_password",{server_url:i.config.data.serverUrl,login:i.config.data.login}))},function(e){i.transaction.end(e),i.pipFormErrors.setFormError(i.config.form,e,{WRONG_LOGIN:"login",NO_LOGIN:"login",LOGIN_NOT_FOUND:"login",act_execute:"form","-1":"form"}),i.pipFormErrors.resetFormErrors(i.config.form,!0)}))}},a);function a(e,t,i,r,o,n,s,a,p,c,l,d){var g=u.call(this,e)||this;return g.$rootScope=i,g.$location=r,g.$state=o,g.$injector=n,g.pipAuthState=s,g.pipFormErrors=a,g.pipRest=p,g.pipTranslate=c,g.pipEntryData=l,g.pipToasts=d,g.transaction=t.create("entry.signin"),g}i.RecoverPasswordModel=s},{"../common/EntryModel":10}],42:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r={bindings:{},controller:(o.$inject=["$scope","pipFormErrors","pipRest","pipRecoverPasswordViewModel"],o.prototype.$postLink=function(){this.config.form=this.$scope.form,this.config.data.password=null,this.config.data.passwordNew=null},Object.defineProperty(o.prototype,"config",{get:function(){return this.pipRecoverPasswordViewModel.config},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"transaction",{get:function(){return this.pipRecoverPasswordViewModel.transaction},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"showServerError",{get:function(){return this.pipRecoverPasswordViewModel.showServerError},enumerable:!0,configurable:!0}),o.prototype.onServerUrlChanged=function(){this.config.onServerUrlChanged(this.config.form,this.config.selected.searchURLs)},o.prototype.onChanged=function(){this.pipFormErrors.resetFormErrors(this.config.form,!1),this.pipFormErrors.resetFieldsErrors(this.config.form,null),this.pipRest.serverUrl=this.config.selected.searchURLs,this.config.data.serverUrl=this.config.selected.searchURLs},Object.defineProperty(o.prototype,"hideObject",{get:function(){return this.pipRecoverPasswordViewModel.hideObject},enumerable:!0,configurable:!0}),o),templateUrl:"recover_password/RecoverPasswordPanel.html"};function o(e,t,i,r){var o=this;this.$scope=e,this.pipFormErrors=t,this.pipRest=i,this.pipRecoverPasswordViewModel=r,this.touchedErrorsWithHint=t.touchedErrorsWithHint,r.initModel(e),this.$scope.$on("RecoverPasswordInit",function(){o.config.form=o.$scope.form})}angular.module("pipRecoverPasswordPanel",["pipFocused","pipEntry.Strings"]).component("pipRecoverPasswordPanel",r)},{}],43:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var g=e("./RecoverPasswordModel"),r=(o.$inject=["pipEntryCommon","pipTransaction","$rootScope","$location","$state","$injector","pipAuthState","pipFormErrors","pipRest","pipTranslate","pipEntryData","pipToasts"],Object.defineProperty(o.prototype,"transaction",{get:function(){return this.model.transaction},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"hideObject",{get:function(){return this.model.hideObject},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"showServerError",{get:function(){return this.model.showServerError},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"config",{get:function(){return this.model.config},enumerable:!0,configurable:!0}),o.prototype.initModel=function(e){this.model.init(e)},o.prototype.onRecover=function(e){this.model.onRecover(e)},o);function o(e,t,i,r,o,n,s,a,p,c,l,d){this.pipTranslate=c,this.pipEntryData=l,this.pipToasts=d,this.model=new g.RecoverPasswordModel(e,t,i,r,o,n,s,a,p,c,l,d)}i.RecoverPasswordViewModel=r,angular.module("pipEntry.RecoverPassword").service("pipRecoverPasswordViewModel",r)},{"./RecoverPasswordModel":41}],44:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=(o.$inject=["pipResetPasswordViewModel","pipEntryCommon","$window"],o.prototype.goBack=function(){this.$window.history.back()},Object.defineProperty(o.prototype,"config",{get:function(){return this.pipResetPasswordViewModel.config},enumerable:!0,configurable:!0}),o.prototype.onReset=function(){this.pipResetPasswordViewModel.onReset()},o);function o(e,t,i){this.pipResetPasswordViewModel=e,this.$window=i,t.configureAppBar()}i.ResetPasswordController=r,angular.module("pipEntry.ResetPassword",["pipEntry.Common","pipResetPasswordPanel","pipEmailUnique"])},{}],45:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=(s.$inject=["$mdDialog"],s.prototype.show=function(e,t,i){this.$mdDialog.show({targetEvent:e.event,templateUrl:"reset_password/ResetPasswordDialog.html",controller:o,controllerAs:"$ctrl",locals:{params:e},clickOutsideToClose:!1}).then(function(){t&&t()},function(){i&&i()})},s),o=(n.$inject=["$mdDialog","pipResetPasswordViewModel"],Object.defineProperty(n.prototype,"config",{get:function(){return this.pipResetPasswordViewModel.config},enumerable:!0,configurable:!0}),n.prototype.onReset=function(){var e=this;this.pipResetPasswordViewModel.onReset(function(){e.goBack()})},n.prototype.onCancel=function(){this.goBack()},n);function n(e,t){this.pipResetPasswordViewModel=t,this.goBack=e.cancel}function s(e){this.$mdDialog=e}angular.module("pipEntry.ResetPasswordDialog",["pipEntry.Common","pipResetPasswordPanel"]).service("pipResetPasswordDialog",r)},{}],46:[function(e,t,i){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var u,n=e("../common/EntryModel"),s=(u=n.EntryModel,o(a,u),a.$inject=["pipEntryCommon","pipTransaction","$rootScope","$location","$state","$injector","pipAuthState","pipFormErrors","pipRest","pipTranslate","pipEntryData","pipToasts"],a.prototype.init=function(e){this.initModel(e),this.setElementVisability()},a.prototype.setElementVisability=function(){this.hideObject.subTitle=1==new Boolean(this.hideObject.subTitle),this.hideObject.title=1==new Boolean(this.hideObject.title),this.hideObject.server=1==new Boolean(this.hideObject.server),this.hideObject.hint=1==new Boolean(this.hideObject.hint),this.hideObject.progress=1==new Boolean(this.hideObject.progress)},a.prototype.onShowToast=function(e,t){e&&(e=this.pipTranslate.translate(e),"message"!=(t=t||"message")?"error"!=t||this.pipToasts.showError(e,null,null,null,null):this.pipToasts.showMessage(e,null,null,null))},a.prototype.onReset=function(i){var r=this;if(this.config.form.$invalid)this.pipFormErrors.resetFormErrors(this.config.form,!0);else{var o=this.transaction.begin("PROCESSING");o&&(this.pipRest.lockServerUrl||(this.pipRest.serverUrl=this.config.data.serverUrl),this.pipEntryData.resetPassword({login:this.config.data.login,code:this.config.data.resetCode,password:this.config.data.password},function(e){if(r.pipFormErrors.resetFormErrors(r.config.form,!1),!r.transaction.aborted(o)){var t=String()+"RESET_PWD_SUCCESS_TEXT";r.onShowToast(t,"message"),r.transaction.end(),i&&i(),r.$state.go("signin",{server_url:r.config.data.serverUrl,login:r.config.data.login})}},function(e){r.transaction.end(e),r.pipFormErrors.resetFormErrors(r.config.form,!0),r.pipFormErrors.setFormError(r.config.form,e,{NO_LOGIN:"login",WRONG_LOGIN:"login",LOGIN_NOT_FOUND:"login",WRONG_PASSWORD:"password",WRONG_CODE:"resetCode",act_execute:"form","-1":"form"})}))}},a);function a(e,t,i,r,o,n,s,a,p,c,l,d){var g=u.call(this,e)||this;return g.$rootScope=i,g.$location=r,g.$state=o,g.$injector=n,g.pipAuthState=s,g.pipFormErrors=a,g.pipRest=p,g.pipTranslate=c,g.pipEntryData=l,g.pipToasts=d,g.transaction=t.create("entry.signin"),g}i.ResetPasswordModel=s},{"../common/EntryModel":10}],47:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r={bindings:{},controller:(o.$inject=["$scope","pipFormErrors","pipRest","pipResetPasswordViewModel"],o.prototype.$postLink=function(){this.config.form=this.$scope.form,this.config.data.password=null,this.config.data.passwordNew=null},Object.defineProperty(o.prototype,"config",{get:function(){return this.pipResetPasswordViewModel.config},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"transaction",{get:function(){return this.pipResetPasswordViewModel.transaction},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"showServerError",{get:function(){return this.pipResetPasswordViewModel.showServerError},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"hideObject",{get:function(){return this.pipResetPasswordViewModel.hideObject},enumerable:!0,configurable:!0}),o.prototype.onServerUrlChanged=function(){this.config.onServerUrlChanged(this.config.form,this.config.selected.searchURLs)},o.prototype.onChanged=function(){this.pipFormErrors.resetFormErrors(this.config.form,!1),this.pipFormErrors.resetFieldsErrors(this.config.form,null),this.pipRest.serverUrl=this.config.selected.searchURLs,this.config.data.serverUrl=this.config.selected.searchURLs},o.prototype.onShowToast=function(e,t){this.pipResetPasswordViewModel.onShowToast(e,t)},o),templateUrl:"reset_password/ResetPasswordPanel.html"};function o(e,t,i,r){this.$scope=e,this.pipFormErrors=t,this.pipRest=i,this.pipResetPasswordViewModel=r,this.touchedErrorsWithHint=t.touchedErrorsWithHint,r.initModel(e)}angular.module("pipResetPasswordPanel",["pipFocused","pipEntry.Strings"]).component("pipResetPasswordPanel",r)},{}],48:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var g=e("./ResetPasswordModel"),r=(o.$inject=["pipEntryCommon","pipTransaction","$rootScope","$location","$state","$injector","pipAuthState","pipFormErrors","pipRest","pipTranslate","pipEntryData","pipToasts"],Object.defineProperty(o.prototype,"transaction",{get:function(){return this.model.transaction},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"hideObject",{get:function(){return this.model.hideObject},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"showServerError",{get:function(){return this.model.showServerError},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"config",{get:function(){return this.model.config},enumerable:!0,configurable:!0}),o.prototype.initModel=function(e){this.model.init(e)},o.prototype.onShowToast=function(e,t){this.model.onShowToast(e,t)},o.prototype.onReset=function(e){this.model.onReset(e)},o);function o(e,t,i,r,o,n,s,a,p,c,l,d){this.pipTranslate=c,this.pipEntryData=l,this.pipToasts=d,this.model=new g.ResetPasswordModel(e,t,i,r,o,n,s,a,p,c,l,d)}i.ResetPasswordViewModel=r,angular.module("pipEntry.ResetPassword").service("pipResetPasswordViewModel",r)},{"./ResetPasswordModel":46}],49:[function(e,t,i){function r(e){e.registerOperation("signin","/api/v1/signin"),e.registerOperation("signout","/api/v1/signout"),e.registerOperation("signup","/api/v1/signup"),e.registerOperation("recoverPassword","/api/v1/passwords/recover"),e.registerOperation("resetPassword","/api/v1/passwords/reset"),e.registerCollection("changePassword","/api/v1/passwords/:user_id/change",{user_id:"@user_id"}),e.registerOperation("requestEmailVerification","/api/v1/email_settings/resend"),e.registerOperation("verifyEmail","/api/v1/email_settings/verify"),e.registerOperation("email_settings","/api/v1/email_settings/:user_id",{user_id:"@user_id"},{get:{method:"GET",isArray:!1}}),e.registerOperation("signupValidate","/api/v1/signup/validate",{},{get:{method:"GET",isArray:!1}})}r.$inject=["pipRestProvider"],angular.module("pipEntry.Rest").config(r)},{}],50:[function(e,t,i){function r(e){e.registerPagedCollection("sessions","/api/v1/sessions"),e.registerOperation("restoreSessions","/api/v1/sessions/restore"),e.registerPagedCollection("userSessions","/api/v1//sessions/:user_id")}r.$inject=["pipRestProvider"],angular.module("pipEntry.Rest").config(r)},{}],51:[function(e,t,i){function r(e){e.registerPagedCollection("settings","/api/v1/settings/:section/:key",{section:"@section"},{update:{method:"PUT"}})}r.$inject=["pipRestProvider"],angular.module("pipEntry.Rest").config(r)},{}],52:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),angular.module("pipEntry.Rest",[]),e("./EntryResources"),e("./SettingsResources"),e("./SessionResources")},{"./EntryResources":49,"./SessionResources":50,"./SettingsResources":51}],53:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isSignin="isSignin";function i(e,t){e.state("signin",{url:"/signin?login&server_url&redirect_to&language&email",auth:!1,controller:r,controllerAs:"$ctrl",templateUrl:"signin/Signin.html"}),t.signinState="signin"}var r=(o.$inject=["$scope","$rootScope","pipEntry","pipEntryCommon","pipSession"],o);function o(e,t,i,r,o){this.fixedServerUrl=!1,r.configureAppBar(),t[n.isSignin]=!1,this.fixedServerUrl=e.fixedServerUrl}i.$inject=["$stateProvider","pipAuthStateProvider"],angular.module("pipEntry.Signin",["pipEntry.Common","pipSigninPanel"]).config(i)},{}],54:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=(o.$inject=["$mdDialog"],o.prototype.show=function(e,t,i){this.$mdDialog.show({targetEvent:e.event,templateUrl:"signin/SigninDialog.html",controller:n,locals:{params:e},clickOutsideToClose:!1}).then(function(){t&&t()},function(){i&&i()})},o);function o(e){this.$mdDialog=e}var n=(s.$inject=["pipSignupDialog","pipRecoverPasswordDialog","pipEntry"],s.prototype.gotoSignupDialog=function(){this.pipSignupDialog.show({})},s.prototype.gotoRecoverPasswordDialog=function(){this.pipRecoverPasswordDialog.show({})},s);function s(e,t,i){var r=this;this.pipSignupDialog=e,this.pipRecoverPasswordDialog=t,this.pipEntry=i,this.pipGotoSignupDialog=function(){r.gotoSignupDialog()},this.pipGotoRecoverPasswordDialog=function(){r.gotoRecoverPasswordDialog()}}angular.module("pipEntry.SigninDialog",["pipEntry.Common","pipSigninPanel","pipEntry.SignupDialog","pipEntry.RecoverPasswordDialog"]).service("pipSigninDialog",r)},{}],55:[function(e,t,i){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var u,n=e("../common/EntryModel"),s=e("../common/EntryPageConfig"),a=(u=n.EntryModel,o(p,u),p.$inject=["pipEntryCommon","pipTransaction","$rootScope","$location","$state","$injector","pipErrorPageConfigService","pipAuthState","pipEntry","pipFormErrors","pipNavService","pipRest"],p.prototype.init=function(e){this.initModel(e),this.setElementVisability()},p.prototype.setElementVisability=function(){this.hideObject.remember=1==new Boolean(this.hideObject.remember),this.hideObject.title=1==new Boolean(this.hideObject.title),this.hideObject.server=1==new Boolean(this.hideObject.server),this.hideObject.forgotPassword=1==new Boolean(this.hideObject.forgotPassword),this.hideObject.signup=1==new Boolean(this.hideObject.signup),this.hideObject.hint=1==new Boolean(this.hideObject.hint),this.hideObject.progress=1==new Boolean(this.hideObject.progress)},p.prototype.checkSupported=function(){var e=this.$injector.has("pipSystemInfo")?this.$injector.get("pipSystemInfo"):null;if(!e)return!0;if(!(this.pipErrorPageConfigService&&this.pipErrorPageConfigService.configs&&this.pipErrorPageConfigService.configs.Unsupported&&this.pipErrorPageConfigService.configs.Unsupported.Active))return!0;var t=e.browserName,i=e.browserVersion;i=i.split(".")[0];var r=this.pipErrorPageConfigService.configs.Unsupported.Params&&this.pipErrorPageConfigService.configs.Unsupported.Params.supported?this.pipErrorPageConfigService.configs.Unsupported.Params.supported:null;return!r||!!(t&&r[t]&&i>=r[t])||(this.pipEntry.signout(),this.$state.go(pip.errors.ErrorsUnsupportedState),!1)},p.prototype.gotoSignup=function(e,t){e||t?e?this.$state.go(e):t&&t():this.$state.go("signup",{server_url:this.config.data.serverUrl,login:this.config.data.login})},p.prototype.gotoRecoverPassword=function(e){e?e&&e():this.$state.go("recover_password",{server_url:this.config.data.serverUrl,login:this.config.data.login})},p.prototype.inSigninComplete=function(e){if(this.checkSupported()){var t=!1;if(this.pipEntry.passwordExpire&&e.user&&e.user.change_pwd_time){var i=new Date(e.user.change_pwd_time),r=new Date;t=i.getTime()<r.getTime()}t?this.pipAuthState.go("change_password",{login:this.config.data.login,server_url:this.pipRest.serverUrl}):this.pipAuthState.params.redirect_to?this.pipAuthState.params.toState?this.pipAuthState.params.toState!=this.pipAuthState.signinState?this.pipAuthState.go(this.pipAuthState.params.toState,this.pipAuthState.params.toParams):this.pipAuthState.goToAuthorized({}):"/signin"!=decodeURIComponent(this.pipAuthState.params.redirect_to)?this.$location.url(decodeURIComponent(this.pipAuthState.params.redirect_to)):this.pipAuthState.goToAuthorized({}):this.pipAuthState.goToAuthorized({}),this.pipNavService.sidenav.show()}},p.prototype.checkEmailVerification=function(e){return e.user&&e.user.settings&&e.user.settings.verified_email&&"true"==e.user.settings.verified_email},p.prototype.onSignin=function(e){var i=this;if(this.config.form.$invalid)this.pipFormErrors.resetFormErrors(this.config.form,!0);else{var r=this.transaction.begin("ENTERING");r&&(this.$rootScope.isSignin=!0,this.hideObject.remember&&e&&(this.config.data.remember=!0),this.pipRest.lockServerUrl||(this.pipRest.serverUrl=this.config.data.serverUrl),new s.AuthSessionData,this.pipRest.setHeaders({"session-id":void 0,"user-id":void 0,"account-id":void 0}),this.pipRest.getResource("signin").call({login:this.config.data.login,password:this.config.data.password},function(t){i.pipFormErrors.resetFormErrors(i.config.form,!1),i.transaction.aborted(r)||(i.pipEntry.openSession(t,i.config.data.remember),i.checkEmailVerification(t)?(i.inSigninComplete(t),i.transaction.end()):i.pipRest.getResource("email_settings").get({user_id:t.user.id},function(e){e&&e.verified&&e.email==t.user.login?i.inSigninComplete(t):i.pipAuthState.go("verify_email",{email:t.user.login||t.user.email,serverUrl:i.pipRest.serverUrl}),i.transaction.end()},function(e){i.$rootScope.isSignin=!1,i.pipFormErrors.resetFormErrors(i.config.form,!0),i.pipFormErrors.setFormError(i.config.form,e,{WRONG_LOGIN:"login",NO_LOGIN:"login",LOGIN_NOT_FOUND:"login",WRONG_PASSWORD:"password",ACCOUNT_LOCKED:"form",act_execute:"form","-1":"form"}),i.transaction.end({message:e})}))},function(e){i.$rootScope.isSignin=!1,i.pipFormErrors.resetFormErrors(i.config.form,!0),i.pipFormErrors.setFormError(i.config.form,e,{WRONG_LOGIN:"login",NO_LOGIN:"login",LOGIN_NOT_FOUND:"login",WRONG_PASSWORD:"password",act_execute:"form","-1":"form"}),i.transaction.end({message:e})}))}},p);function p(e,t,i,r,o,n,s,a,p,c,l,d){var g=u.call(this,e)||this;return g.$rootScope=i,g.$location=r,g.$state=o,g.$injector=n,g.pipErrorPageConfigService=s,g.pipAuthState=a,g.pipEntry=p,g.pipFormErrors=c,g.pipNavService=l,g.pipRest=d,g.transaction=t.create("entry.signin"),g}i.SinginModel=a},{"../common/EntryModel":10,"../common/EntryPageConfig":11}],56:[function(e,t,i){"use strict";function r(e,t,i,r,o,n,s){this.$scope=e,this.$document=t,this.$timeout=i,this.pipMedia=r,this.pipSigninViewModel=o,this.pipRest=n,this.pipFormErrors=s,o.initModel(e),this.touchedErrorsWithHint=s.touchedErrorsWithHint}Object.defineProperty(i,"__esModule",{value:!0});var o={bindings:{gotoSignupPage:"=pipGotoSignupPage",gotoSignupDialog:"=pipGotoSignupDialog",gotoRecoverPasswordDialog:"=pipGotoRecoverPasswordDialog",rememberDefault:"=pipRemember"},templateUrl:"signin/SigninPanel.html",controller:(r.$inject=["$scope","$document","$timeout","pipMedia","pipSigninViewModel","pipRest","pipFormErrors"],r.prototype.$postLink=function(){var t=this;this.config.form=this.$scope.form,this.$timeout(function(){if(t.$document&&t.$document[0]){var e=angular.element(t.$document[0].querySelector("input[type=password]:-webkit-autofill"));e.length&&e.parent().addClass("md-input-has-value")}},150)},Object.defineProperty(r.prototype,"config",{get:function(){return this.pipSigninViewModel.config},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"transaction",{get:function(){return this.pipSigninViewModel.transaction},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"showServerError",{get:function(){return this.pipSigninViewModel.showServerError},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"hideObject",{get:function(){return this.pipSigninViewModel.hideObject},enumerable:!0,configurable:!0}),r.prototype.gotoSignup=function(){this.pipSigninViewModel.gotoSignup(this.gotoSignupPage,this.gotoSignupDialog)},r.prototype.onSignin=function(){this.pipSigninViewModel.onSignin(this.rememberDefault)},r.prototype.gotoRecoverPassword=function(){this.pipSigninViewModel.gotoRecoverPassword(this.gotoRecoverPasswordDialog)},r.prototype.onServerUrlChanged=function(){this.config.onServerUrlChanged(this.config.form,this.config.selected.searchURLs)},r.prototype.onChanged=function(){this.pipFormErrors.resetFormErrors(this.config.form,!1),this.pipFormErrors.resetFieldsErrors(this.config.form,null),this.pipRest.serverUrl=this.config.selected.searchURLs,this.config.data.serverUrl=this.config.selected.searchURLs},r.prototype.onEnter=function(e){13===e.keyCode&&this.onSignin()},r)};angular.module("pipSigninPanel",["pipFocused","pipEntry.Strings"]).component("pipSigninPanel",o)},{}],57:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var g=e("./SigninModel"),r=(o.$inject=["pipEntryCommon","pipTransaction","$rootScope","$location","$state","$injector","pipErrorPageConfigService","pipAuthState","pipEntry","pipFormErrors","pipNavService","pipRest"],Object.defineProperty(o.prototype,"transaction",{get:function(){return this.model.transaction},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"hideObject",{get:function(){return this.model.hideObject},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"showServerError",{get:function(){return this.model.showServerError},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"config",{get:function(){return this.model.config},enumerable:!0,configurable:!0}),o.prototype.initModel=function(e){this.model.init(e)},o.prototype.gotoSignup=function(e,t){this.model.gotoSignup(e,t)},o.prototype.gotoRecoverPassword=function(e){this.model.gotoRecoverPassword(e)},o.prototype.onSignin=function(e){this.model.onSignin(e)},o);function o(e,t,i,r,o,n,s,a,p,c,l,d){this.model=new g.SinginModel(e,t,i,r,o,n,s,a,p,c,l,d)}i.SigninViewModel=r,angular.module("pipEntry.Signin").service("pipSigninViewModel",r)},{"./SigninModel":55}],58:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});function r(e,t){t.signout(),e.goToUnauthorized({})}i.SignoutController=r,angular.module("pipEntry.Signout",[])},{}],59:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});function r(e,t){e.state("signup",{url:"/signup?name&login&server_url&redirect_to&language",auth:!1,controller:o,controllerAs:"$ctrl",templateUrl:"signup/Signup.html"})}var o=(n.$inject=["pipEntryCommon","pipEntry","$state","pipAuthState"],n);function n(e,t,i,r){e.configureAppBar(),t.entryHideObject&&!0===t.entryHideObject.signup&&i.go(r.signinState(),{})}r.$inject=["$stateProvider","pipAuthStateProvider"],angular.module("pipEntry.Signup",["pipEntry.Common","pipSignupPanel","pipPasswordMatch"]).config(r)},{}],60:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=(o.$inject=["$mdDialog"],o.prototype.show=function(e,t,i){this.$mdDialog.show({targetEvent:e.event,templateUrl:"signup/SignupDialog.html",controller:n,controllerAs:"$ctrl",locals:{params:e},clickOutsideToClose:!1}).then(function(){t&&t()},function(){i&&i()})},o);function o(e){this.$mdDialog=e}var n=(s.$inject=["pipSigninDialog","pipPostSignupDialog","pipEntry"],s.prototype.gotoSigninDialog=function(){this.pipSigninDialog.show({})},s.prototype.gotoPostSignupDialog=function(e){this.pipPostSignupDialog.show({$party:e})},s);function s(e,t,i){var r=this;this.pipSigninDialog=e,this.pipPostSignupDialog=t,(this.pipEntry=i).signout(),this.pipGotoSigninDialog=function(){r.gotoSigninDialog()},this.pipGotoPostSignupDialog=function(e){r.gotoPostSignupDialog(e)}}angular.module("pipEntry.SignupDialog",["pipEntry.Common","pipSignupPanel","pipEntry.SigninDialog","pipEntry.PostSignupDialog"]).service("pipSignupDialog",r)},{}],61:[function(e,t,i){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var u,n=e("../common/EntryModel"),s=(u=n.EntryModel,o(a,u),a.$inject=["pipEntryCommon","pipTransaction","$rootScope","$location","$state","$injector","pipAuthState","pipFormErrors","pipRest","pipEntry","pipEntryData","pipTranslate"],a.prototype.init=function(e){this.initModel(e),this.setElementVisability()},a.prototype.setElementVisability=function(){this.hideObject.agreement=1==new Boolean(this.hideObject.agreement),this.hideObject.title=1==new Boolean(this.hideObject.title),this.hideObject.server=1==new Boolean(this.hideObject.server),this.hideObject.passwordConfirm=1==new Boolean(this.hideObject.passwordConfirm),this.hideObject.signin=1==new Boolean(this.hideObject.signin),this.hideObject.hint=1==new Boolean(this.hideObject.hint),this.hideObject.progress=1==new Boolean(this.hideObject.progress)},a.prototype.gotoSignin=function(e,t){e||t?e?this.$state.go(e):t&&t():this.$state.go(this.pipAuthState.signinState(),{})},a.prototype.onSignup=function(e){var i=this;if(this.config.form.$invalid)this.pipFormErrors.resetFormErrors(this.config.form,!0);else{var r=this.transaction.begin("PROCESSING");r&&(this.pipRest.lockServerUrl||(this.pipRest.serverUrl=this.config.data.serverUrl),this.pipRest.getResource("signup").call({serverUrl:this.config.data.serverUrl,name:this.config.data.name,login:this.config.useEmailAsLogin?this.config.data.email:this.config.data.login,email:this.config.data.email,password:this.config.data.password,language:this.pipTranslate.language||"en",theme:"default",time_zone:null},function(t){i.pipFormErrors.resetFormErrors(i.config.form,!1),i.transaction.aborted(r)||(i.pipEntry.openSession(t),i.transaction.end(),i.pipEntryData.saveSettingsKey(i.pipEntry.getUserId(t),i.regestryVerifyEmailKey,!1),i.config.isPostSignup?e?e(t):i.pipAuthState.go("post_signup",{party_id:i.pipEntry.getUserId(t)}):i.pipRest.getResource("email_settings").get({user_id:t.user.id},function(e){e&&e.verified&&e.email==t.user.login?i.pipAuthState.goToAuthorized({}):i.pipAuthState.go("verify_email",{email:t.user.login||t.user.email,serverUrl:i.pipRest.serverUrl}),i.transaction.end()},function(e){i.pipFormErrors.resetFormErrors(i.config.form,!0),i.pipFormErrors.setFormError(i.config.form,e,{WRONG_LOGIN:"signupLogin",NO_LOGIN:"signupLogin",ALREADY_EXIST:"signupLogin",WRONG_PASSWORD:"password",NO_EMAIL:"userEmail",NO_NAME:"signupFullName",act_execute:"form","-1":"form"}),i.transaction.end(e)}))},function(e){i.pipFormErrors.resetFormErrors(i.config.form,!0),i.pipFormErrors.setFormError(i.config.form,e,{WRONG_LOGIN:"signupLogin",NO_LOGIN:"signupLogin",ALREADY_EXIST:"signupLogin",WRONG_PASSWORD:"password",NO_EMAIL:"userEmail",NO_NAME:"signupFullName",act_execute:"form","-1":"form"}),i.transaction.end(e)}))}},a);function a(e,t,i,r,o,n,s,a,p,c,l,d){var g=u.call(this,e)||this;return g.$rootScope=i,g.$location=r,g.$state=o,g.$injector=n,g.pipAuthState=s,g.pipFormErrors=a,g.pipRest=p,g.pipEntry=c,g.pipEntryData=l,g.pipTranslate=d,g.regestryVerifyEmailKey="verified_email",g.transaction=t.create("entry.signup"),g}i.SingupModel=s},{"../common/EntryModel":10}],62:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r={bindings:{gotoPostSignup:"=pipPostSignup",gotoSigninPage:"=pipGotoSigninPage",gotoSigninDialog:"=pipGotoSigninDialog"},controller:(o.$inject=["$scope","pipMedia","pipFormErrors","pipEntryData","pipRest","pipSignupViewModel"],o.prototype.$postLink=function(){this.config.form=this.$scope.form},Object.defineProperty(o.prototype,"config",{get:function(){return this.pipSignupViewModel.config},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"transaction",{get:function(){return this.pipSignupViewModel.transaction},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"showServerError",{get:function(){return this.pipSignupViewModel.showServerError},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"hideObject",{get:function(){return this.pipSignupViewModel.hideObject},enumerable:!0,configurable:!0}),o.prototype.gotoSignin=function(){this.pipSignupViewModel.gotoSignin(this.gotoSigninPage,this.gotoSigninDialog)},o.prototype.onSignup=function(){this.pipSignupViewModel.onSignup(this.gotoPostSignup)},o.prototype.onEnter=function(e){13===e.keyCode&&this.onSignup()},o.prototype.onChangeEmail=function(i){var r=this;this.config.data.email&&(this.isQuery||(this.error=null,this.isQuery=!0,this.pipEntryData.signupValidate(this.config.data.email,function(e){r.config.form&&r.config.form[i]&&r.config.form[i].$setValidity("emailUnique",!0),r.isQuery=!1},function(e){if(e&&400==e.status&&e.data&&"LOGIN_ALREADY_USED"==e.data.code)r.config.form&&r.config.form[i]&&r.config.form[i].$setValidity("emailUnique",!1);else{var t=e.code||(e.data||{}).code||null;!t&&e.status&&(t=e.status),"-1"==t?r.error="ERROR_"+t:e.data&&e.data.message?r.error=e.data.message:e.message?r.error=e.message:e.name?r.error=e.name:r.error=e}r.isQuery=!1})))},o.prototype.onServerUrlChanged=function(){this.error=null,this.config.onServerUrlChanged(this.config.form,this.config.selected.searchURLs)},o.prototype.onChanged=function(){this.pipFormErrors.resetFormErrors(this.config.form,!1),this.pipFormErrors.resetFieldsErrors(this.config.form,null),this.pipRest.serverUrl=this.config.selected.searchURLs,this.config.data.serverUrl=this.config.selected.searchURLs},o.prototype.isError=function(e){return e.required||e.email||e.emailUnique||e.ERROR_WRONG_LOGIN||e.ERROR_NO_LOGIN},o),templateUrl:"signup/SignupPanel.html"};function o(e,t,i,r,o,n){this.$scope=e,this.pipMedia=t,this.pipFormErrors=i,this.pipEntryData=r,this.pipRest=o,this.pipSignupViewModel=n,this.isQuery=!1,this.pipSignupViewModel.initModel(this.$scope),this.touchedErrorsWithHint=i.touchedErrorsWithHint}angular.module("pipSignupPanel",["pipFocused","pipEntry.Strings"]).component("pipSignupPanel",r)},{}],63:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var g=e("./SignupModel"),r=(o.$inject=["pipEntryCommon","pipTransaction","$rootScope","$location","$state","$injector","pipAuthState","pipFormErrors","pipRest","pipEntry","pipEntryData","pipTranslate"],Object.defineProperty(o.prototype,"transaction",{get:function(){return this.model.transaction},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"hideObject",{get:function(){return this.model.hideObject},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"showServerError",{get:function(){return this.model.showServerError},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"config",{get:function(){return this.model.config},enumerable:!0,configurable:!0}),o.prototype.initModel=function(e){this.model.init(e)},o.prototype.gotoSignin=function(e,t){this.model.gotoSignin(e,t)},o.prototype.onSignup=function(e){this.model.onSignup(e)},o);function o(e,t,i,r,o,n,s,a,p,c,l,d){this.model=new g.SingupModel(e,t,i,r,o,n,s,a,p,c,l,d)}i.SignupViewModel=r,angular.module("pipEntry.Signup").service("pipSignupViewModel",r)},{"./SignupModel":61}],64:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=(o.$inject=["$scope","$window","pipFormErrors","pipVerifyEmailViewModel","pipIdentity","$timeout"],o.prototype.goBack=function(){this.pipVerifyEmailViewModel.onCancel()},Object.defineProperty(o.prototype,"config",{get:function(){return this.pipVerifyEmailViewModel.config},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"transaction",{get:function(){return this.pipVerifyEmailViewModel.transaction},enumerable:!0,configurable:!0}),o.prototype.onVerify=function(){this.pipVerifyEmailViewModel.onVerify()},o.prototype.onRecover=function(){this.pipVerifyEmailViewModel.onRecover()},o);function o(e,t,i,r,o,n){var s=this;this.$scope=e,this.$window=t,this.pipFormErrors=i,this.pipVerifyEmailViewModel=r,this.pipIdentity=o,this.$timeout=n,r.initModel(this.$scope),this.touchedErrorsWithHint=i.touchedErrorsWithHint,n(function(){s.config.form=s.$scope.form,s.config.data.code&&s.config.data.email?(s.showValidateProgress=!0,s.pipVerifyEmailViewModel.onVerify(function(e){s.pipVerifyEmailViewModel.onContinue()},function(e){s.showValidateProgress=!1})):s.showValidateProgress=!1},0)}i.VerifyEmailController=r;var n=(s.prototype.onContinue=function(){this.pipVerifyEmailViewModel.onContinue()},s);function s(e,t){(this.pipVerifyEmailViewModel=t).initModel(e)}i.VerifyEmailSuccessController=n,angular.module("pipEntry.VerifyEmail",[])},{}],65:[function(e,t,i){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var u,n=e("../common/EntryModel"),s=(u=n.EntryModel,o(a,u),a.$inject=["pipEntryCommon","pipTransaction","$rootScope","$location","$state","$injector","pipAuthState","pipFormErrors","pipRest","pipEntryData","pipIdentity","pipEntry"],a.prototype.init=function(e){this.initModel(e),this.setElementVisability(),this.pipEntryCommon.configureAppBar()},a.prototype.setElementVisability=function(){this.hideObject.remember=1==new Boolean(this.hideObject.remember),this.hideObject.title=1==new Boolean(this.hideObject.title),this.hideObject.server=1==new Boolean(this.hideObject.server),this.hideObject.forgotPassword=1==new Boolean(this.hideObject.forgotPassword),this.hideObject.signup=1==new Boolean(this.hideObject.signup),this.hideObject.hint=1==new Boolean(this.hideObject.hint),this.hideObject.progress=1==new Boolean(this.hideObject.progress)},a.prototype.onVerify=function(i,t){var r=this;if(this.config.form.$invalid)this.pipFormErrors.resetFormErrors(this.config.form,!0);else{var o=this.transaction.begin("PROCESSING");o&&(this.pipRest.lockServerUrl||(this.pipRest.serverUrl=this.config.data.serverUrl),this.pipEntryData.verifyEmail({login:this.config.data.login,email:this.config.data.email||this.config.data.login,code:this.config.data.code},function(e){if(r.pipFormErrors.resetFormErrors(r.config.form,!1),!r.transaction.aborted(o)){var t=r.pipEntryData.getUserId();i&&i(e),r.transaction.end(),r.pipEntryData.saveSettingsKey(t,r.regestryVerifyEmailKey,!0,function(e){var t=r.pipIdentity.identity;t&&t.user&&(t.user.settings||(t.user.settings={}),t.user.settings[r.regestryVerifyEmailKey]="true",r.pipIdentity.identity=t),r.onContinue()},function(e){r.transaction.end(e)})}},function(e){r.transaction.end(e),r.pipFormErrors.resetFormErrors(r.config.form,!0),r.pipFormErrors.setFormError(r.config.form,e,{WRONG_LOGIN_EMAIL:"login",NO_LOGIN_EMAIL:"login",NO_EMAIL:"login",INVALID_CODE:"code",act_execute:"form","-1":"form"}),t&&t(e)}))}},a.prototype.onRecover=function(){var t=this;if(this.config.data.login){var i=this.transaction.begin("PROCESSING");i&&this.pipEntryData.requestEmailVerification({login:this.config.data.login},function(e){t.transaction.aborted(i)||(t.config.data.code=null,t.transaction.end())},function(e){t.transaction.end(e)})}},a.prototype.onContinue=function(){this.pipAuthState.params.redirect_to?this.$location.url(this.pipAuthState.params.redirect_to):this.pipAuthState.goToAuthorized(this.config&&this.config.data?this.config.data:{})},a.prototype.onCancel=function(){this.pipEntry.signout(),this.pipAuthState.goToUnauthorized({})},a);function a(e,t,i,r,o,n,s,a,p,c,l,d){var g=u.call(this,e)||this;return g.$rootScope=i,g.$location=r,g.$state=o,g.$injector=n,g.pipAuthState=s,g.pipFormErrors=a,g.pipRest=p,g.pipEntryData=c,g.pipIdentity=l,g.pipEntry=d,g.regestryVerifyEmailKey="verified_email",g.transaction=t.create("entry.verify_email"),g}i.VerifyEmailModel=s},{"../common/EntryModel":10}],66:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var g=e("./VerifyEmailModel"),r=(o.$inject=["pipEntryCommon","pipTransaction","$rootScope","$location","$state","$injector","pipAuthState","pipFormErrors","pipRest","pipEntryData","pipIdentity","pipEntry"],Object.defineProperty(o.prototype,"transaction",{get:function(){return this.model.transaction},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"hideObject",{get:function(){return this.model.hideObject},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"showServerError",{get:function(){return this.model.showServerError},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"config",{get:function(){return this.model.config},enumerable:!0,configurable:!0}),o.prototype.initModel=function(e){this.model.init(e)},o.prototype.onVerify=function(e,t){this.model.onVerify(e,t)},o.prototype.onRecover=function(){this.model.onRecover()},o.prototype.onContinue=function(){this.model.onContinue()},o.prototype.onCancel=function(){this.model.onCancel()},o);function o(e,t,i,r,o,n,s,a,p,c,l,d){this.model=new g.VerifyEmailModel(e,t,i,r,o,n,s,a,p,c,l,d)}i.VerifyEmailViewModel=r,angular.module("pipEntry.VerifyEmail").service("pipVerifyEmailViewModel",r)},{"./VerifyEmailModel":65}],67:[function(e,t,i){!function(t){try{t=angular.module("pipEntry.Templates")}catch(e){t=angular.module("pipEntry.Templates",[])}t.run(["$templateCache",function(e){e.put("change_password/ChangePassword.html",'<div class="pip-card-container pip-outer-scroll pip-entry"><pip-card width="400"><pip-change-password-panel class="scroll-y"></pip-change-password-panel><div class="pip-footer"><md-button ng-hide="$ctrl.transaction.busy()" ng-click="$ctrl.goBack()" class="rm8" aria-label="CANCEL">{{ ::\'CANCEL\' | translate }}</md-button><md-button ng-hide="$ctrl.transaction.busy()" ng-click="$ctrl.onChange()" aria-label="ENTRY_CHANGE_PASSWORD" ng-disabled="($ctrl.config.form.$pristine && !$ctrl.config.data.login) || $ctrl.config.data.serverUrl.length == 0 || $ctrl.config.data.login.length == 0 || $ctrl.config.data.code.length == 0 || $ctrl.config.data.password.length < 6" class="md-accent" type="submit">{{ ::\'ENTRY_CHANGE_PASSWORD\' | translate }}</md-button><md-button class="md-warn" ng-show="$ctrl.transaction.busy()" ng-click="$ctrl.transaction.abort()" aria-label="ABORT">{{ ::\'CANCEL\' | translate }}</md-button></div></pip-card></div>')}])}(),function(t){try{t=angular.module("pipEntry.Templates")}catch(e){t=angular.module("pipEntry.Templates",[])}t.run(["$templateCache",function(e){e.put("change_password/ChangePasswordDialog.html",'<md-dialog class="pip-entry lp0 rp0"><md-dialog-content><pip-change-password-panel></pip-change-password-panel></md-dialog-content><md-dialog-actions class="layout-row layout-align-end-center"><md-button ng-hide="$ctrl.transaction.busy()" ng-click="$ctrl.goBack()" class="rm8" aria-label="CANCEL">{{ ::\'CANCEL\' | translate }}</md-button><md-button ng-hide="$ctrl.transaction.busy()" ng-click="$ctrl.onChange()" aria-label="ENTRY_CHANGE_PASSWORD" ng-disabled="($ctrl.config.form.$pristine && !$ctrl.config.data.login) || $ctrl.config.data.serverUrl.length == 0 || $ctrl.config.data.login.length == 0 || $ctrl.config.data.code.length == 0 || $ctrl.config.data.password.length < 6" class="md-accent" type="submit">{{ ::\'ENTRY_CHANGE_PASSWORD\' | translate }}</md-button><md-button class="md-warn" ng-show="$ctrl.transaction.busy()" ng-click="$ctrl.transaction.abort()" aria-label="ABORT">{{ ::\'CANCEL\' | translate }}</md-button></md-dialog-actions></md-dialog>')}])}(),function(t){try{t=angular.module("pipEntry.Templates")}catch(e){t=angular.module("pipEntry.Templates",[])}t.run(["$templateCache",function(e){e.put("change_password/ChangePasswordPanel.html",'<div class="pip-body"><div class="pip-content"><md-progress-linear ng-show="$ctrl.transaction.busy() && $ctrl.showServerError && !$ctrl.hideObject.progress" md-mode="indeterminate" class="pip-progress-top"></md-progress-linear><h2 ng-if="!$ctrl.hideObject.changePwdTitle">{{::\'CHANGE_PWD_PASSWORD\' | translate}}</h2><p class="title-padding bm16" ng-if="!$ctrl.hideObject.changePwdSubTitle">{{::\'CHANGE_PWD_TEXT\' | translate}}</p><form name="form" novalidate="" autocomplete="off"><input name="password" style="display:none"> <input name="passwordNew" style="display:none"><div ng-messages="$ctrl.config.form.$serverError" class="text-error bm8 color-error" md-auto-hide="false"><div ng-message="ERROR_act_execute">{{ ::\'ERROR_ACT_EXECUTE\' | translate }}</div><div ng-message="ERROR_-1">{{ ::\'ERROR_SERVER\' | translate }}</div><div ng-message="ERROR_UNKNOWN">{{ \'ERROR_UNKNOWN\' | translate }}</div></div><div ng-show="$ctrl.config.showServerUrl && !$ctrl.hideObject.server" class="bp8"><md-autocomplete ng-initial="" autofocus="" tabindex="1" class="pip-combobox w-stretch bm8" name="server" ng-enabled="!$ctrl.transaction.busy()" placeholder="{{::\'ENTRY_SERVER_URL\' | translate}}" md-no-cache="true" md-selected-item="$ctrl.config.data.serverUrl" md-search-text="$ctrl.config.selected.searchURLs" md-items="item in $ctrl.config.getMatches($ctrl.config.selected.searchURLs)" md-item-text="item" md-selected-item-change="$ctrl.onServerUrlChanged()" md-search-text-change="$ctrl.onChanged()" md-delay="200" ng-model="$ctrl.config.data.serverUrl" pip-clear-errors=""><span md-highlight-text="$ctrl.config.selected.searchURLs">{{ item }}</span></md-autocomplete></div><md-input-container class="pip-no-hint" style="padding-bottom: 4px!important;"><label>{{::\'OLD_PASSWORD\' | translate}}</label> <input name="password" ng-disabled="$ctrl.transaction.busy()" xxxpip-clear-errors="" type="password" tabindex="4" ng-model="$ctrl.config.data.password" required="" minlength="6" ng-change="$ctrl.onChangePassword()" pip-compare-old-password="" compare-to="$ctrl.config.data.passwordNew"><div class="hint" ng-if="$ctrl.touchedErrorsWithHint($ctrl.config.form, $ctrl.config.form.password, true).hint && !$ctrl.hideObject.hint">{{::\'HINT_PASSWORD\' | translate}}</div><div ng-messages="$ctrl.touchedErrorsWithHint($ctrl.config.form, $ctrl.config.form.password, true)" class="md-input-error" md-auto-hide="false"><div ng-message="required">{{::\'MINLENGTH_PASSWORD\' | translate}}</div><div ng-message="minlength">{{::\'MINLENGTH_PASSWORD\' | translate}}</div><div ng-message="ERROR_WRONG_PASSWORD">{{::\'ERROR_WRONG_PASSWORD\' | translate}}</div><div ng-message="ERROR_compareTo">{{::\'PASSWORD_IDENTICAL\' | translate}}</div></div></md-input-container><md-input-container class="display bp4"><label>{{::\'NEW_PASSWORD_SET\' | translate}}</label> <input name="passwordNew" ng-disabled="$ctrl.transaction.busy()" xxxpip-clear-errors="" type="password" tabindex="4" ng-model="$ctrl.config.data.passwordNew" ng-change="$ctrl.onChangePasswordNew()" required="" minlength="6" ng-keypress="$ctrl.onEnter($event)" pip-test="input-password" autocomplete="off" pip-compare-new-password="" compare-to1="$ctrl.config.data.password"><div class="hint" ng-if="$ctrl.touchedErrorsWithHint($ctrl.config.form, $ctrl.config.form.passwordNew, true).hint && !$ctrl.hideObject.hint">{{::\'HINT_PASSWORD\' | translate}}</div><div ng-messages="$ctrl.touchedErrorsWithHint($ctrl.config.form, $ctrl.config.form.passwordNew, true)" md-auto-hide="false"><div ng-message="required">{{::\'HINT_PASSWORD\' | translate}}</div><div ng-message="minlength">{{::\'HINT_PASSWORD\' | translate}}</div><div ng-message="ERROR_compareTo">{{::\'PASSWORD_IDENTICAL\' | translate}}</div><div ng-message="ERROR_WRONG_PASSWORD" xxxng-if="!$ctrl.config.form.passwordNew.$pristine">{{::\'ERROR_WRONG_PASSWORD\' | translate}}</div></div></md-input-container><md-input-container class="display bp4" ng-if="!$ctrl.hideObject.passwordConfirm"><label>{{::\'NEW_PASSWORD_CONFIRM\' | translate}}</label> <input name="passwordConfirm" type="password" tabindex="4" required="" minlength="6" ng-model="$ctrl.confirmPassword" ng-disabled="$ctrl.transaction.busy()" xxpip-clear-errors="" ng-change="$ctrl.onChangePasswordConfirm()" pip-compare-password-match="" compare-to2="$ctrl.config.data.passwordNew" ng-keypress="$ctrl.onEnter($event)" pip-test="input-password"><div class="hint" ng-if="$ctrl.touchedErrorsWithHint($ctrl.config.form, $ctrl.config.form.passwordConfirm, true).hint && !$ctrl.hideObject.hint">{{::\'HINT_PASSWORD\' | translate}}</div><div ng-messages="$ctrl.touchedErrorsWithHint($ctrl.config.form, $ctrl.config.form.passwordConfirm, true)" md-auto-hide="false"><div ng-message="required">{{::\'HINT_PASSWORD\' | translate}}</div><div ng-message="minlength">{{::\'HINT_PASSWORD\' | translate}}</div><div ng-message="ERROR_compareTo">{{::\'PASSWORD_MATCH\' | translate}}</div></div></md-input-container></form></div></div>')}])}(),function(t){try{t=angular.module("pipEntry.Templates")}catch(e){t=angular.module("pipEntry.Templates",[])}t.run(["$templateCache",function(e){e.put("expire_change_password/ExpireChangePassword.html",'<div class="pip-card-container pip-outer-scroll pip-entry"><pip-card width="400"><pip-expire-change-password-panel class="scroll-y"></pip-expire-change-password-panel><div class="pip-footer"><md-button ng-hide="$ctrl.transaction.busy()" ng-click="$ctrl.goBack()" class="rm8" aria-label="CANCEL">{{ ::\'CANCEL\' | translate }}</md-button><md-button ng-hide="$ctrl.transaction.busy()" ng-click="$ctrl.onChange()" aria-label="ENTRY_EXPIRE_CHANGE_PASSWORD" ng-disabled="($ctrl.config.form.$pristine && !$ctrl.config.data.login) || $ctrl.config.data.serverUrl.length == 0 || $ctrl.config.data.login.length == 0 || $ctrl.config.data.code.length == 0 || $ctrl.config.data.password.length < 6" class="md-accent" type="submit">{{ ::\'ENTRY_EXPIRE_CHANGE_PASSWORD\' | translate }}</md-button><md-button class="md-warn" ng-show="$ctrl.transaction.busy()" ng-click="$ctrl.transaction.abort()" aria-label="ABORT">{{ ::\'CANCEL\' | translate }}</md-button></div></pip-card></div>')}])}(),function(t){try{t=angular.module("pipEntry.Templates")}catch(e){t=angular.module("pipEntry.Templates",[])}t.run(["$templateCache",function(e){e.put("expire_change_password/ExpireChangePasswordDialog.html",'<md-dialog class="pip-entry lp0 rp0"><md-dialog-content><pip-expire-change-password-panel></pip-expire-change-password-panel></md-dialog-content><md-dialog-actions class="layout-row layout-align-end-center"><md-button ng-hide="$ctrl.transaction.busy()" ng-click="$ctrl.goBack()" class="rm8" aria-label="CANCEL">{{ ::\'CANCEL\' | translate }}</md-button><md-button ng-hide="$ctrl.transaction.busy()" ng-click="$ctrl.onChange()" aria-label="ENTRY_EXPIRE_CHANGE_PASSWORD" ng-disabled="($ctrl.config.form.$pristine && !$ctrl.config.data.login) || $ctrl.config.data.serverUrl.length == 0 || $ctrl.config.data.login.length == 0 || $ctrl.config.data.code.length == 0 || $ctrl.config.data.password.length < 6" class="md-accent" type="submit">{{ ::\'ENTRY_EXPIRE_CHANGE_PASSWORD\' | translate }}</md-button><md-button class="md-warn" ng-show="$ctrl.transaction.busy()" ng-click="$ctrl.transaction.abort()" aria-label="ABORT">{{ ::\'CANCEL\' | translate }}</md-button></md-dialog-actions></md-dialog>')}])}(),function(t){try{t=angular.module("pipEntry.Templates")}catch(e){t=angular.module("pipEntry.Templates",[])}t.run(["$templateCache",function(e){e.put("expire_change_password/ExpireChangePasswordPanel.html",'<div class="pip-body"><div class="pip-content"><md-progress-linear ng-show="$ctrl.transaction.busy() && $ctrl.showServerError && !$ctrl.hideObject.progress" md-mode="indeterminate" class="pip-progress-top"></md-progress-linear><h2 ng-if="!$ctrl.hideObject.changePwdTitle">{{::\'EXPIRE_CHANGE_PWD_PASSWORD\' | translate}}</h2><p class="title-padding bm16" ng-if="!$ctrl.hideObject.changePwdSubTitle">{{::\'EXPIRE_CHANGE_PWD_TEXT\' | translate}}</p><form name="form" novalidate="" autocomplete="off"><div ng-messages="$ctrl.config.form.$serverError" class="text-error bm8 color-error" md-auto-hide="false"><div ng-message="ERROR_act_execute">{{::\'ERROR_ACT_EXECUTE\' | translate}}</div><div ng-message="ERROR_-1">{{::\'ERROR_SERVER\' | translate}}</div><div ng-message="ERROR_UNKNOWN">{{ $ctrl.config.form.$serverError.ERROR_UNKNOWN | translate }}</div></div><div class="bp16"><a ng-hide="$ctrl.config.showServerUrl || $ctrl.config.fixedServerUrl || $ctrl.hideObject.server" ng-click="$ctrl.config.showServerUrl = true" href="">{{::\'ENTRY_CHANGE_SERVER\' | translate}}</a></div><div ng-show="$ctrl.config.showServerUrl && !$ctrl.hideObject.server" class="bp8"><md-autocomplete ng-initial="" autofocus="" tabindex="1" class="pip-combobox w-stretch bm8" name="server" ng-enabled="!$ctrl.transaction.busy()" placeholder="{{::\'ENTRY_SERVER_URL\' | translate}}" md-no-cache="true" md-selected-item="$ctrl.config.data.serverUrl" md-search-text="$ctrl.config.selected.searchURLs" md-items="item in $ctrl.config.getMatches($ctrl.config.selected.searchURLs)" md-item-text="item" md-selected-item-change="$ctrl.onServerUrlChanged()" md-search-text-change="$ctrl.onChanged()" md-delay="200" ng-model="$ctrl.config.data.serverUrl" pip-clear-errors=""><span md-highlight-text="$ctrl.config.selected.searchURLs">{{ item }}</span></md-autocomplete></div><md-input-container class="pip-no-hint" style="padding-bottom: 4px!important;"><label>{{::\'OLD_PASSWORD\' | translate}}</label> <input name="password" ng-disabled="$ctrl.transaction.busy()" pip-clear-errors="" type="password" tabindex="4" ng-model="$ctrl.config.data.password" required="" minlength="6"><div class="hint" ng-if="$ctrl.touchedErrorsWithHint($ctrl.config.form, $ctrl.config.form.password).hint && !$ctrl.hideObject.hint">{{::\'HINT_PASSWORD\' | translate}}</div><div ng-messages="$ctrl.touchedErrorsWithHint($ctrl.config.form, $ctrl.config.form.password)" class="md-input-error" md-auto-hide="false"><div ng-message="required">{{::\'MINLENGTH_PASSWORD\' | translate}}</div><div ng-message="minlength">{{::\'MINLENGTH_PASSWORD\' | translate}}</div><div ng-message="ERROR_WRONG_PASSWORD">{{::\'ERROR_WRONG_PASSWORD\' | translate}}</div></div></md-input-container><md-input-container class="display bp4"><label>{{::\'NEW_PASSWORD_SET\' | translate}}</label> <input name="passwordNew" ng-disabled="$ctrl.transaction.busy()" pip-clear-errors="" type="password" tabindex="4" ng-model="$ctrl.config.data.passwordNew" required="" minlength="6" ng-keypress="$ctrl.onEnter($event)" pip-test="input-password"><div class="hint" ng-if="$ctrl.touchedErrorsWithHint($ctrl.config.form, $ctrl.config.form.passwordNew).hint && !$ctrl.hideObject.hint">{{::\'HINT_PASSWORD\' | translate}}</div><div ng-messages="$ctrl.touchedErrorsWithHint($ctrl.config.form, $ctrl.config.form.passwordNew)" md-auto-hide="false"><div ng-message="required">{{::\'HINT_PASSWORD\' | translate}}</div><div ng-message="minlength">{{::\'HINT_PASSWORD\' | translate}}</div><div ng-message="ERROR_WRONG_PASSWORD" xxxng-if="!$ctrl.config.form.passwordNew.$pristine">{{::\'ERROR_WRONG_PASSWORD\' | translate}}</div></div></md-input-container><md-input-container class="display bp4" ng-if="!$ctrl.hideObject.passwordConfirm"><label>{{::\'NEW_PASSWORD_CONFIRM\' | translate}}</label> <input name="passwordConfirm" type="password" tabindex="4" required="" minlength="6" ng-model="$ctrl.confirmPassword" ng-disabled="$ctrl.transaction.busy()" pip-clear-errors="" pip-compare-password-match="" compare-to2="$ctrl.config.data.passwordNew" ng-keypress="$ctrl.onEnter($event)" pip-test="input-password"><div class="hint" ng-if="$ctrl.touchedErrorsWithHint($ctrl.config.form, $ctrl.config.form.passwordConfirm, true).hint && !$ctrl.hideObject.hint">{{::\'HINT_PASSWORD\' | translate}}</div><div ng-messages="$ctrl.touchedErrorsWithHint($ctrl.config.form, $ctrl.config.form.passwordConfirm, true)" md-auto-hide="false"><div ng-message="ERROR_compareTo">{{::\'PASSWORD_MATCH\' | translate}}</div><div ng-message="required">{{::\'HINT_PASSWORD\' | translate}}</div><div ng-message="minlength">{{::\'HINT_PASSWORD\' | translate}}</div></div></md-input-container></form></div></div>')}])}(),function(t){try{t=angular.module("pipEntry.Templates")}catch(e){t=angular.module("pipEntry.Templates",[])}t.run(["$templateCache",function(e){e.put("post_signup/PostSignup.html",'<div class="pip-card-container pip-outer-scroll pip-entry"><pip-card width="400"><pip-post-signup-panel pip-party="$ctrl.$party"></pip-post-signup-panel><div class="pip-footer"><md-button ng-hide="$ctrl.transaction.busy()" class="md-accent" type="submit" ng-click="$ctrl.onPostSignupSubmit()" aria-label="CONTINUE">{{ ::\'CONTINUE\' | translate }}</md-button><md-button ng-show="$ctrl.transaction.busy()" class="md-warn" ng-click="$ctrl.transaction.abort()" aria-label="ABORT">{{ ::\'CANCEL\' | translate }}</md-button></div></pip-card></div>')}])}(),function(t){try{t=angular.module("pipEntry.Templates")}catch(e){t=angular.module("pipEntry.Templates",[])}t.run(["$templateCache",function(e){e.put("post_signup/PostSignupDialog.html",'<md-dialog class="pip-entry lp0 rp0"><md-dialog-content><pip-post-signup-panel pip-party="$ctrl.$party"></pip-post-signup-panel></md-dialog-content><md-dialog-actions class="layout-row layout-align-end-center"><md-button ng-hide="$ctrl.transaction.busy()" class="md-accent" ng-click="$ctrl.onPostSignupSubmit()" aria-label="CONTINUE">{{ ::\'CONTINUE\' | translate }}</md-button><md-button ng-show="$ctrl.transaction.busy()" class="md-warn" ng-click="$ctrl.transaction.abort()" aria-label="ABORT">{{ ::\'CANCEL\' | translate }}</md-button></md-dialog-actions></md-dialog>')}])}(),function(t){try{t=angular.module("pipEntry.Templates")}catch(e){t=angular.module("pipEntry.Templates",[])}t.run(["$templateCache",function(e){e.put("post_signup/PostSignupPanel.html",'<div class="pip-body"><div class="pip-content"><md-progress-linear ng-show="$ctrl.transaction.busy() && !$ctrl.hideObject.progress" md-mode="indeterminate" class="pip-progress-top"></md-progress-linear><h2 class="text-overflow" ng-if="!$ctrl.hideObject.title">{{ \'POST_SIGNUP_TITLE\' | translate }}</h2><p class="bm0 line-height-string" ng-if="!$ctrl.hideObject.successTitle">{{ \'POST_SIGNUP_TEXT_1\' | translate }}</p><p class="line-height-string m0" ng-if="!$ctrl.hideObject.subTitle">{{ \'POST_SIGNUP_TEXT_2\' | translate }}</p><form name="form" novalidate=""><div ng-messages="$ctrl.config.form.$serverError" class="text-error bm8" md-auto-hide="false"><div ng-message="ERROR_1000">{{::\'ERROR_1000\' | translate}}</div><div ng-message="ERROR_1110">{{::\'ERROR_1110\' | translate}}</div><div ng-message="ERROR_1111">{{::\'ERROR_1111\' | translate}}</div><div ng-message="ERROR_1112">{{::\'ERROR_1112\' | translate}}</div><div ng-message="ERROR_1002">{{::\'ERROR_1002\' | translate}}</div><div ng-message="ERROR_-1">{{::\'ERROR_SERVER\' | translate}}</div><div ng-message="ERROR_UNKNOWN">{{ $ctrl.config.form.$serverError.ERROR_UNKNOWN | translate }}</div></div><div class="pip-ref-item"><pip-avatar-edit ng-disabled="$ctrl.transaction.busy()" ng-if="$ctrl.config.enableAvatar" pip-reset="false" pip-party-id="$ctrl.config.data.id" pip-created="$ctrl.onPictureCreated($event)" pip-changed="$ctrl.onPictureChanged($control, $event)" class="rm16 flex-fixed"></pip-avatar-edit><div class="pip-content"><p class="pip-title">{{ $ctrl.config.data.name }}</p><p class="pip-subtitle">{{ $ctrl.config.data.email }}</p></div></div><md-input-container class="pip-no-hint bp4"><label>{{ \'HINT_ABOUT\' | translate }}</label> <textarea ng-model="$ctrl.config.data.about" ng-initial="" ng-disabled="$ctrl.transaction.busy()" pip-clear-errors="">\n                        </textarea></md-input-container><div class="tm2"><p class="text-caption bm0">{{ \'GENDER\' | translate }}</p><md-select class="w-stretch tm0 tp0 bp8" ng-disabled="$ctrl.transaction.busy()" ng-model="$ctrl.config.data.gender" label="{{\'GENDER\' | translate}}" ng-change="$ctrl.onStatusChange($ctrl.config.data)" pip-clear-errors=""><md-option ng-value="opt.id" ng-repeat="opt in $ctrl.genders track by opt.id">{{ opt.name }}</md-option></md-select></div><div class="tm2"><p class="text-caption bm0">{{ ::\'BIRTHDAY\' | translate }}</p><pip-date ng-disabled="$ctrl.transaction.busy()" ng-model="$ctrl.config.data.birthday" pip-time-mode="past" pip-clear-errors="" time-mode="past"></pip-date></div><md-input-container><label>{{ ::\'LANGUAGE\' | translate }}</label><md-select class="w-stretch tm0 tp0 bp16" ng-disabled="$ctrl.transaction.busy()" ng-model="$ctrl.config.data.language" ng-change="$ctrl.onStatusChange($ctrl.config.data)" pip-clear-errors=""><md-option ng-value="opt.id" ng-repeat="opt in $ctrl.languages track by opt.id">{{ opt.name }}</md-option></md-select></md-input-container></form></div></div>')}])}(),function(t){try{t=angular.module("pipEntry.Templates")}catch(e){t=angular.module("pipEntry.Templates",[])}t.run(["$templateCache",function(e){e.put("reset_password/ResetPassword.html",'<div class="pip-card-container pip-outer-scroll pip-entry"><pip-card width="400"><pip-reset-password-panel class="scroll-y"></pip-reset-password-panel><div class="pip-footer"><md-button ng-hide="$ctrl.transaction.busy()" ng-click="$ctrl.goBack()" class="rm8" aria-label="CANCEL">{{ ::\'CANCEL\' | translate }}</md-button><md-button ng-hide="$ctrl.transaction.busy()" ng-click="$ctrl.onReset()" aria-label="ENTRY_RESET_PASSWORD" ng-disabled="($ctrl.config.form.$pristine && !$ctrl.config.data.login) || $ctrl.config.data.serverUrl.length == 0 || $ctrl.config.data.login.length == 0 || $ctrl.config.data.resetCode.length == 0 || $ctrl.config.data.password.length < 6" class="md-accent" type="submit">{{ ::\'ENTRY_RESET_PASSWORD\' | translate }}</md-button><md-button class="md-warn" ng-show="$ctrl.transaction.busy()" ng-click="$ctrl.transaction.abort()" aria-label="ABORT">{{ ::\'CANCEL\' | translate }}</md-button></div></pip-card></div>')}])}(),function(t){try{t=angular.module("pipEntry.Templates")}catch(e){t=angular.module("pipEntry.Templates",[])}t.run(["$templateCache",function(e){e.put("reset_password/ResetPasswordDialog.html",'<md-dialog class="pip-entry lp0 rp0"><md-dialog-content><pip-reset-password-panel></pip-reset-password-panel></md-dialog-content><md-dialog-actions class="layout-row layout-align-end-center"><md-button ng-hide="$ctrl.transaction.busy()" ng-click="$ctrl.onCancel()" class="rm8" aria-label="CANCEL">{{ ::\'CANCEL\' | translate }}</md-button><md-button ng-hide="$ctrl.transaction.busy()" ng-click="$ctrl.onReset()" aria-label="ENTRY_RESET_PASSWORD" ng-disabled="($ctrl.config.form.$pristine && !$ctrl.config.data.login) || $ctrl.config.data.serverUrl.length == 0 || $ctrl.config.data.login.length == 0 || $ctrl.config.data.resetCode.length == 0 || $ctrl.config.data.password.length < 6" class="md-accent" type="submit">{{ ::\'ENTRY_RESET_PASSWORD\' | translate }}</md-button><md-button class="md-warn" ng-show="$ctrl.transaction.busy()" ng-click="$ctrl.transaction.abort()" aria-label="ABORT">{{ ::\'CANCEL\' | translate }}</md-button></md-dialog-actions></md-dialog>')}])}(),function(t){try{t=angular.module("pipEntry.Templates")}catch(e){t=angular.module("pipEntry.Templates",[])}t.run(["$templateCache",function(e){e.put("reset_password/ResetPasswordPanel.html",'<div class="pip-body"><div class="pip-content"><md-progress-linear ng-show="$ctrl.transaction.busy() && $ctrl.showServerError && !$ctrl.hideObject.progress" md-mode="indeterminate" class="pip-progress-top"></md-progress-linear><h2 ng-if="!$ctrl.hideObject.title">{{::\'RESET_PWD_PASSWORD\' | translate}}</h2><p class="title-padding bm16" ng-if="!$ctrl.hideObject.resetSubTitle && !$ctrl.config.useEmailAsLogin">{{::\'RESET_PWD_TEXT_LOGIN\' | translate}}</p><p class="title-padding bm16" ng-if="!$ctrl.hideObject.resetSubTitle && $ctrl.config.useEmailAsLogin">{{::\'RESET_PWD_TEXT_EMAIL\' | translate}}</p><form name="form" novalidate="" autocomplete="off"><input name="code" style="display:none"> <input name="resetCode" style="display:none"> <input name="password" style="display:none"><div ng-messages="$ctrl.config.form.$serverError" class="text-error bm8 color-error" md-auto-hide="false"><div ng-message="ERROR_act_execute">{{::\'ERROR_ACT_EXECUTE\' | translate}}</div><div ng-message="ERROR_-1">{{::\'ERROR_SERVER\' | translate}}</div><div ng-message="ERROR_UNKNOWN">{{ $ctrl.config.form.$serverError.ERROR_UNKNOWN | translate }}</div></div><div class="bp16"><a ng-hide="$ctrl.config.showServerUrl || $ctrl.config.fixedServerUrl || $ctrl.hideObject.server" ng-click="$ctrl.config.showServerUrl = true" href="">{{::\'ENTRY_CHANGE_SERVER\' | translate}}</a></div><div ng-show="$ctrl.config.showServerUrl && !$ctrl.hideObject.server" class="bp8"><md-autocomplete ng-initial="" autofocus="" tabindex="1" class="pip-combobox w-stretch bm8" name="server" aria-label="URL" ng-enabled="!$ctrl.transaction.busy()" placeholder="{{::\'ENTRY_SERVER_URL\' | translate}}" md-no-cache="true" md-selected-item="$ctrl.config.data.serverUrl" md-search-text="$ctrl.config.selected.searchURLs" md-items="item in $ctrl.config.getMatches($ctrl.config.selected.searchURLs)" md-item-text="item" md-selected-item-change="$ctrl.onServerUrlChanged()" md-search-text-change="$ctrl.onChanged()" md-delay="200" ng-model="$ctrl.config.data.serverUrl" pip-clear-errors=""><span md-highlight-text="$ctrl.config.selected.searchURLs">{{ item }}</span></md-autocomplete></div><md-input-container class="pip-no-hint" style="padding-bottom: 4px!important;"><label ng-if="!$ctrl.config.useEmailAsLogin">{{::\'LOGIN\' | translate}}</label> <label ng-if="$ctrl.config.useEmailAsLogin">{{::\'EMAIL\' | translate}}</label> <input name="login" type="login" ng-model="$ctrl.config.data.login" required="" step="any" aria-label="LOGIN" pip-clear-errors="" ng-disabled="$ctrl.transaction.busy()" tabindex="2"><div class="hint" ng-if="$ctrl.touchedErrorsWithHint($ctrl.config.form, $ctrl.config.form.login).hint && !$ctrl.hideObject.hint && !$ctrl.config.useEmailAsLogin">{{::\'HINT_LOGIN\' | translate}}</div><div class="hint" ng-if="$ctrl.touchedErrorsWithHint($ctrl.config.form, $ctrl.config.form.login).hint && !$ctrl.hideObject.hint && $ctrl.config.useEmailAsLogin">{{::\'HINT_EMAIL\' | translate}}</div><div ng-messages="$ctrl.touchedErrorsWithHint($ctrl.config.form, $ctrl.config.form.login)" class="md-input-error" md-auto-hide="false"><div ng-message="required">{{::\'ERROR_LOGIN_INVALID\' | translate }}</div><div ng-message="ERROR_NO_LOGIN">{{::\'ERROR_NO_LOGIN\' | translate}}</div><div ng-message="ERROR_WRONG_LOGIN">{{::\'ERROR_WRONG_LOGIN\' | translate}}</div><div ng-message="ERROR_LOGIN_NOT_FOUND">{{::\'ERROR_LOGIN_NOT_FOUND\' | translate}}</div></div></md-input-container><md-input-container class="pip-no-hint"><label>{{::\'ENTRY_RESET_CODE\' | translate}}</label> <input name="resetCode" ng-disabled="$ctrl.transaction.busy()" autocomplete="off" aria-label="CODE" ng-model="$ctrl.config.data.resetCode" required="" tabindex="3" pip-clear-errors=""><div class="hint" ng-if="$ctrl.touchedErrorsWithHint($ctrl.config.form, $ctrl.config.form.resetCode).hint && !$ctrl.hideObject.hint">{{::\'ENTRY_RESET_CODE\' | translate}}</div><div ng-messages="$ctrl.touchedErrorsWithHint($ctrl.config.form, $ctrl.config.form.resetCode)" class="md-input-error" md-auto-hide="false"><div ng-message="required">{{::\'ERROR_CODE_WRONG\' | translate }}</div><div ng-message="ERROR_WRONG_CODE">{{::\'ERROR_WRONG_CODE\' | translate}}</div></div></md-input-container><md-input-container class="pip-no-hint" style="padding-bottom: 4px!important;"><label>{{::\'NEW_PASSWORD_SET\' | translate}}</label> <input name="passwordNew" ng-disabled="$ctrl.transaction.busy()" pip-clear-errors="" autocomplete="off" type="password" tabindex="4" ng-model="$ctrl.config.data.password" required="" minlength="6" aria-label="password"><div class="hint" ng-if="$ctrl.touchedErrorsWithHint($ctrl.config.form, $ctrl.config.form.passwordNew).hint && !$ctrl.hideObject.hint">{{::\'HINT_PASSWORD\' | translate}}</div><div ng-messages="$ctrl.touchedErrorsWithHint($ctrl.config.form, $ctrl.config.form.passwordNew)" class="md-input-error" md-auto-hide="false"><div ng-message="required">{{::\'MINLENGTH_PASSWORD\' | translate}}</div><div ng-message="minlength">{{::\'MINLENGTH_PASSWORD\' | translate}}</div><div ng-message="ERROR_WRONG_PASSWORD">{{::\'ERROR_WRONG_PASSWORD\' | translate}}</div></div></md-input-container></form></div></div>')}])}(),function(t){try{t=angular.module("pipEntry.Templates")}catch(e){t=angular.module("pipEntry.Templates",[])}t.run(["$templateCache",function(e){e.put("recover_password/RecoverPassword.html",'<div class="pip-card-container pip-outer-scroll pip-entry"><pip-card width="400"><pip-recover-password-panel class="scroll-y"></pip-recover-password-panel><div class="pip-footer"><md-button ng-hide="$ctrl.transaction.busy()" ng-click="$ctrl.goBack()" class="rm8" aria-label="CANCEL">{{ ::\'CANCEL\' | translate }}</md-button><md-button ng-hide="$ctrl.transaction.busy()" class="md-accent" ng-click="$ctrl.onRecover()" aria-label="RECOVER_PWD_RECOVER" type="submit" ng-disabled="($ctrl.config.form.$pristine && !$ctrl.config.data.login) || $ctrl.config.data.serverUrl.length == 0 || $ctrl.config.data.login.length == 0">{{ ::\'RECOVER_PWD_RECOVER\' | translate }}</md-button><md-button ng-show="$ctrl.transaction.busy()" class="md-warn" ng-click="$ctrl.transaction.abort()" aria-label="ABORT">{{ ::\'CANCEL\' | translate }}</md-button></div></pip-card></div>')}])}(),function(t){try{t=angular.module("pipEntry.Templates")}catch(e){t=angular.module("pipEntry.Templates",[])}t.run(["$templateCache",function(e){e.put("recover_password/RecoverPasswordDialog.html",'<md-dialog class="pip-entry lp0 rp0"><md-dialog-content><pip-recover-password-panel></pip-recover-password-panel></md-dialog-content><md-dialog-actions class="layout-row layout-align-end-center"><md-button ng-hide="$ctlr.transaction.busy()" ng-click="$ctlr.goBack()" class="rm8" aria-label="CANCEL">{{::\'CANCEL\' | translate}}</md-button><md-button ng-hide="$ctlr.transaction.busy()" class="md-accent" ng-click="$ctlr.onRecover()" aria-label="RECOVER_PWD_RECOVER" ng-disabled="($$ctlr.config.form.$pristine && !$ctlr.config.data.login) || $ctlr.config.data.login== undefined || || $ctlr.config.data.serverUrl.length == 0 || $ctlr.config.data.login.length == 0">{{::\'RECOVER_PWD_RECOVER\' | translate}}</md-button><md-button ng-show="$ctlr.transaction.busy()" class="md-warn" ng-click="$ctlr.transaction.abort()" aria-label="ABORT">{{::\'CANCEL\' | translate}}</md-button></md-dialog-actions></md-dialog>')}])}(),function(t){try{t=angular.module("pipEntry.Templates")}catch(e){t=angular.module("pipEntry.Templates",[])}t.run(["$templateCache",function(e){e.put("recover_password/RecoverPasswordPanel.html",'<div class="pip-body"><div class="pip-content"><md-progress-linear ng-show="$ctrl.transaction.busy() && !$ctrl.hideObject.progress" md-mode="indeterminate" class="pip-progress-top"></md-progress-linear><h2 ng-if="!$ctrl.hideObject.title">{{ \'RECOVER_PWD_TITLE\' | translate }}</h2><p class="text-primary tm0 bm16" ng-if="!$ctrl.hideObject.subTitle1 && !$ctrl.config.useEmailAsLogin">{{ \'RECOVER_PWD_TEXT_1_LOGIN\' | translate }}</p><p class="text-primary tm0 bm16" ng-if="!$ctrl.hideObject.subTitle1 && $ctrl.config.useEmailAsLogin">{{ \'RECOVER_PWD_TEXT_1_EMAIL\' | translate }}</p><p class="text-primary tm0 bm16" ng-if="!$ctrl.hideObject.subTitle2">{{ \'RECOVER_PWD_TEXT_2\' | translate }}</p><form name="form" novalidate="" autocomplete="off"><div ng-messages="$ctrl.config.form.$serverError" class="text-error bm8 color-error" md-auto-hide="false"><div ng-message="ERROR_act_execute">{{::\'ERROR_ACT_EXECUTE\' | translate}}</div><div ng-message="ERROR_-1">{{::\'ERROR_SERVER\' | translate}}</div><div ng-message="ERROR_UNKNOWN">{{ $ctrl.config.form.$serverError.ERROR_UNKNOWN | translate }}</div></div><div class="bp16"><a ng-hide="$ctrl.config.showServerUrl || $ctrl.config.fixedServerUrl || $ctrl.hideObject.server" ng-click="$ctrl.config.showServerUrl = true" href="">{{ ::\'ENTRY_CHANGE_SERVER\' | translate }}</a></div><div ng-show="$ctrl.config.showServerUrl && !$ctrl.hideObject.server" class="bp8"><md-autocomplete ng-initial="" autofocus="" tabindex="1" class="pip-combobox w-stretch bm8" name="server" aria-label="URL" ng-enabled="!$ctrl.transaction.busy()" placeholder="{{::\'ENTRY_SERVER_URL\' | translate}}" md-no-cache="true" md-selected-item="$ctrl.config.data.serverUrl" md-search-text="$ctrl.config.selected.searchURLs" md-items="item in $ctrl.config.getMatches($ctrl.config.selected.searchURLs)" md-item-text="item" md-selected-item-change="$ctrl.onServerUrlChanged()" md-search-text-change="$ctrl.onChanged()" md-delay="200" ng-model="$ctrl.config.data.serverUrl" pip-clear-errors=""><span md-highlight-text="$ctrl.config.selected.searchURLs">{{ item }}</span></md-autocomplete></div><md-input-container class="pip-no-hint" style="padding-bottom: 4px!important;"><label ng-if="!$ctrl.config.useEmailAsLogin">{{::\'LOGIN\' | translate}}</label> <label ng-if="$ctrl.config.useEmailAsLogin">{{::\'EMAIL\' | translate}}</label> <input name="login" type="text" aria-label="LOGIN" ng-model="$ctrl.config.data.login" required="" step="any" pip-clear-errors="" ng-disabled="$ctrl.transaction.busy()" tabindex="2"><div class="hint" ng-if="$ctrl.touchedErrorsWithHint($ctrl.config.form, $ctrl.config.form.login).hint && !$ctrl.hideObject.hint && !$ctrl.config.useEmailAsLogin">{{::\'HINT_LOGIN\' | translate}}</div><div class="hint" ng-if="$ctrl.touchedErrorsWithHint($ctrl.config.form, $ctrl.config.form.login).hint && !$ctrl.hideObject.hint && $ctrl.config.useEmailAsLogin">{{::\'HINT_EMAIL\' | translate}}</div><div ng-messages="$ctrl.touchedErrorsWithHint($ctrl.config.form, $ctrl.config.form.login)" class="md-input-error" md-auto-hide="false"><div ng-message="required">{{::\'ERROR_LOGIN_INVALID\' | translate }}</div><div ng-message="ERROR_WRONG_LOGIN">{{::\'ERROR_WRONG_LOGIN\' | translate}}</div><div ng-message="ERROR_NO_LOGIN">{{::\'ERROR_NO_LOGIN\' | translate}}</div><div ng-message="ERROR_LOGIN_NOT_FOUND">{{::\'ERROR_LOGIN_NOT_FOUND\' | translate}}</div></div></md-input-container></form></div></div>')}])}(),function(t){try{t=angular.module("pipEntry.Templates")}catch(e){t=angular.module("pipEntry.Templates",[])}t.run(["$templateCache",function(e){e.put("signin/Signin.html",'<div class="pip-card-container pip-outer-scroll pip-entry"><pip-card width="400"><pip-signin-panel pipfixedserverurl="$ctrl.fixedServerUrl" class="scroll-y"></pip-signin-panel></pip-card></div>')}])}(),function(t){try{t=angular.module("pipEntry.Templates")}catch(e){t=angular.module("pipEntry.Templates",[])}t.run(["$templateCache",function(e){e.put("signin/SigninDialog.html",'<md-dialog class="pip-entry"><md-dialog-content><pip-signin-panel pip-goto-signup-dialog="$ctrl.pipGotoSignupDialog" pip-goto-recover-password-dialog="$ctrl.pipGotoRecoverPasswordDialog"></pip-signin-panel></md-dialog-content></md-dialog>')}])}(),function(t){try{t=angular.module("pipEntry.Templates")}catch(e){t=angular.module("pipEntry.Templates",[])}t.run(["$templateCache",function(e){e.put("signin/SigninPanel.html",'<div class="pip-body"><div class="pip-content"><md-progress-linear ng-show="$ctrl.transaction.busy() && !$ctrl.hideObject.progress" md-mode="indeterminate" class="pip-progress-top"></md-progress-linear><h2 pip-translate="SIGNIN_TITLE" ng-if="!$ctrl.hideObject.title"></h2><form name="form" novalidate=""><input type="password" style="display:none"><div ng-messages="$ctrl.config.form.$serverError" class="text-error bm8 color-error" md-auto-hide="false"><div ng-message="ERROR_act_execute">{{::\'ERROR_ACT_EXECUTE\' | translate}}</div><div ng-message="ERROR_-1">{{::\'ERROR_SERVER\' | translate}}</div><div ng-message="ERROR_ACCOUNT_LOCKED">{{::\'ERROR_ACCOUNT_LOCKED\' | translate}}</div><div ng-message="ERROR_UNKNOWN">{{ $ctrl.config.form.$serverError.ERROR_UNKNOWN | translate }}</div></div><div class="bp16"><a ng-hide="$ctrl.config.showServerUrl || $ctrl.config.fixedServerUrl || $ctrl.hideObject.server" ng-click="$ctrl.config.showServerUrl = true" href="" id="link-server-url" pip-test="link-server-url">{{::\'ENTRY_CHANGE_SERVER\' | translate}}</a></div><div ng-show="$ctrl.config.showServerUrl && !$ctrl.hideObject.server" class="bp8"><md-autocomplete ng-initial="" autofocus="" tabindex="1" class="pip-combobox w-stretch bm8" name="server" placeholder="{{::\'ENTRY_SERVER_URL\' | translate}}" md-no-cache="true" md-selected-item="$ctrl.config.data.serverUrl" md-search-text="$ctrl.config.selected.searchURLs" md-items="item in $ctrl.config.getMatches($ctrl.config.selected.searchURLs)" md-item-text="item" md-selected-item-change="$ctrl.onServerUrlChanged()" md-search-text-change="$ctrl.onChanged()" md-delay="200" ng-model="$ctrl.config.data.serverUrl" ng-disabled="$ctrl.transaction.busy()" pip-clear-errors="" pip-test="autocomplete-server"><span md-highlight-text="$ctrl.config.selected.searchURLs">{{item}}</span></md-autocomplete></div><md-input-container class="display bp4"><label ng-if="!$ctrl.config.useEmailAsLogin">{{::\'LOGIN\' | translate}}</label> <label ng-if="$ctrl.config.useEmailAsLogin">{{::\'EMAIL\' | translate}}</label> <input name="login" ng-model="$ctrl.config.data.login" required="" step="any" ng-keypress="$ctrl.onEnter($event)" aria-label="LOGIN" pip-clear-errors="" ng-disabled="$ctrl.transaction.busy()" tabindex="2" pip-test="input-login"><div class="hint" ng-if="$ctrl.touchedErrorsWithHint($ctrl.config.form, $ctrl.config.form.login).hint && !$ctrl.hideObject.hint && !$ctrl.config.useEmailAsLogin">{{::\'HINT_LOGIN\' | translate}}</div><div class="hint" ng-if="$ctrl.touchedErrorsWithHint($ctrl.config.form, $ctrl.config.form.login).hint && !$ctrl.hideObject.hint && $ctrl.config.useEmailAsLogin">{{::\'HINT_EMAIL\' | translate}}</div><div ng-messages="$ctrl.touchedErrorsWithHint($ctrl.config.form, $ctrl.config.form.login)" md-auto-hide="false"><div ng-message="required">{{::\'ERROR_LOGIN_INVALID\' | translate }}</div><div ng-message="ERROR_WRONG_LOGIN">{{::\'ERROR_WRONG_LOGIN\' | translate}}</div><div ng-message="ERROR_NO_LOGIN">{{::\'ERROR_NO_LOGIN\' | translate}}</div><div ng-message="ERROR_LOGIN_NOT_FOUND">{{::\'ERROR_LOGIN_NOT_FOUND\' | translate}}</div></div></md-input-container><md-input-container class="display bp4"><label>{{::\'PASSWORD\' | translate}}</label> <input name="password" ng-disabled="$ctrl.transaction.busy()" pip-clear-errors="" type="password" tabindex="3" ng-model="$ctrl.config.data.password" ng-keypress="$ctrl.onEnter($event)" required="" minlength="6" pip-test="input-password"><div class="hint" ng-if="$ctrl.touchedErrorsWithHint($ctrl.config.form, $ctrl.config.form.password).hint && !$ctrl.hideObject.hint">{{::\'SIGNIN_HINT_PASSWORD\' | translate}}</div><div ng-messages="$ctrl.touchedErrorsWithHint($ctrl.config.form, $ctrl.config.form.password)" md-auto-hide="false"><div ng-message="required">{{::\'SIGNIN_HINT_PASSWORD\' | translate}}</div><div ng-message="ERROR_WRONG_PASSWORD">{{::\'ERROR_WRONG_PASSWORD\' | translate}}</div><div ng-message="minlength">{{::\'HINT_PASSWORD\' | translate}}</div></div></md-input-container><a href="" class="display bm16" ng-if="!$ctrl.hideObject.forgotPassword" ng-click="$ctrl.gotoRecoverPassword()" tabindex="4">{{::\'SIGNIN_FORGOT_PASSWORD\' | translate}}</a><md-checkbox ng-disabled="$ctrl.transaction.busy()" ng-if="!$ctrl.hideObject.forgotPassword" md-no-ink="" class="lm0" aria-label="{{\'SIGNIN_REMEMBER\' | translate}}" tabindex="5" ng-model="$ctrl.config.data.remember" pip-test-checkbox="remember"><label class="label-check">{{::\'SIGNIN_REMEMBER\' | translate}}</label></md-checkbox><div style="height: 36px; overflow: hidden;"><md-button ng-if="!$ctrl.transaction.busy()" ng-click="$ctrl.onSignin()" aria-label="SIGNIN" class="md-raised md-accent w-stretch m0" tabindex="6" type="submit" xxng-disabled="($ctrl.config.data.login == undefined) || $ctrl.config.data.login.length == 0 || $ctrl.config.data.serverUrl == \'\' || $ctrl.config.data.serverUrl == undefined || $ctrl.config.data.serverUrl.length == 0 || ($ctrl.config.data.password == undefined)" pip-test="button-signin">{{::\'SIGNIN_TITLE\' | translate}}</md-button><md-button ng-if="$ctrl.transaction.busy()" ng-click="$ctrl.transaction.abort()" class="md-raised md-warn m0 w-stretch" tabindex="5" aria-label="ABORT" pip-test="button-cancel">{{::\'CANCEL\' | translate}}</md-button></div><div class="tm24 layout-row" ng-if="!$ctrl.config.adminOnly && $ctrl.pipMedia(\'gt-xs\') && !$ctrl.hideObject.signup"><p class="m0 text-small">{{::\'SIGNIN_NOT_MEMBER\' | translate}} <a href="" ng-click="$ctrl.gotoSignup()" tabindex="6">{{::\'SIGNIN_SIGNUP_HERE\' | translate}}</a></p></div><div class="tm24 divider-top text-signup" ng-if="!$ctrl.config.adminOnly && $ctrl.pipMedia(\'xs\') && !$ctrl.hideObject.signup"><div class="h48 layout-row layout-align-center-end"><p class="m0 text-small">{{::\'SIGNIN_NOT_MEMBER\' | translate}}</p></div><div class="h48 layout-row layout-align-center-start"><a class="text-small" ng-click="$ctrl.gotoSignup()" href="" tabindex="6">{{::\'SIGNIN_SIGNUP_HERE\' | translate}}</a></div></div></form></div></div>')}])}(),function(t){try{t=angular.module("pipEntry.Templates")}catch(e){t=angular.module("pipEntry.Templates",[])}t.run(["$templateCache",function(e){e.put("signup/Signup.html",'<div class="pip-card-container pip-outer-scroll pip-entry"><pip-card width="400"><pip-signup-panel class="scroll-y"></pip-signup-panel></pip-card></div>')}])}(),function(t){try{t=angular.module("pipEntry.Templates")}catch(e){t=angular.module("pipEntry.Templates",[])}t.run(["$templateCache",function(e){e.put("signup/SignupDialog.html",'<md-dialog class="pip-entry"><md-dialog-content><pip-signup-panel pip-goto-signin-dialog="$ctrl.pipGotoSigninDialog" pip-post-signup="$ctrl.pipPostSignup"></pip-signup-panel></md-dialog-content></md-dialog>')}])}(),function(t){try{t=angular.module("pipEntry.Templates")}catch(e){t=angular.module("pipEntry.Templates",[])}t.run(["$templateCache",function(e){e.put("signup/SignupPanel.html",'<div class="pip-body"><div class="pip-content"><md-progress-linear ng-show="$ctrl.transaction.busy() && !$ctrl.hideObject.progress" md-mode="indeterminate" class="pip-progress-top"></md-progress-linear><h2 pip-translate="SIGNUP_TITLE" ng-if="!$ctrl.hideObject.title"></h2><form name="form" novalidate="" autocomplete="off"><input type="email" style="display:none"> <input type="login" style="display:none"> <input type="password" style="display:none"><div ng-messages="$ctrl.config.form.$serverError" class="text-error bm8 color-error" md-auto-hide="false"><div ng-message="ERROR_act_execute">{{::\'ERROR_ACT_EXECUTE\' | translate}}</div><div ng-message="ERROR_-1">{{::\'ERROR_SERVER\' | translate}}</div><div ng-message="ERROR_UNKNOWN">{{ $ctrl.config.form.$serverError.ERROR_UNKNOWN | translate }}</div></div><div ng-if="$ctrl.error" class="text-error bm8 color-error" md-auto-hide="false">{{::\'ERROR_SERVER\' | translate}}</div><div class="bp16"><a ng-hide="$ctrl.config.showServerUrl || $ctrl.config.fixedServerUrl || $ctrl.hideObject.server" ng-click="$ctrl.config.showServerUrl = true" href="">{{::\'ENTRY_CHANGE_SERVER\' | translate}}</a></div><div ng-show="$ctrl.config.showServerUrl && !$ctrl.hideObject.server" class="bp8"><md-autocomplete ng-initial="" autofocus="" tabindex="1" class="pip-combobox w-stretch bm8" name="server" ng-enabled="!$ctrl.transaction.busy()" placeholder="{{::\'ENTRY_SERVER_URL\' | translate}}" md-no-cache="true" md-selected-item="$ctrl.config.data.serverUrl" md-search-text="$ctrl.config.selected.searchURLs" md-items="item in $ctrl.config.getMatches($ctrl.config.selected.searchURLs)" md-item-text="item" md-selected-item-change="$ctrl.onServerUrlChanged()" md-search-text-change="$ctrl.onChanged()" md-delay="200" ng-model="$ctrl.config.data.serverUrl" ng-disabled="$ctrl.transaction.busy()" pip-clear-errors=""><span md-highlight-text="$ctrl.config.selected.searchURLs">{{item}}</span></md-autocomplete></div><md-input-container class="display bp4"><label>{{::\'FULLNAME\' | translate}}</label> <input name="signupFullName" ng-disabled="$ctrl.transaction.busy()" autocomplete="off" ng-model="$ctrl.config.data.name" ng-init="$ctrl.config.data.name = \'\'" required="" tabindex="2" pip-clear-errors="" ng-keypress="$ctrl.onEnter($event)"><div class="hint text-overflow w-stretch" ng-if="$ctrl.touchedErrorsWithHint($ctrl.config.form, $ctrl.config.form.signupFullName).hint && !$ctrl.hideObject.hint">{{ ::\'HINT_FULLNAME\' | translate}}</div><div ng-messages="$ctrl.touchedErrorsWithHint($ctrl.config.form, $ctrl.config.form.signupFullName)" md-auto-hide="false"><div ng-message="required">{{ ::\'HINT_FULLNAME\' | translate}} {{::\'ERROR_FULLNAME_INVALID\' | translate }}</div><div ng-message="ERROR_NO_NAME">{{ ::\'ERROR_NO_NAME\' | translate }}</div></div></md-input-container><div ng-if="!$ctrl.config.useEmailAsLogin"><md-input-container class="display bp4"><label>{{ ::\'LOGIN\' | translate}}</label> <input name="signupLogin" ng-disabled="$ctrl.transaction.busy()" autocomplete="off" ng-model="$ctrl.config.data.login" ng-init="$ctrl.config.data.login = \'\'" required="" tabindex="2" pip-clear-errors="" ng-keypress="$ctrl.onEnter($event)"><div class="hint text-overflow w-stretch" ng-if="$ctrl.touchedErrorsWithHint($ctrl.config.form, $ctrl.config.form.signupLogin).hint && !$ctrl.hideObject.hint">{{::\'HINT_LOGIN\' | translate}}</div><div ng-messages="$ctrl.touchedErrorsWithHint($ctrl.config.form, $ctrl.config.form.signupLogin)" md-auto-hide="false"><div ng-message="required">{{::\'HINT_LOGIN\' | translate}} {{::\'ERROR_LOGIN_INVALID\' | translate }}</div><div ng-message="ERROR_WRONG_LOGIN">{{::\'ERROR_WRONG_LOGIN\' | translate}}</div><div ng-message="ERROR_NO_LOGIN">{{::\'ERROR_NO_LOGIN\' | translate}}</div></div></md-input-container><md-input-container class="display bp4"><label>{{::\'EMAIL\' | translate}}</label> <input name="userEmail" ng-disabled="$ctrl.transaction.busy()" pip-clear-errors="" type="email" tabindex="3" ng-model="$ctrl.config.data.email" xxxxpip-email-unique="$ctrl.config.data.email" ng-change="$ctrl.onChangeEmail(\'userEmail\')" ng-model-options="{ delay: 500 }" required="" ng-keypress="$ctrl.onEnter($event)" xxxpip-test="input-password"><div class="hint" ng-if="$ctrl.touchedErrorsWithHint($ctrl.config.form, $ctrl.config.form.userEmail, true).hint && !$ctrl.hideObject.hint">{{::\'HINT_EMAIL\' | translate}}</div><div ng-messages="$ctrl.touchedErrorsWithHint($ctrl.config.form, $ctrl.config.form.userEmail, true)" md-auto-hide="false"><div ng-message="emailUnique">{{::\'ERROR_ALREADY_EXIST\' | translate}}</div><div ng-message="required">{{::\'ERROR_EMAIL_INVALID\' | translate }}</div><div ng-message="email">{{::\'ERROR_EMAIL_INVALID\' | translate }}</div><div ng-message="ERROR_NO_EMAIL">{{::\'ERROR_NO_EMAIL\' | translate}}</div></div></md-input-container></div><div ng-if="$ctrl.config.useEmailAsLogin"><md-input-container class="display bp4" xxxmd-is-error="$ctrl.isError($ctrl.touchedErrorsWithHint($ctrl.config.form, $ctrl.config.form.userEmail1))"><label>{{::\'EMAIL\' | translate}}</label> <input name="userEmail1" ng-disabled="$ctrl.transaction.busy()" pip-clear-errors="" type="email" tabindex="3" ng-model="$ctrl.config.data.email" ng-change="$ctrl.onChangeEmail(\'userEmail1\')" ng-model-options="{ delay: 500 }" required="" ng-keypress="$ctrl.onEnter($event)" pip-test="input-password"><div class="hint" ng-if="$ctrl.touchedErrorsWithHint($ctrl.config.form, $ctrl.config.form.userEmail1, true).hint && !$ctrl.hideObject.hint">{{::\'HINT_EMAIL\' | translate}}</div><div ng-messages="$ctrl.touchedErrorsWithHint($ctrl.config.form, $ctrl.config.form.userEmail1, true)" md-auto-hide="false"><div ng-message="required">{{::\'ERROR_EMAIL_INVALID\' | translate }}</div><div ng-message="email">{{::\'ERROR_EMAIL_INVALID\' | translate }}</div><div ng-message="emailUnique">{{::\'ERROR_ALREADY_EXIST_EMAIL\' | translate}}</div><div ng-message="ERROR_WRONG_LOGIN">{{::\'ERROR_WRONG_LOGIN_EMAIL\' | translate}}</div><div ng-message="ERROR_NO_LOGIN">{{::\'ERROR_NO_LOGIN_EMAIL\' | translate}}</div></div></md-input-container></div><md-input-container class="display bp4"><label>{{::\'PASSWORD_SET\' | translate}}</label> <input name="password" ng-disabled="$ctrl.transaction.busy()" autocomplete="off" pip-clear-errors="" type="password" tabindex="4" ng-model="$ctrl.config.data.password" required="" minlength="6" ng-keypress="$ctrl.onEnter($event)" pip-test="input-password"><div class="hint" ng-if="$ctrl.touchedErrorsWithHint($ctrl.config.form, $ctrl.config.form.password).hint && !$ctrl.hideObject.hint">{{::\'HINT_PASSWORD\' | translate}}</div><div ng-messages="$ctrl.touchedErrorsWithHint($ctrl.config.form, $ctrl.config.form.password)" md-auto-hide="false"><div ng-message="required">{{::\'HINT_PASSWORD\' | translate}}</div><div ng-message="minlength">{{::\'HINT_PASSWORD\' | translate}}</div><div ng-message="ERROR_WRONG_PASSWORD" xxxng-if="!$ctrl.config.form.password.$pristine">{{::\'ERROR_WRONG_PASSWORD\' | translate}}</div></div></md-input-container><md-input-container class="display bp4" ng-if="!$ctrl.hideObject.passwordConfirm"><label>{{::\'PASSWORD_CONFIRM\' | translate}}</label> <input name="passwordConfirm" type="password" tabindex="4" required="" minlength="6" ng-model="$ctrl.confirmPassword" ng-disabled="$ctrl.transaction.busy()" pip-clear-errors="" pip-compare-password-match="" compare-to2="$ctrl.config.data.password" ng-keypress="$ctrl.onEnter($event)" pip-test="input-password"><div class="hint" ng-if="$ctrl.touchedErrorsWithHint($ctrl.config.form, $ctrl.config.form.passwordConfirm, true).hint && !$ctrl.hideObject.hint">{{::\'HINT_PASSWORD\' | translate}}</div><div ng-messages="$ctrl.touchedErrorsWithHint($ctrl.config.form, $ctrl.config.form.passwordConfirm, true)" md-auto-hide="false"><div ng-message="ERROR_compareTo">{{::\'PASSWORD_MATCH\' | translate}}</div><div ng-message="required">{{::\'HINT_PASSWORD\' | translate}}</div><div ng-message="minlength">{{::\'HINT_PASSWORD\' | translate}}</div></div></md-input-container><p class="text-small-secondary" ng-if="!$ctrl.hideObject.agreement">{{::\'SIGNUP_TEXT_11\' | translate}} <a href="#/legal/privacy" target="_blank">{{::\'SIGNUP_PRIVACY\' | translate}}</a> {{::\'SIGNUP_TEXT_12\' | translate}} <a href="#/legal/services" target="_blank">{{::\'SIGNUP_SERVICES\' | translate}}</a></p><md-button ng-hide="$ctrl.transaction.busy()" class="md-raised m0 md-accent w-stretch" ng-click="$ctrl.onSignup()" aria-label="SIGNUP" type="submit" xxng-disabled="$ctrl.config.form.$invalid || ($ctrl.config.form.$pristine && !$ctrl.config.data.email) || $ctrl.config.data.serverUrl.length == 0 || $ctrl.config.data.email.length == 0 || ($ctrl.config.data.login.length == 0 && !$ctrl.config.useEmailAsLogin) || (!$ctrl.config.data.password) || (!$ctrl.config.data.name) || $ctrl.config.data.name.length == 0 || $ctrl.config.data.password.length == 0">{{::\'SIGNUP_TITLE\' | translate}}</md-button><md-button ng-show="$ctrl.transaction.busy()" ng-click="$ctrl.transaction.abort()" class="md-raised md-warn m0 w-stretch" aria-label="ABORT">{{::\'CANCEL\' | translate}}</md-button><div class="tm24 layout-row" ng-if="$ctrl.pipMedia(\'gt-xs\') && !$ctrl.hideObject.signin"><p class="text-small m0">{{::\'SIGNUP_TEXT_2\' | translate}} <a href="" ng-click="$ctrl.gotoSignin()">{{::\'SIGNUP_SIGNIN_HERE\' | translate}}</a></p></div><div class="tm24 divider-top" ng-if="$ctrl.pipMedia(\'xs\') && !$ctrl.hideObject.signin" style="margin-right: -16px; margin-left: -16px; background-color: rgb(238, 238, 238);"><div class="h48 layout-row layout-align-center-end"><p class="bm0 text-small">{{::\'SIGNUP_TEXT_2\' | translate}}</p></div><div class="h48 layout-row layout-align-center-start"><p class="bm0 text-small"><a href="" ng-click="$ctrl.gotoSignin()">{{::\'SIGNUP_SIGNIN_HERE\' | translate}}</a></p></div></div></form></div></div>')}])}(),function(t){try{t=angular.module("pipEntry.Templates")}catch(e){t=angular.module("pipEntry.Templates",[])}t.run(["$templateCache",function(e){e.put("verify_email/VerifyEmail.html",'<div class="pip-card-container pip-outer-scroll pip-entry"><pip-card width="400"><div class="pip-body"><div class="pip-content layout-column flex" style="position: absolute; top: 0px; right: 0px; left: 0px; bottom: 0px; background-color: #fafafa; z-index: 100;" ng-if="$ctrl.showValidateProgress"><h2 class="p24-flex m0">{{\'VERIFY_EMAIL_WAIT\' | translate}}</h2><div class="layout-column flex layout-align-center-center"><md-progress-circular md-diameter="96"></md-progress-circular></div></div><div class="pip-content"><md-progress-linear ng-show="$ctrl.transaction.busy()" md-mode="indeterminate" class="pip-progress-top"></md-progress-linear><h2>{{\'VERIFY_EMAIL_TITLE\' | translate}}</h2><p class="title-padding">{{\'VERIFY_EMAIL_TEXT_1\' | translate}}</p><form name="form" novalidate="" ng-init="$ctrl.formCreated(form)" autocomplete="off"><div ng-messages="$ctrl.config.form.$serverError" class="text-error color-error bm8"><div ng-message="ERROR_act_execute">{{::\'ERROR_ACT_EXECUTE\' | translate}}</div><div ng-message="ERROR_-1">{{::\'ERROR_SERVER\' | translate}}</div><div ng-message="ERROR_UNKNOWN">{{ $ctrl.config.form.$serverError.ERROR_UNKNOWN | translate }}</div></div><div ng-show="$ctrl.config.showServerUrl && !$ctrl.hideObject.server" class="tp8 bp8">{{::\'ENTRY_SERVER_URL\' | translate}}: {{ $ctrl.config.data.serverUrl }}</div><div class="tp8 bp8"><span ng-if="!$ctrl.config.useEmailAsLogin">{{::\'LOGIN\' | translate}}</span> <span ng-if="$ctrl.config.useEmailAsLogin">{{::\'EMAIL\' | translate}}</span> : {{ $ctrl.config.data.login }}</div><md-input-container class="pip-no-hint"><label>{{::\'ENTRY_VERIFICATION_CODE\' | translate}}</label> <input name="code" ng-disabled="$ctrl.transaction.busy()" pip-clear-errors="" ng-model="$ctrl.config.data.code" required="" tabindex="3"><div class="hint text-overflow w-stretch" ng-if="$ctrl.touchedErrorsWithHint($ctrl.config.form, $ctrl.config.form.code).hint && !$ctrl.hideObject.hint">{{::\'ENTRY_VERIFICATION_CODE\' | translate}}</div><div ng-messages="$ctrl.touchedErrorsWithHint($ctrl.config.form, $ctrl.config.form.code)" ng-if="!$ctrl.config.form.$pristine" class="md-input-error"><div ng-message="required">{{::\'ERROR_CODE_INVALID\' | translate }}</div><div ng-message="ERROR_INVALID_CODE">{{::\'ERROR_INVALID_CODE\' | translate }}</div></div></md-input-container><p>{{\'VERIFY_EMAIL_TEXT_21\' | translate}} <a ng-click="$ctrl.onRecover()" class="pointer" href="">{{\'VERIFY_EMAIL_RESEND\' | translate}}</a> {{\'VERIFY_EMAIL_TEXT_22\' | translate}}</p></form></div></div><div class="pip-footer"><md-button ng-click="$ctrl.goBack()" ng-hide="$ctrl.transaction.busy()" class="rm8" aria-label="CANCEL">{{::\'CANCEL\' | translate}}</md-button><md-button class="md-accent" ng-click="$ctrl.onVerify()" ng-hide="$ctrl.transaction.busy()" aria-label="VERIFY" ng-if="!$ctrl.showValidateProgress" type="submit" ng-disabled="$ctrl.config.data.code.length == 0 || $ctrl.config.data.login.length == 0 || (!$ctrl.config.data.login && $ctrl.config.form.$pristine) || (!$ctrl.config.data.code)">{{::\'VERIFY\' | translate}}</md-button><md-button class="md-warn" ng-show="$ctrl.transaction.busy()" ng-click="$ctrl.transaction.abort()" aria-label="ABORT">{{::\'CANCEL\' | translate}}</md-button></div></pip-card></div>')}])}(),function(t){try{t=angular.module("pipEntry.Templates")}catch(e){t=angular.module("pipEntry.Templates",[])}t.run(["$templateCache",function(e){e.put("verify_email/VerifyEmailSuccess.html",'<div class="pip-card-container pip-outer-scroll pip-entry"><pip-card width="400"><div class="pip-footer"><md-button ng-click="$ctrl.onContinue()" class="md-accent">{{\'CONTINUE\' | translate}}</md-button></div><div class="pip-body"><div class="pip-content"><h2>{{\'VERIFY_EMAIL_TITLE\' | translate}}</h2><p class="title-padding">{{\'VERIFY_EMAIL_SUCCESS_TEXT\' | translate}}</p></div></div></pip-card></div>')}])}()},{}]},{},[67,1,2,3,4,5,6,7,8,9,10,11,12,13,14,16,15,17,18,19,20,21,27,22,23,24,25,26,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,52,50,51,53,54,55,56,57,58,59,60,61,62,63,64,65,66])(67)});


!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;((e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).pip||(e.pip={})).pictures=t()}}(function(){return function o(l,a,c){function u(e,t){if(!a[e]){if(!l[e]){var i="function"==typeof require&&require;if(!t&&i)return i(e,!0);if(s)return s(e,!0);var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}var n=a[e]={exports:{}};l[e][0].call(n.exports,function(t){return u(l[e][1][t]||t)},n,n.exports,o,l,a,c)}return a[e].exports}for(var s="function"==typeof require&&require,t=0;t<c.length;t++)u(c[t]);return u}({1:[function(t,V,e){(function(j,M,H){!function(){var t,m={};function v(){}function c(t){return t}function e(t){return!!t}function i(t){return!t}var r="object"==typeof self&&self.self===self&&self||"object"==typeof M&&M.global===M&&M||this;function s(t){return function(){if(null===t)throw new Error("Callback was already called.");t.apply(this,arguments),t=null}}function P(t){return function(){null!==t&&(t.apply(this,arguments),t=null)}}null!=r&&(t=r.async),m.noConflict=function(){return r.async=t,m};var n=Object.prototype.toString,y=Array.isArray||function(t){return"[object Array]"===n.call(t)};function l(t){return y(t)||"number"==typeof t.length&&0<=t.length&&t.length%1==0}function b(t,e){for(var i=-1,r=t.length;++i<r;)e(t[i],i,t)}function u(t,e){for(var i=-1,r=t.length,n=Array(r);++i<r;)n[i]=e(t[i],i,t);return n}function o(t){return u(Array(t),function(t,e){return e})}function $(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1}var I=Object.keys||function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i);return e};function p(t){var e,i,r=-1;return l(t)?(e=t.length,function(){return++r<e?r:null}):(i=I(t),e=i.length,function(){return++r<e?i[r]:null})}function _(r,n){return n=null==n?r.length-1:+n,function(){for(var t=Math.max(arguments.length-n,0),e=Array(t),i=0;i<t;i++)e[i]=arguments[i+n];switch(n){case 0:return r.call(this,e);case 1:return r.call(this,arguments[0],e)}}}function a(r){return function(t,e,i){return r(t,i)}}var d="function"==typeof H&&H,h=d?function(t){d(t)}:function(t){setTimeout(t,0)};function f(u){return function(i,r,n){n=P(n||v);var o=p(i=i||[]);if(u<=0)return n(null);var l=!1,a=0,c=!1;!function e(){if(l&&a<=0)return n(null);for(;a<u&&!c;){var t=o();if(null===t)return l=!0,void(a<=0&&n(null));a+=1,r(i[t],t,s(function(t){--a,t?(n(t),c=!0):e()}))}}()}}function g(r){return function(t,e,i){return r(m.eachOf,t,e,i)}}function C(n){return function(t,e,i,r){return n(f(e),t,i,r)}}function R(r){return function(t,e,i){return r(m.eachOfSeries,t,e,i)}}function x(t,e,n,i){i=P(i||v);var o=l(e=e||[])?[]:{};t(e,function(t,i,r){n(t,function(t,e){o[i]=e,r(t)})},function(t){i(t,o)})}function D(t,e,n,i){var o=[];t(e,function(e,i,r){n(e,function(t){t&&o.push({index:i,value:e}),r()})},function(){i(u(o.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})}function E(t,e,i,r){D(t,e,function(t,e){i(t,function(t){e(!t)})},r)}function S(l,a,c){return function(t,e,r,n){function i(){n&&n(c(!1,void 0))}function o(e,t,i){if(!n)return i();r(e,function(t){n&&a(t)&&(n(c(!0,e)),n=r=!1),i()})}3<arguments.length?l(t,e,o,i):(n=r,r=e,l(t,o,i))}}function w(t,e){return e}function A(t,e,i){i=i||v;var n=l(e)?[]:{};t(e,function(t,i,r){t(_(function(t,e){e.length<=1&&(e=e[0]),n[i]=e,r(t)}))},function(t){i(t,n)})}function O(t,e,r,i){var n=[];t(e,function(t,e,i){r(t,function(t,e){n=n.concat(e||[]),i(t)})},function(t){i(t,n)})}function T(r,t,e){if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");function i(i,t,r,n){if(null!=n&&"function"!=typeof n)throw new Error("task callback must be a function");if(i.started=!0,y(t)||(t=[t]),0===t.length&&i.idle())return m.setImmediate(function(){i.drain()});b(t,function(t){var e={data:t,callback:n||v};r?i.tasks.unshift(e):i.tasks.push(e),i.tasks.length===i.concurrency&&i.saturated()}),m.setImmediate(i.process)}function n(e,i){return function(){--o;var r=!1,t=arguments;b(i,function(i){b(l,function(t,e){t!==i||r||(l.splice(e,1),r=!0)}),i.callback.apply(i,t)}),e.tasks.length+o===0&&e.drain(),e.process()}}var o=0,l=[],a={tasks:[],concurrency:t,payload:e,saturated:v,empty:v,drain:v,started:!1,paused:!1,push:function(t,e){i(a,t,!1,e)},kill:function(){a.drain=v,a.tasks=[]},unshift:function(t,e){i(a,t,!0,e)},process:function(){for(;!a.paused&&o<a.concurrency&&a.tasks.length;){var t=a.payload?a.tasks.splice(0,a.payload):a.tasks.splice(0,a.tasks.length),e=u(t,function(t){return t.data});0===a.tasks.length&&a.empty(),o+=1,l.push(t[0]);var i=s(n(a,t));r(e,i)}},length:function(){return a.tasks.length},running:function(){return o},workersList:function(){return l},idle:function(){return a.tasks.length+o===0},pause:function(){a.paused=!0},resume:function(){if(!1!==a.paused){a.paused=!1;for(var t=Math.min(a.concurrency,a.tasks.length),e=1;e<=t;e++)m.setImmediate(a.process)}}};return a}function k(i){return _(function(t,e){t.apply(null,e.concat([_(function(t,e){"object"==typeof console&&(t?console.error&&console.error(t):console[i]&&b(e,function(t){console[i](t)}))})]))})}function U(r){return function(t,e,i){r(o(t),e,i)}}function L(o){return _(function(e,t){var i=_(function(r){var n=this,t=r.pop();return o(e,function(t,e,i){t.apply(n,r.concat([i]))},t)});return t.length?i.apply(this,t):i})}function W(r){return _(function(t){var e=t.pop();t.push(function(){var t=arguments;i?m.setImmediate(function(){e.apply(null,t)}):e.apply(null,t)});var i=!0;r.apply(this,t),i=!1})}"object"==typeof j&&"function"==typeof j.nextTick?m.nextTick=j.nextTick:m.nextTick=h,m.setImmediate=d?h:m.nextTick,m.forEach=m.each=function(t,e,i){return m.eachOf(t,a(e),i)},m.forEachSeries=m.eachSeries=function(t,e,i){return m.eachOfSeries(t,a(e),i)},m.forEachLimit=m.eachLimit=function(t,e,i,r){return f(e)(t,a(i),r)},m.forEachOf=m.eachOf=function(t,e,i){i=P(i||v);for(var r,n=p(t=t||[]),o=0;null!=(r=n());)o+=1,e(t[r],r,s(l));function l(t){o--,t?i(t):null===r&&o<=0&&i(null)}0===o&&i(null)},m.forEachOfSeries=m.eachOfSeries=function(t,r,n){n=P(n||v);var o=p(t=t||[]),l=o();!function e(){var i=!0;if(null===l)return n(null);r(t[l],l,s(function(t){if(t)n(t);else{if(null===(l=o()))return n(null);i?m.setImmediate(e):e()}})),i=!1}()},m.forEachOfLimit=m.eachOfLimit=function(t,e,i,r){f(e)(t,i,r)},m.map=g(x),m.mapSeries=R(x),m.mapLimit=C(x),m.inject=m.foldl=m.reduce=function(t,r,n,e){m.eachOfSeries(t,function(t,e,i){n(r,t,function(t,e){r=e,i(t)})},function(t){e(t,r)})},m.foldr=m.reduceRight=function(t,e,i,r){var n=u(t,c).reverse();m.reduce(n,e,i,r)},m.transform=function(t,r,n,e){3===arguments.length&&(e=n,n=r,r=y(t)?[]:{}),m.eachOf(t,function(t,e,i){n(r,t,e,i)},function(t){e(t,r)})},m.select=m.filter=g(D),m.selectLimit=m.filterLimit=C(D),m.selectSeries=m.filterSeries=R(D),m.reject=g(E),m.rejectLimit=C(E),m.rejectSeries=R(E),m.any=m.some=S(m.eachOf,e,c),m.someLimit=S(m.eachOfLimit,e,c),m.all=m.every=S(m.eachOf,i,i),m.everyLimit=S(m.eachOfLimit,i,i),m.detect=S(m.eachOf,c,w),m.detectSeries=S(m.eachOfSeries,c,w),m.detectLimit=S(m.eachOfLimit,c,w),m.sortBy=function(t,e,i){function r(t,e){var i=t.criteria,r=e.criteria;return i<r?-1:r<i?1:0}m.map(t,function(i,r){e(i,function(t,e){t?r(t):r(null,{value:i,criteria:e})})},function(t,e){if(t)return i(t);i(null,u(e.sort(r),function(t){return t.value}))})},m.auto=function(a,c,u){"function"==typeof c&&(u=c,c=null),u=P(u||v);var t=I(a),e=t.length;if(!e)return u(null);c=c||e;var s={},p=0,d=!1,h=[];function f(t){h.unshift(t)}function g(){e--,b(h.slice(0),function(t){t()})}f(function(){e||u(null,s)}),b(t,function(o){if(!d){for(var t,i=y(a[o])?a[o]:[a[o]],r=_(function(t,e){if(p--,e.length<=1&&(e=e[0]),t){var i={};n=function(t,e){i[e]=t},b(I(r=s),function(t){n(r[t],t)}),i[o]=e,d=!0,u(t,i)}else s[o]=e,m.setImmediate(g);var r,n}),e=i.slice(0,i.length-1),n=e.length;n--;){if(!(t=a[e[n]]))throw new Error("Has nonexistent dependency in "+e.join(", "));if(y(t)&&0<=$(t,o))throw new Error("Has cyclic dependencies")}l()?(p++,i[i.length-1](r,s)):f(function t(){l()&&(p++,0<=(e=$(h,t))&&h.splice(e,1),i[i.length-1](r,s));var e})}function l(){return p<c&&(r=function(t,e){return t&&s.hasOwnProperty(e)},n=!0,b(e,function(t,e,i){n=r(n,t,e,i)}),n)&&!s.hasOwnProperty(o);var r,n}})},m.retry=function(t,e,i){var o=[],l={times:5,interval:0};var r=arguments.length;if(r<1||3<r)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");function n(i,e){function t(t,r){return function(i){t(function(t,e){i(!t||r,{err:t,result:e})},e)}}function r(e){return function(t){setTimeout(function(){t(null)},e)}}for(;l.times;){var n=!--l.times;o.push(t(l.task,n)),!n&&0<l.interval&&o.push(r(l.interval))}m.series(o,function(t,e){e=e[e.length-1],(i||l.callback)(e.err,e.result)})}return r<=2&&"function"==typeof t&&(i=e,e=t),"function"!=typeof t&&function(t,e){if("number"==typeof e)t.times=parseInt(e,10)||5;else{if("object"!=typeof e)throw new Error("Unsupported argument type for 'times': "+typeof e);t.times=parseInt(e.times,10)||5,t.interval=parseInt(e.interval,10)||0}}(l,t),l.callback=i,l.task=e,l.callback?n():n},m.waterfall=function(t,o){if(o=P(o||v),!y(t)){var e=new Error("First argument to waterfall must be an array of functions");return o(e)}if(!t.length)return o();!function r(n){return _(function(t,e){if(t)o.apply(null,[t].concat(e));else{var i=n.next();i?e.push(r(i)):e.push(o),W(n).apply(null,e)}})}(m.iterator(t))()},m.parallel=function(t,e){A(m.eachOf,t,e)},m.parallelLimit=function(t,e,i){A(f(e),t,i)},m.series=function(t,e){A(m.eachOfSeries,t,e)},m.iterator=function(r){return function t(e){function i(){return r.length&&r[e].apply(null,arguments),i.next()}return i.next=function(){return e<r.length-1?t(e+1):null},i}(0)},m.apply=_(function(e,i){return _(function(t){return e.apply(null,i.concat(t))})}),m.concat=g(O),m.concatSeries=R(O),m.whilst=function(i,r,n){if(n=n||v,i()){var o=_(function(t,e){t?n(t):i.apply(this,e)?r(o):n.apply(null,[null].concat(e))});r(o)}else n(null)},m.doWhilst=function(t,e,i){var r=0;return m.whilst(function(){return++r<=1||e.apply(this,arguments)},t,i)},m.until=function(t,e,i){return m.whilst(function(){return!t.apply(this,arguments)},e,i)},m.doUntil=function(t,e,i){return m.doWhilst(t,function(){return!e.apply(this,arguments)},i)},m.during=function(i,r,n){n=n||v;var o=_(function(t,e){t?n(t):(e.push(l),i.apply(this,e))}),l=function(t,e){t?n(t):e?r(o):n(null)};i(l)},m.doDuring=function(t,e,i){var r=0;m.during(function(t){r++<1?t(null,!0):e.apply(this,arguments)},t,i)},m.queue=function(i,t){return T(function(t,e){i(t[0],e)},t,1)},m.priorityQueue=function(t,e){function o(t,e){return t.priority-e.priority}function r(i,t,r,n){if(null!=n&&"function"!=typeof n)throw new Error("task callback must be a function");if(i.started=!0,y(t)||(t=[t]),0===t.length)return m.setImmediate(function(){i.drain()});b(t,function(t){var e={data:t,priority:r,callback:"function"==typeof n?n:v};i.tasks.splice(function(t,e,i){for(var r=-1,n=t.length-1;r<n;){var o=r+(n-r+1>>>1);0<=i(e,t[o])?r=o:n=o-1}return r}(i.tasks,e,o)+1,0,e),i.tasks.length===i.concurrency&&i.saturated(),m.setImmediate(i.process)})}var n=m.queue(t,e);return n.push=function(t,e,i){r(n,t,e,i)},delete n.unshift,n},m.cargo=function(t,e){return T(t,1,e)},m.log=k("log"),m.dir=k("dir"),m.memoize=function(i,r){var o={},l={},a=Object.prototype.hasOwnProperty;r=r||c;var t=_(function(t){var e=t.pop(),n=r.apply(null,t);a.call(o,n)?m.setImmediate(function(){e.apply(null,o[n])}):a.call(l,n)?l[n].push(e):(l[n]=[e],i.apply(null,t.concat([_(function(t){o[n]=t;var e=l[n];delete l[n];for(var i=0,r=e.length;i<r;i++)e[i].apply(null,t)})])))});return t.memo=o,t.unmemoized=i,t},m.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},m.times=U(m.map),m.timesSeries=U(m.mapSeries),m.timesLimit=function(t,e,i,r){return m.mapLimit(o(t),e,i,r)},m.seq=function(){var e=arguments;return _(function(t){var r=this,i=t[t.length-1];"function"==typeof i?t.pop():i=v,m.reduce(e,t,function(t,e,i){e.apply(r,t.concat([_(function(t,e){i(t,e)})]))},function(t,e){i.apply(r,[t].concat(e))})})},m.compose=function(){return m.seq.apply(null,Array.prototype.reverse.call(arguments))},m.applyEach=L(m.eachOf),m.applyEachSeries=L(m.eachOfSeries),m.forever=function(t,e){var i=s(e||v),r=W(t);!function t(e){if(e)return i(e);r(t)}()},m.ensureAsync=W,m.constant=_(function(t){var e=[null].concat(t);return function(t){return t.apply(this,e)}}),m.wrapSync=m.asyncify=function(o){return _(function(t){var e,i,r,n=t.pop();try{e=o.apply(this,t)}catch(t){return n(t)}("function"==(r=typeof(i=e))||"object"==r&&i)&&"function"==typeof e.then?e.then(function(t){n(null,t)}).catch(function(t){n(t.message?t:new Error(t))}):n(null,e)})},"object"==typeof V&&V.exports?V.exports=m:r.async=m}()}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("timers").setImmediate)},{_process:2,timers:3}],2:[function(t,e,i){var r,n,o=e.exports={};function l(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function c(e){if(r===setTimeout)return setTimeout(e,0);if((r===l||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:l}catch(t){r=l}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(t){n=a}}();var u,s=[],p=!1,d=-1;function h(){p&&u&&(p=!1,u.length?s=u.concat(s):d=-1,s.length&&f())}function f(){if(!p){var t=c(h);p=!0;for(var e=s.length;e;){for(u=s,s=[];++d<e;)u&&u[d].run();d=-1,e=s.length}u=null,p=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(t)}}function g(t,e){this.fun=t,this.array=e}function m(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];s.push(new g(t,e)),1!==s.length||p||c(f)},g.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],3:[function(c,t,u){(function(t,e){var r=c("process/browser.js").nextTick,i=Function.prototype.apply,n=Array.prototype.slice,o={},l=0;function a(t,e){this._id=t,this._clearFn=e}u.setTimeout=function(){return new a(i.call(setTimeout,window,arguments),clearTimeout)},u.setInterval=function(){return new a(i.call(setInterval,window,arguments),clearInterval)},u.clearTimeout=u.clearInterval=function(t){t.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(window,this._id)},u.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},u.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},u._unrefActive=u.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;0<=e&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},u.setImmediate="function"==typeof t?t:function(t){var e=l++,i=!(arguments.length<2)&&n.call(arguments,1);return o[e]=!0,r(function(){o[e]&&(i?t.apply(null,i):t.call(null),u.clearImmediate(e))}),e},u.clearImmediate="function"==typeof e?e:function(t){delete o[t]}}).call(this,c("timers").setImmediate,c("timers").clearImmediate)},{"process/browser.js":2,timers:3}],4:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});function r(t){t.translations("en",{FILE:"Upload pictures",WEB_LINK:"Use web link",CAMERA:"Take photo",IMAGE_GALLERY:"Use image library"}),t.translations("ru",{FILE:"Загрузить картинку",WEB_LINK:"Вставить веб ссылка",CAMERA:"Использовать камеру",IMAGE_GALLERY:"Открыть галерею изображений"})}var c=t("./AddImageOption");r.$inject=["pipTranslateProvider"];var n=(o.$inject=["$scope","$element","$mdMenu","$timeout","pipCameraDialog","pipPictureUrlDialog","pipGallerySearchDialog"],o.prototype.openMenu=function(t){this.$scope.ngDisabled()||t()},o.prototype.toBoolean=function(t){return!!t&&("1"==(t=t.toString().toLowerCase())||"true"==t)},o.prototype.isMulti=function(){return void 0===this.$scope.multi||null===this.$scope.multi||(angular.isFunction(this.$scope.multi)?this.toBoolean(this.$scope.multi()):this.toBoolean(this.$scope.multi))},o.prototype.hideMenu=function(){this.$mdMenu.hide()},o.prototype.dataURItoBlob=function(t){var e;e=(0<=t.split(",")[0].indexOf("base64")?atob:unescape)(t.split(",")[1]);var i,r=t.split(",")[0].split(":")[1].split(";")[0],n=new Uint8Array(e.length);for(i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return new Blob([n],{type:r})},o.prototype.addImages=function(t){var e=this;void 0!==t&&(angular.isArray(t)?t.forEach(function(t){e.$scope.onChange&&e.$scope.onChange(t)}):this.$scope.onChange&&this.$scope.onChange(t),void 0!==this.$scope.$images&&Array.isArray(this.$scope.$images)&&(Array.isArray(t)?t.forEach(function(t){e.$scope.$images.push(t)}):this.$scope.$images.push(t)))},o.prototype.onFileChange=function(t){var i=this;null!=t&&0!=t.length&&t.forEach(function(e){-1<e.type.indexOf("image")&&i.$timeout(function(){var t=new FileReader;t.readAsDataURL(e),t.onload=function(t){i.$timeout(function(){i.addImages({url:null,uriData:t.target.result,file:e,picture:null})})}})})},o.prototype.onWebLinkClick=function(){var i=this;this.pipPictureUrlDialog.show(function(t){var e=null;"data:image"==t.substring(0,10)&&((e=i.dataURItoBlob(t)).name=t.slice(t.lastIndexOf("/")+1,t.length).split("?")[0]),i.addImages({url:t,uriData:null,file:e,picture:null})})},o.prototype.onCameraClick=function(){var i=this;this.pipCameraDialog.show(function(t){var e=i.dataURItoBlob(t);e.name="camera",i.addImages({url:null,uriData:t,file:e,picture:null})})},o.prototype.onGalleryClick=function(){var i=this;this.pipGallerySearchDialog.show({multiple:this.isMulti()},function(t){if(i.isMulti()){var e=[];t.forEach(function(t){e.push({url:null,uriData:null,file:null,picture:t})}),i.addImages(e)}else i.addImages({url:null,uriData:null,file:null,picture:t[0]})})},o);function o(t,e,i,r,n,o,l){this.$scope=t,this.$element=e,this.$mdMenu=i,this.$timeout=r,this.pipCameraDialog=n,this.pipPictureUrlDialog=o,this.pipGallerySearchDialog=l;var a=new c.AddImageOption;this.option=_.assign(a,this.$scope.option)}angular.module("pipAddImage",["pipCameraDialog","pipPictureUrlDialog","pipGallerySearchDialog","angularFileUpload"]).config(r).directive("pipAddImage",function(){return{restrict:"AC",scope:{$images:"=pipImages",onChange:"&pipChanged",multi:"&pipMulti",option:"=pipOption",ngDisabled:"&"},transclude:!0,templateUrl:"add_image/AddImage.html",controller:n,controllerAs:"vm"}})},{"./AddImageOption":5}],5:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});function r(){this.Upload=!0,this.WebLink=!0,this.Camera=!0,this.Galery=!0}i.AddImageOption=r},{}],6:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});function r(){}i.AddImageResult=r},{}],7:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=t("../data/IAvatarDataService"),u=t("../avatar_edit/AvatarEdit"),n={bindings:{pipId:"<?",pipUrl:"<?",pipName:"<?",ngClass:"<?",pipRebindAvatar:"<?",pipRebind:"<?"},template:'<img/><div id="default-avatar">{{ $ctrl.initial }}</div>',controller:(o.$inject=["$log","$http","$rootScope","$element","pipAvatarData","pipPictureUtils","pipCodes","$timeout"],o.prototype.$postLink=function(){var e=this;this.imageElement=this.$element.children("img"),this.defaultAvatarElement=this.$element.find("#default-avatar"),this.imageElement.load(function(t){e.image=$(t.target),e.pipPictureUtils.setImageMarginCSS(e.$element,e.image)}).error(function(t){e.showAvatarByName()}),this.bindControl(),this.postLink=!0},o.prototype.$onChanges=function(t){var e=this;t.pipRebind&&t.pipRebind.currentValue!==t.pipRebind.previousValue&&(this.pipRebind=t.pipRebind.currentValue),t.pipRebindAvatar&&t.pipRebindAvatar.currentValue!==t.pipRebindAvatar.previousValue&&(this.pipRebindAvatar=t.pipRebindAvatar.currentValue),t.ngClass&&t.ngClass.currentValue!==t.ngClass.previousValue&&(this.ngClass=t.ngClass.currentValue,setTimeout(function(){e.pipPictureUtils.setImageMarginCSS(e.$element,e.image)},50));var i=!1;this.pipRebind&&(t.pipId&&t.pipId.currentValue!==t.pipId.previousValue&&(this.pipId=t.pipId.currentValue,i=!0),t.pipUrl&&t.pipUrl.currentValue!==t.pipUrl.previousValue&&(this.pipUrl=t.pipUrl.currentValue,i=!0),t.pipName&&t.pipName.currentValue!==t.pipName.previousValue&&(this.pipName=t.pipName.currentValue,i=!0)),i&&this.postLink&&this.refreshAvatar()},o.prototype.showAvatarByName=function(){var e=this;this.$timeout(function(){var t=e.pipCodes.hash(e.pipId)%r.colors.length;e.defaultAvatarElement.removeAttr("class"),e.defaultAvatarElement.addClass(r.colorClasses[t]),e.imageElement.css("display","none"),e.defaultAvatarElement.css("display","inline-block")})},o.prototype.toBoolean=function(t){return!!t&&("1"==(t=t.toString().toLowerCase())||"true"==t)},o.prototype.refreshAvatar=function(){this.pipAvatarData.ShowOnlyNameIcon||(this.imageElement.attr("src",""),this.imageElement.css("display","inline-block"),this.defaultAvatarElement.css("display","none")),this.bindControl()},o.prototype.bindControl=function(){var t=this;if(this.pipRebindAvatar?this.cleanupAvatarUpdated=this.$rootScope.$on("pipPartyAvatarUpdated",function(){t.refreshAvatar()}):this.cleanupAvatarUpdated&&this.cleanupAvatarUpdated(),this.pipName?this.initial=this.pipName.charAt(0):this.initial=this.pipAvatarData.DefaultInitial,this.pipAvatarData.ShowOnlyNameIcon)this.showAvatarByName();else{var e=this.pipId?this.pipAvatarData.getAvatarUrl(this.pipId):this.pipUrl;this.imageElement.attr("src",e)}},o)};function o(t,e,i,r,n,o,l,a){var c=this;this.$log=t,this.$http=e,this.$rootScope=i,this.$element=r,this.pipAvatarData=n,this.pipPictureUtils=o,this.pipCodes=l,this.$timeout=a,this.postLink=!1,this.image=null,this.initial=this.pipAvatarData.DefaultInitial,r.addClass("pip-avatar flex-fixed"),this.$rootScope.$on(u.ReloadAvatar,function(t,e){c.pipId==e&&c.pipRebind&&c.refreshAvatar()})}angular.module("pipAvatar",["pipPictureUtils"]).component("pipAvatar",n)},{"../avatar_edit/AvatarEdit":8,"../data/IAvatarDataService":18}],8:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var d=t("../utilities/PicturePaste"),h=t("../add_image/AddImageOption");o.ReloadAvatar="pipReloadAvatar";var f=function(){this.disabled=!1,this.url="",this.progress=0,this.uploaded=!1,this.uploading=!1,this.upload=!1,this.loaded=!1,this.file=null,this.state=l.Original};o.AvatarEditControl=f;var l=function(){};l.Original="original",l.Changed="changed",l.Deleted="deleted",l.Error="error",o.AvatarStates=l;function i(t){t.translations("en",{PICTURE_EDIT_TEXT:"Click here to upload a picture",PICTURE_ERROR_LOAD:"Error image loading"}),t.translations("ru",{PICTURE_EDIT_TEXT:"Нажмите сюда для загрузки картинки",PICTURE_ERROR_LOAD:"Ошибка загрузки картинки"})}i.$inject=["pipTranslateProvider"];var r={bindings:{ngDisabled:"<?",pipCreated:"&?",pipChanged:"&?",pipReset:"<?",pipId:"<?",text:"<?pipDefaultText",icon:"<?pipDefaultIcon",pipRebind:"<?"},templateUrl:"picture_edit/PictureEdit.html",controller:(n.$inject=["$log","$scope","$http","$rootScope","$element","$timeout","pipAvatarData","pipCodes","pipPictureUtils","pipFileUpload","pipRest"],n.prototype.$postLink=function(){var e=this;this.controlElement=this.$element.children(".pip-picture-upload"),this.inputElement=this.controlElement.children("input[type=file]"),this.$element.children(".pip-picture-upload").focus(function(){e.pipPicturePaste.addPasteListener(function(t){e.readItemLocally(t.url,t.uriData,t.file,t.picture)})}),this.$element.children(".pip-picture-upload").blur(function(){e.pipPicturePaste.removePasteListener()}),this.pipCreated&&this.pipCreated({$event:{$control:this.control},$control:this.control}),this.control.reset()},n.prototype.$onChanges=function(t){t.pipRebind&&t.pipRebind.currentValue!==t.pipRebind.previousValue&&(this.pipRebind=t.pipRebind.currentValue),t.pipReset&&t.pipReset.currentValue!==t.pipReset.previousValue&&(this.pipReset=t.pipReset.currentValue);var e=!1;this.pipRebind&&(t.pipId&&t.pipId.currentValue!==t.pipId.previousValue&&(this.pipId=t.pipId.currentValue,!1!==this.pipReset&&(e=!0)),t.ngDisabled&&t.ngDisabled.currentValue!==t.ngDisabled.previousValue&&(this.ngDisabled=t.ngDisabled.currentValue)),t.pipId&&t.pipId.currentValue&&this.control&&this.control.state!=l.Deleted&&this.control.state!=l.Changed&&(e=!0),e&&this.control.reset()},n.prototype.reset=function(t){if(this.control.progress=0,this.control.uploading=!1,this.control.uploaded=!1,this.control.file=null,this.control.state=l.Original,this.control.url="",this.control.uriData=null,t)this.onChange();else{var e=this.pipId?this.pipAvatarData.getAvatarUrl(this.pipId):"";if(!e)return;this.control.progress=0,this.control.url=e,this.control.uploaded=""!=this.control.url,this.onChange()}},n.prototype.saveAvatar=function(t,e,i){var r=this;if(t=t||this.pipId,null!==this.control.file){var n=new FormData;n.append("file",this.control.file),this.control.uploading=!0,this.$http.put(this.pipAvatarData.getAvatarUrl(t),n,{uploadEventHandlers:{progress:function(t){t.lengthComputable&&(r.control.progress=t.loaded/t.total*100)}},headers:{"Content-Type":void 0}}).success(function(t){r.control.progress=100,r.pipId=t.id,r.$rootScope.$broadcast(o.ReloadAvatar,r.pipId),r.control.reset(),e&&e(t)}).error(function(t){r.control.progress=0,r.control.uploading=!1,r.control.upload=!1,r.control.progress=0,r.control.state=l.Original,i?i(t):r.$log.error(t)})}},n.prototype.deletePicture=function(t,e){var i=this;this.pipAvatarData.deleteAvatar(this.pipId,function(){i.$rootScope.$broadcast(o.ReloadAvatar,i.pipId),i.control.reset(!0),t&&t()},function(t){i.control.uploading=!1,i.control.upload=!1,i.control.progress=0,i.control.state=l.Original,e?e(t):i.$log.error(t)})},n.prototype.save=function(t,e,i){this.control.state==l.Changed?this.saveAvatar(t,e,i):this.control.state==l.Deleted?this.deletePicture(e,i):e&&e()},n.prototype.empty=function(){return""==this.control.url&&!this.control.uploading},n.prototype.isUpdated=function(){return this.control.state!=l.Original},n.prototype.readItemLocally=function(t,e,i,r){r?this.control.url=this.pipAvatarData.getAvatarUrl(this.pipId):(this.control.file=i,this.control.url=i?e:t||""),this.control.state=l.Changed,this.onChange()},n.prototype.onDeleteClick=function(t){t&&t.stopPropagation(),this.controlElement.focus(),this.control.file=null,this.control.url="",this.control.state=l.Deleted,this.onChange()},n.prototype.onKeyDown=function(t){var e=this;13==t.keyCode||32==t.keyCode?setTimeout(function(){e.controlElement.trigger("click")},0):46==t.keyCode||8==t.keyCode?(this.control.file=null,this.control.url="",this.control.state=l.Deleted,this.onChange()):27==t.keyCode&&this.control.reset()},n.prototype.onImageError=function(e){var i=this;this.$scope.$apply(function(){i.control.url="";var t=$(e.target);i.control.state=l.Original,i.pipPictureUtils.setErrorImageCSS(t,{width:"auto",height:"100%"})})},n.prototype.onImageLoad=function(t){var e=$(t.target),i={clientWidth:80,clientHeight:80};this.pipPictureUtils.setImageMarginCSS(i,e),this.control.uploading=!1},n.prototype.onChange=function(){this.pipChanged&&this.pipChanged({$event:{$control:this.control},$control:this.control})},n)};function n(t,e,i,r,n,o,l,a,c,u,s){var p=this;this.$log=t,this.$scope=e,this.$http=i,this.$rootScope=r,this.$element=n,this.$timeout=o,this.pipAvatarData=l,this.pipCodes=a,this.pipPictureUtils=c,this.pipFileUpload=u,this.pipRest=s,this.pipPicturePaste=new d.PicturePaste(o),this.option=new h.AddImageOption,this.option.WebLink=!1,this.option.Galery=!1,this.text=this.text||"PICTURE_EDIT_TEXT",this.icon=this.icon||"picture-no-border",this.errorText="PICTURE_ERROR_LOAD",this.control=new f,this.multiUpload=!1,this.control.reset=function(t){p.reset(t)},this.control.save=function(t,e,i){p.save(t,e,i)},n.addClass("pip-picture-edit")}angular.module("pipAvatarEdit",["ui.event","pipPictureUtils","pipPictures.Templates","pipFiles"]).config(i).component("pipAvatarEdit",r)},{"../add_image/AddImageOption":5,"../utilities/PicturePaste":43}],9:[function(t,e,i){function r(t){t.translations("en",{TAKE_PICTURE:"Take a picture",WEB_CAM_ERROR:"Webcam is missing or was not found"}),t.translations("ru",{TAKE_PICTURE:"Сделать фото",WEB_CAM_ERROR:"Web-камера отсутствует или не найдена"})}r.$inject=["pipTranslateProvider"];var n=(o.$inject=["$mdDialog","$rootScope","$timeout","$mdMenu","pipSystemInfo"],o.prototype.onInit=function(){var e=this;"android"!==this.browser?(Webcam.init(),setTimeout(function(){Webcam.attach(".camera-stream")},0),Webcam.on("error",function(t){e.webCamError=!0,console.error(t)}),Webcam.set({width:400,height:300,dest_width:400,dest_height:300,crop_width:400,crop_height:300,image_format:"jpeg",jpeg_quality:90}),Webcam.setSWFLocation("webcam.swf")):document.addEventListener("deviceready",this.onDeviceReady,!1)},o.prototype.onDeviceReady=function(){var e=this;navigator.camera.getPicture(function(t){e.onSuccess(t)},function(t){e.onFail(t)},{sourceType:Camera.PictureSourceType.CAMERA,correctOrientation:!0,quality:75,targetWidth:200,destinationType:Camera.DestinationType.DATA_URL})},o.prototype.onSuccess=function(t){var e="data:image/jpeg;base64,"+t;this.$mdDialog.hide(e)},o.prototype.onFail=function(t){alert("Failed because: "+t),this.$mdDialog.hide()},o.prototype.onTakePictureClick=function(){var e=this;Webcam&&(this.freeze?Webcam.snap(function(t){e.freeze=!1,e.$mdDialog.hide(t)}):(this.freeze=!0,Webcam.freeze()))},o.prototype.onResetPicture=function(){this.freeze=!1,Webcam.unfreeze()},o.prototype.onCancelClick=function(){this.$mdDialog.cancel()},o);function o(t,e,i,r,n){this.$mdDialog=t,this.$rootScope=e,this.$timeout=i,this.$mdMenu=r,this.pipSystemInfo=n,this.theme=this.$rootScope[pip.themes.ThemeRootVar],this.browser=this.pipSystemInfo.os,this.freeze=!1,this.onInit()}angular.module("pipCameraDialog").config(r).controller("pipCameraDialogController",n)},{}],10:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=(n.$inject=["$mdDialog"],n.prototype.show=function(e,t){this._mdDialog.show({templateUrl:"camera_dialog/CameraDialog.html",clickOutsideToClose:!0,controller:"pipCameraDialogController",controllerAs:"$ctrl"}).then(function(t){Webcam.reset(),e&&e(t)},function(){Webcam.reset()})},n);function n(t){this._mdDialog=t}angular.module("pipCameraDialog").service("pipCameraDialog",r)},{}],11:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0})},{}],12:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),angular.module("pipCameraDialog",["ngMaterial","pipServices","pipPictures.Templates"]),t("./ICameraDialogService"),t("./CameraDialogService"),t("./CameraDialogController")},{"./CameraDialogController":9,"./CameraDialogService":10,"./ICameraDialogService":11}],13:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r={bindings:{pipPictureIds:"<?",pipSrcs:"<?",pipPictures:"<?",uniqueCode:"<?pipUniqueCode",multiple:"<?pipMultiple",allowOpen:"<?pipOpen",pipRebind:"<?"},controller:(n.$inject=["$log","$scope","$rootScope","$element","pipPictureData","pipPictureUtils","pipCodes"],n.prototype.$postLink=function(){var i=this;this.$scope.getElementDimensions=function(){return{h:i.$element.height(),w:i.$element.width()}},this.$scope.$watch(this.$scope.getElementDimensions,function(t,e){t&&e&&e.h==t.h&&e.w==t.w||i.debounceCalculateResize()},!0),this.generateContent()},n.prototype.$onChanges=function(t){t.pipRebind&&t.pipRebind.currentValue!==t.pipRebind.previousValue&&(this.pipRebind=t.pipRebind.currentValue),t.allowOpen&&t.allowOpen.currentValue!==t.allowOpen.previousValue&&(this.allowOpen=t.allowOpen.currentValue);var e=!1;this.pipRebind&&(t.pipSrcs&&!_.isEqual(t.pipSrcs.currentValue,t.pipSrcs.previousValue)&&(this.pipSrcs=t.pipSrcs.currentValue,e=!0),t.pipPictureIds&&!_.isEqual(t.pipPictureIds.currentValue,t.pipPictureIds.previousValue)&&(this.pipPictureIds=t.pipPictureIds.currentValue,e=!0),t.pipPictures&&!_.isEqual(t.pipPictures.currentValue,t.pipPictures.previousValue)&&(this.pipPictures=t.pipPictures.currentValue,e=!0)),e&&this.generateContent()},n.prototype.calculateResize=function(){for(var t=this.$element.find("img"),e=0;e<t.length;e++){var i=angular.element(t[e].parentElement),r=angular.element(t[e]);"none"!=r.css("display")&&this.pipPictureUtils.setImageMarginCSS(i,r)}for(var n=this.$element.find("md-icon");e<n.length;e++){i=angular.element(n[e].parentElement);var o=angular.element(n[e]);"none"!=i.css("display")&&this.pipPictureUtils.setIconMarginCSS(i[0],o)}},n.prototype.onImageError=function(t){var e=$(t.target),i=e.parent(),r=i.children("div"),n=e.parent().find("md-icon");r.css("display","block"),e.css("display","none"),this.pipPictureUtils.setIconMarginCSS(i[0],n),n.empty().append(this.svgData)},n.prototype.onImageLoad=function(t){var e=$(t.target),i=e.parent(),r=i.children("div");this.pipPictureUtils.setImageMarginCSS(i,e),r.css("display","none")},n.prototype.getScheme=function(t){var e=this.collageSchemes[t-1];if(1==e.length)return e[0];var i=this.uniqueCode?this.uniqueCode:"";return e[this.pipCodes.hash(i)%e.length]},n.prototype.getImageUrls=function(){if(this.pipSrcs)return _.clone(this.pipSrcs);var t,e=[];if(this.pipPictureIds)for(t=0;t<this.pipPictureIds.length;t++)e.push(this.pipPictureData.getPictureUrl(this.pipPictureIds[t]));else if(this.pipPictures)for(t=0;t<this.pipPictures.length;t++){var i=this.pipPictures[t].uri?this.pipPictures[t].uri:this.pipPictureData.getPictureUrl(this.pipPictures[t].id);e.push(i)}return e},n.prototype.generatePicture=function(t,e){var i=t[0],r="",n="";return t.splice(0,1),r+=e.fullWidth?" pip-full-width":"",r+=e.fullHeight?" pip-full-height":"",r+=" flex-"+e.flex,n+=e.leftPadding?" pip-left":"",n+=e.rightPadding?" pip-right":"",n+=e.topPadding?" pip-top":"",n+=e.bottomPadding?" pip-bottom":"",this.allowOpen?'<a class="pip-picture-container'+r+'" flex="'+e.flex+'" href="'+i+'"  target="_blank"><div class="pip-picture'+n+'"><img src="'+i+'"/><div><md-icon class="collage-error-icon" md-svg-icon="icons:picture-no-border"></md-icon></div></div></a>':'<div class="pip-picture-container'+r+'" flex="'+e.flex+'"><div class="pip-picture'+n+'"><img src="'+i+'"/><div><md-icon class="collage-error-icon" md-svg-icon="icons:picture-no-border"></md-icon></div></div></div>'},n.prototype.generatePictureGroup=function(t,e){var i,r,n="";for(n+=e.fullWidth?" pip-full-width":"",n+=e.fullHeight?" pip-full-height":"",n+=" flex-"+e.flex,i='<div class="pip-picture-group layout'+(n+=" layout-"+e.layout)+'" flex="'+e.flex+'" layout="'+e.layout+'">',r=0;r<e.children.length;r++)i+=this.generate(t,e.children[r]);return i+="</div>"},n.prototype.generate=function(t,e){return e.group?this.generatePictureGroup(t,e):this.generatePicture(t,e)},n.prototype.generateContent=function(){var e=this;this.$element.find("img").unbind("error").unbind("load"),this.$element.empty();var t,i,r=this.getImageUrls();if(0!=r.length){if(8<r.length&&(this.multiple||(r.length=8)),r.length<=8)t=this.getScheme(r.length),i='<div class="pip-collage-section">'+this.generate(r,t)+"</div>",i+='<div class="clearfix"></div>',this.$element.html(i);else{for(i="";0<r.length;){var n=r.splice(0,8);t=this.getScheme(n.length),i+='<div class="pip-collage-section">'+this.generate(n,t)+"</div>"}i+='<div class="clearfix"></div>',this.$element.html(i)}this.$element.find("img").bind("error",function(t){e.onImageError(t)}).bind("load",function(t){e.onImageLoad(t)}),this.$element.show()}else this.$element.hide()},n)};function n(t,e,i,r,n,o,l){var a=this;this.$log=t,this.$scope=e,this.$rootScope=i,this.$element=r,this.pipPictureData=n,this.pipPictureUtils=o,this.pipCodes=l,r.addClass("pip-collage"),this.collageSchemes=o.getCollageSchemes(),this.resized=0,this.svgData='<?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg version="1.1"xmlns="http://www.w3.org/2000/svg"xmlns:xlink="http://www.w3.org/1999/xlink"x="0px" y="0px"viewBox="0 0 510 510"style="enable-background:new 0 0 515 515;"xml:space="preserve"><defs><style type="text/css"><![CDATA[#symbol-picture-no-border {        transform-origin: 50% 50%;        transform: scale(0.6, -0.6);    }        ]]></style>        </defs><rect x="0" width="515" height="515"/><path id="symbol-picture-no-border" d="M120 325l136-102 69 33 136-82 0-54-410 0 0 136z m341 15c0-28-23-51-51-51-29 0-52 23-52 51 0 29 23 52 52 52 28 0 51-23 51-52z" /></svg>',this.debounceCalculateResize=_.debounce(function(){a.calculateResize()},50)}angular.module("pipCollage",[]).component("pipCollage",r)},{}],14:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});function r(t,e,i){this.id=t,this.uri=e,this.name=i}i.Attachment=r},{}],15:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=t("./IAvatarDataService"),n=(o.$inject=["_config","pipRest"],Object.defineProperty(o.prototype,"AvatarRoute",{get:function(){return this._config.AvatarRoute},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"ShowOnlyNameIcon",{get:function(){return this._config.ShowOnlyNameIcon},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"DefaultInitial",{get:function(){return this._config.DefaultInitial},enumerable:!0,configurable:!0}),o.prototype.getAvatarUrl=function(t){return this.pipRest.serverUrl+this._config.AvatarRoute+"/"+t},o.prototype.postAvatarUrl=function(){return this.pipRest.serverUrl+this._config.AvatarRoute},o.prototype.deleteAvatar=function(t,e,i){var r={};r[this._config.AvatarFieldId]=t,this.pipRest.getResource(this._config.AvatarResource).remove(r,null,e,i)},o.prototype.createAvatar=function(t,e,i,r){},o);function o(t,e){this._config=t,this.pipRest=e}var l=(a.$inject=["pipRestProvider"],Object.defineProperty(a.prototype,"AvatarRoute",{get:function(){return this._config.AvatarRoute},set:function(t){this._config.AvatarRoute=t,this.pipRestProvider.registerOperation("avatars",this._config.AvatarRoute+"/:avatar_id")},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"AvatarResource",{get:function(){return this._config.AvatarResource},set:function(t){this._config.AvatarResource=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"AvatarFieldId",{get:function(){return this._config.AvatarFieldId},set:function(t){this._config.AvatarFieldId=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"ShowOnlyNameIcon",{get:function(){return this._config.ShowOnlyNameIcon},set:function(t){this._config.ShowOnlyNameIcon=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"DefaultInitial",{get:function(){return this._config.DefaultInitial},set:function(t){this._config.DefaultInitial=t},enumerable:!0,configurable:!0}),a.prototype.$get=["pipRest",function(t){return null==this._service&&(this._service=new n(this._config,t)),this._service}],a);function a(t){this.pipRestProvider=t,this._config=new r.AvatarConfig,this._config.AvatarRoute="/api/1.0/avatars",this._config.AvatarResource="avatars",this._config.AvatarFieldId="avatar_id",this._config.ShowOnlyNameIcon=!1,this._config.DefaultInitial="&"}angular.module("pipAvatarData",["pipRest"]).provider("pipAvatarData",l)},{"./IAvatarDataService":18}],16:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});function r(t,e,i,r,n,o,l,a){this.id=t,this.group=e,this.name=i,this.size=r,this.content_type=n,this.create_time=o,this.expire_time=l,this.completed=a}i.BlobInfo=r},{}],17:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});function r(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this.total=e,this.data=t}i.DataPage=r},{}],18:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});function r(){}i.AvatarConfig=r,i.colorClasses=["pip-avatar-color-0","pip-avatar-color-1","pip-avatar-color-2","pip-avatar-color-3","pip-avatar-color-4","pip-avatar-color-5","pip-avatar-color-6","pip-avatar-color-7","pip-avatar-color-8","pip-avatar-color-9","pip-avatar-color-10","pip-avatar-color-11","pip-avatar-color-12","pip-avatar-color-13","pip-avatar-color-14","pip-avatar-color-15"],i.colors=["rgba(239,83,80,1)","rgba(236,64,122,1)","rgba(171,71,188,1)","rgba(126,87,194,1)","rgba(92,107,192,1)","rgba(3,169,244,1)","rgba(0,188,212,1)","rgba(0,150,136,1)","rgba(76,175,80,1)","rgba(139,195,74,1)","rgba(205,220,57,1)","rgba(255,193,7,1)","rgba(255,152,0,1)","rgba(255,87,34,1)","rgba(121,85,72,1)","rgba(96,125,139,1)"]},{}],19:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0})},{}],20:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});function r(){}i.PictureConfig=r},{}],21:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});function r(){}i.Image=r},{}],22:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});function r(t,e,i,r){this.id=t,this.title=e,this.pics=[],this.create_time=r}i.ImageSet=r},{}],23:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=(n.$inject=["pipRest","pipFormat"],n.prototype.readImageSets=function(t,e,i){return t=t||{},this.pipRest.getResource(this.RESOURCE).page(t,e,i)},n.prototype.readImageSet=function(t,e,i){return this.pipRest.getResource(this.RESOURCE).get({imagesets_id:t},e,i)},n.prototype.updateImageSet=function(t,e,i,r){this.pipRest.getResource(this.RESOURCE).update({imagesets_id:t},e,i,r)},n.prototype.createImageSet=function(t,e,i){this.pipRest.getResource(this.RESOURCE).save(null,t,e,i)},n.prototype.deleteImageSet=function(t,e,i){this.pipRest.getResource(this.RESOURCE).remove({imagesets_id:t},null,e,i)},n);function n(t,e){this.pipRest=t,this.pipFormat=e,this.RESOURCE="imagesets"}angular.module("pipImageSetData",["pipRest"]).service("pipImageSetData",r)},{}],24:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=t("./IPictureDataService"),n=(o.$inject=["_config","pipFormat","pipRest"],Object.defineProperty(o.prototype,"PictureRoute",{get:function(){return this._config.PictureRoute},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"ShowErrorIcon",{get:function(){return this._config.ShowErrorIcon},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"DefaultErrorIcon",{get:function(){return this._config.DefaultErrorIcon},enumerable:!0,configurable:!0}),o.prototype.getPictureUrl=function(t){return this.pipRest.serverUrl+this._config.PictureRoute+"/"+t},o.prototype.postPictureUrl=function(){return this.pipRest.serverUrl+this._config.PictureRoute},o.prototype.readPictures=function(t,e,i){return(t=t||{}).filter&&(t.filer=this.pipFormat.filterToString(t.filer)),this.pipRest.getResource(this.RESOURCE).page(t,e,i)},o.prototype.readPictureInfo=function(t,e,i){return(t=t||{}).filter&&(t.filer=this.pipFormat.filterToString(t.filer)),this.pipRest.getResource(this.RESOURCE_INFO).get(t,e,i)},o.prototype.readPicture=function(t,e,i){return this.pipRest.getResource(this.RESOURCE).get({picture_id:t},e,i)},o.prototype.deletePicture=function(t,e,i){this.pipRest.getResource(this.RESOURCE).remove({picture_id:t},null,e,i)},o);function o(t,e,i){this._config=t,this.pipFormat=e,this.pipRest=i,this.RESOURCE="picture",this.RESOURCE_INFO="pictureInfo"}var l=(a.$inject=["pipRestProvider"],Object.defineProperty(a.prototype,"PictureRoute",{get:function(){return this._config.PictureRoute},set:function(t){this._config.PictureRoute=t,this.pipRestProvider.registerOperation("pictures",this._config.PictureRoute+"/:picture_id")},enumerable:!0,configurable:!0}),a.prototype.getPictureUrl=function(t){return this.pipRestProvider.serverUrl+this._config.PictureRoute+"/"+t},Object.defineProperty(a.prototype,"DefaultErrorIcon",{get:function(){return this._config.DefaultErrorIcon},set:function(t){this._config.DefaultErrorIcon=t,this.pipRestProvider.registerOperation("pictures",this._config.PictureRoute+"/:picture_id")},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"ShowErrorIcon",{get:function(){return this._config.ShowErrorIcon},set:function(t){this._config.ShowErrorIcon=t},enumerable:!0,configurable:!0}),a.prototype.$get=["pipRest","pipFormat",function(t,e){return null==this._service&&(this._service=new n(this._config,e,t)),this._service}],a);function a(t){this.pipRestProvider=t,this._config=new r.PictureConfig,this._config.PictureRoute="/api/1.0/blobs",this._config.ShowErrorIcon=!0,this._config.DefaultErrorIcon="picture-no-border"}angular.module("pipPictureData",["pipRest"]).provider("pipPictureData",l)},{"./IPictureDataService":20}],25:[function(t,e,i){"use strict";function r(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}Object.defineProperty(i,"__esModule",{value:!0}),t("./Attachment"),t("./BlobInfo"),t("./DataPage"),t("./ImageSet"),t("./Image"),t("./AvatarDataService"),t("./IAvatarDataService"),t("./ImageSetDataService"),t("./IImageSetDataService"),t("./PictureDataService"),t("./IPictureDataService"),angular.module("pipPictures.Data",["pipAvatarData","pipPictureData","pipImageSetData"]),r(t("./Attachment")),r(t("./BlobInfo")),r(t("./DataPage")),r(t("./ImageSet")),r(t("./Image")),r(t("./IAvatarDataService")),r(t("./IPictureDataService"))},{"./Attachment":14,"./AvatarDataService":15,"./BlobInfo":16,"./DataPage":17,"./IAvatarDataService":18,"./IImageSetDataService":19,"./IPictureDataService":20,"./Image":21,"./ImageSet":22,"./ImageSetDataService":23,"./PictureDataService":24}],26:[function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});function o(t){t.translations("en",{IMAGE_GALLERY:"Add from image gallery",SEARCH_PICTURES:"Search for pictures...",IMAGE_START_SEARCH:"Images will appear here once you start searching"}),t.translations("ru",{IMAGE_GALLERY:"Добавить из галереи изображений",SEARCH_PICTURES:"Поиск изображений...",IMAGE_START_SEARCH:"Картинки появятся после начала поиска"})}var l=t("./IGallerySearchDialogService");o.$inject=["pipTranslateProvider"];var d,a=(d=l.GallerySearchDialogParams,n(c,d),c.$inject=["$log","$mdDialog","$rootScope","$timeout","$mdMenu","multiple","$http","pipRest","pipTransaction","pipImageSetData","pipPictureData"],c.prototype.onSearchClick=function(){var i=this;if(!this.transaction.busy()&&""!=this.search&&this.search!=this.prevSearch){this.prevSearch=this.search,this.imagesSearchResult=[];var e=this.transaction.begin("ENTERING");e&&this.pipImageSetData.readImageSets({Search:this.search},function(t){i.transaction.aborted(e)||(_.each(t.data,function(t){_.each(t.pics,function(t){var e={checked:!1,url:t.uri?t.uri:i.pipPictureData.getPictureUrl(t.id),item:t,thumbnail:t.uri?t.uri:i.pipPictureData.getPictureUrl(t.id)};i.imagesSearchResult.push(e)})}),i.transaction.end())},function(t){i.transaction.end(t),i.$log.error(t)})}},c.prototype.onStopSearchClick=function(){this.transaction.abort(),this.prevSearch=""},c.prototype.onKeyPress=function(t){13===t.keyCode&&this.onSearchClick()},c.prototype.onImageClick=function(t){this.transaction.busy()||(t.checked=!t.checked,this.multiple?t.checked?this.images.push(t):_.remove(this.images,{url:t.url}):t.checked?0<this.images.length?(this.images[0].checked=!1,this.images[0]=t):this.images.push(t):this.images=[])},c.prototype.onAddClick=function(){if(!this.transaction.busy()){var e=[];this.images.forEach(function(t){t.checked&&e.push(t.item)}),this.$mdDialog.hide(e)}},c.prototype.onCancelClick=function(){this.$mdDialog.cancel()},c.prototype.addButtonDisabled=function(){return 0==this.images.length||this.transaction.busy()},c.prototype.focusSearchText=function(){setTimeout(function(){var t=$(".pip-gallery-search-dialog .search-images");0<t.length&&t.focus()},0)},c);function c(t,e,i,r,n,o,l,a,c,u,s){var p=d.call(this)||this;return p.$log=t,p.$mdDialog=e,p.$rootScope=i,p.$timeout=r,p.$mdMenu=n,p.multiple=o,p.$http=l,p.pipRest=a,p.pipTransaction=c,p.pipImageSetData=u,p.pipPictureData=s,p.prevSearch="",p.images=[],p.theme=p.$rootScope[pip.themes.ThemeRootVar],p.search="",p.imagesSearchResult=[],p.transaction=p.pipTransaction.create("search"),p.focusSearchText(),p}angular.module("pipGallerySearchDialog").config(o).controller("pipGallerySearchController",a)},{"./IGallerySearchDialogService":28}],27:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=(n.$inject=["$mdDialog"],n.prototype.show=function(t,e,i){this._mdDialog.show({templateUrl:"gallery_search_dialog/GallerySearchDialog.html",clickOutsideToClose:!0,controller:"pipGallerySearchController",controllerAs:"$ctrl",locals:t}).then(function(t){e&&e(t)})},n);function n(t){this._mdDialog=t}angular.module("pipGallerySearchDialog").service("pipGallerySearchDialog",r)},{}],28:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});function r(){}i.GallerySearchDialogParams=r},{}],29:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),angular.module("pipGallerySearchDialog",["ngMaterial","pipPictures.Templates","pipCommonRest"]),t("./IGallerySearchDialogService"),t("./GallerySearchDialogService"),t("./GallerySearchDialogController"),function(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}(t("./IGallerySearchDialogService"))},{"./GallerySearchDialogController":26,"./GallerySearchDialogService":27,"./IGallerySearchDialogService":28}],30:[function(t,e,i){"use strict";function r(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}Object.defineProperty(i,"__esModule",{value:!0}),t("./data"),t("./rest"),t("./camera_dialog"),t("./add_image/AddImage"),t("./add_image/AddImageOption"),t("./add_image/AddImageResult"),t("./avatar/Avatar"),t("./avatar_edit/AvatarEdit"),t("./collage/Collage"),t("./gallery_search_dialog"),t("./picture/Picture"),t("./picture_edit/PictureEdit"),t("./picture_list_edit/PictureListEdit"),t("./picture_url_dialog"),t("./utilities"),angular.module("pipPictures",["pipControls","pipPictures.Data","pipPictures.Rest","pipCameraDialog","pipGallerySearchDialog","pipPictureUrlDialog","pipAddImage","pipAvatar","pipPictureUtils","pipPicturePaste","pipAvatarEdit","pipPicture","pipPictureEdit","pipCollage","pipPictureListEdit"]),r(t("./data")),r(t("./avatar_edit/AvatarEdit")),r(t("./add_image/AddImageOption")),r(t("./add_image/AddImageResult")),r(t("./gallery_search_dialog")),r(t("./picture_edit/PictureEdit")),r(t("./picture_list_edit/PictureListEdit")),r(t("./utilities"))},{"./add_image/AddImage":4,"./add_image/AddImageOption":5,"./add_image/AddImageResult":6,"./avatar/Avatar":7,"./avatar_edit/AvatarEdit":8,"./camera_dialog":12,"./collage/Collage":13,"./data":25,"./gallery_search_dialog":29,"./picture/Picture":31,"./picture_edit/PictureEdit":32,"./picture_list_edit/PictureListEdit":33,"./picture_url_dialog":37,"./rest":41,"./utilities":45}],31:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r={bindings:{src:"<?pipSrc",pictureId:"<?pipPictureId",pipPicture:"<?",defaultIcon:"<?pipDefaultIcon",pipRebind:"<?"},template:'<img ui-event="{ error: \'$ctrl.onImageError($event)\', load: \'$ctrl.onImageLoad($event)\' }"/><div class="pip-picture-error"><md-icon md-svg-icon="icons:{{$ctrl.defaultIcon}}"></md-icon><div class="pip-default-text"><span>{{ $ctrl.errorText | translate }}</span></div></div>',controller:(n.$inject=["$scope","$rootScope","$element","pipPictureUtils","pipPictureData"],n.prototype.$postLink=function(){this.imageElement=this.$element.children("img"),this.defaultBlock=this.$element.children("div"),this.defaultIcon=this.defaultIcon?this.defaultIcon:this.pipPictureData.DefaultErrorIcon,this.postLink=!0,this.bindControl()},n.prototype.$onChanges=function(t){t.pipRebind&&t.pipRebind.currentValue!==t.pipRebind.previousValue&&(this.pipRebind=t.pipRebind.currentValue);var e=!1;this.pipRebind&&(t.src&&t.src.currentValue!==t.src.previousValue&&(this.src=t.src.currentValue,e=!0),t.pictureId&&t.pictureId.currentValue!==t.pictureId.previousValue&&(this.pictureId=t.pictureId.currentValue,e=!0),t.pipPicture&&!_.isEqual(t.pipPicture.currentValue,t.pipPicture.previousValue)&&(this.pipPicture=t.pipPicture.currentValue,e=!0),t.defaultIcon&&t.defaultIcon.currentValue!==t.defaultIcon.previousValue&&(this.defaultIcon=t.defaultIcon.currentValue,this.defaultIcon=this.defaultIcon?this.defaultIcon:this.pipPictureData.DefaultErrorIcon)),e&&this.postLink&&this.bindControl()},n.prototype.onImageError=function(t){var e=this;this.pipPictureData.ShowErrorIcon?this.$scope.$apply(function(){e.imageElement.css("display","none"),e.defaultBlock.css("display","block")}):this.$scope.$apply(function(){e.defaultBlock.css("display","none")})},n.prototype.onImageLoad=function(t){var e=$(t.target);this.pipPictureUtils.setImageMarginCSS(this.$element,e),this.$element.children("div").css("display","none")},n.prototype.bindControl=function(){var t;this.pictureId?(t=this.pipPictureData.getPictureUrl(this.pictureId),this.imageElement.attr("src",t)):this.src?this.imageElement.attr("src",this.src):this.pipPicture&&(t=this.pipPicture.uri?this.pipPicture.uri:this.pipPictureData.getPictureUrl(this.pipPicture.id),this.imageElement.attr("src",t))},n)};function n(t,e,i,r,n){this.$scope=t,this.$rootScope=e,this.$element=i,this.pipPictureUtils=r,this.pipPictureData=n,this.postLink=!1,this.errorText="PICTURE_ERROR_LOAD",this.$element.addClass("pip-picture")}angular.module("pipPicture",[]).component("pipPicture",r)},{}],32:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var u=t("../utilities/PicturePaste"),s=function(){this.disabled=!1,this.url="",this.progress=0,this.uploaded=!1,this.uploading=!1,this.upload=!1,this.loaded=!1,this.file=null,this.state=p.Original};i.PictureEditControl=s;var p=function(){};p.Original="original",p.Copied="copied",p.Changed="changed",p.Deleted="deleted",p.Error="error",i.PictureStates=p;function r(t){t.translations("en",{ERROR_WRONG_IMAGE_FILE:"Incorrect image file. Please, choose another one",PICTURE_EDIT_TEXT:"Click here to upload a picture",PICTURE_ERROR_LOAD:"Error image loading"}),t.translations("ru",{ERROR_WRONG_IMAGE_FILE:"Неправильный файл с изображением. Выберете другой файл",PICTURE_EDIT_TEXT:"Нажмите сюда для загрузки картинки",PICTURE_ERROR_LOAD:"Ошибка загрузки картинки"})}r.$inject=["pipTranslateProvider"];var n={bindings:{ngDisabled:"<?",pipCreated:"&?",pipChanged:"&?",pipPictureId:"=?",pipPicture:"=?",pipAddedPicture:"&?",text:"<?pipDefaultText",icon:"<?pipDefaultIcon",pipRebind:"<?"},templateUrl:"picture_edit/PictureEdit.html",controller:(o.$inject=["$log","$scope","$rootScope","$element","pipPictureData","pipPictureUtils","$timeout","pipFileUpload"],o.prototype.$postLink=function(){this.controlElement=this.$element.children(".pip-picture-upload"),this.inputElement=this.controlElement.children("input[type=file]"),this.control.reset(),this.pipCreated&&this.pipCreated({$event:{sender:this.control},$control:this.control})},o.prototype.abort=function(){this.control.uploading&&(this.control.uploaded=!1,this.control.uploading=!1,this.control.progress=0,this.control.upload=null)},o.prototype.$onChanges=function(t){t.pipRebind&&t.pipRebind.currentValue!==t.pipRebind.previousValue&&(this.pipRebind=t.pipRebind.currentValue);var e=!1;t.ngDisabled&&t.ngDisabled.currentValue!==t.ngDisabled.previousValue&&(this.ngDisabled=t.ngDisabled.currentValue,this.control.disabled=this.ngDisabled,this.inputElement&&this.inputElement.attr("disabled",this.control.disabled)),this.pipRebind&&t.pipPictureId&&t.pipPictureId.currentValue!==this.pipPictureId&&(this.pipPictureId=t.pipPictureId.currentValue,e=!0),this.pipRebind&&t.pipPicture&&!_.isEqual(t.pipPicture.currentValue,this.pipPicture)&&(this.pipPicture=t.pipPicture.currentValue,e=!0),e&&this.control.reset()},o.prototype.resetImage=function(t){this.control.progress=0,this.control.uploading=!1,this.control.uploaded=!1,this.control.file=null,this.control.state=this.pictureStartState,this.control.url="",this.control.uri=null,this.control.name=null,this.control.uriData=null,this.control.id=null;var e="";if(t)this.onChange();else{if(this.pipPictureId?e=this.pipPictureData.getPictureUrl(this.pipPictureId):this.pipPicture&&(e=this.pipPicture.uri?this.pipPicture.uri:this.pipPicture.id?this.pipPictureData.getPictureUrl(this.pipPicture.id):null,this.control.uri=this.pipPicture.uri,this.control.name=this.pipPicture.name,this.control.id=this.pipPicture.id),!e)return;this.control.url=e,this.control.uploaded=!0,this.onChange()}},o.prototype.onFocus=function(){var e=this;this.pipPicturePaste.addPasteListener(function(t){e.readItemLocally(t.url,t.uriData,t.file,t.picture)})},o.prototype.onBlur=function(){this.pipPicturePaste.removePasteListener()},o.prototype.savePicture=function(i,r){var n=this;this.control.id?(this.control.uploading=!1,this.pipPicture={id:this.control.id,uri:this.control.uri,name:this.control.name},this.pictureStartState=p.Original,this.control.reset(),i&&i(this.pipPicture)):null!==this.control.file?(this.control.uploading=!0,this.pipFileUpload.upload(this.control.file,this.pipPictureData.postPictureUrl(),function(t,e){e?(n.control.uploading=!1,n.control.upload=!1,n.control.progress=0,n.pictureStartState=p.Error,r?r(e):n.$log.error(e)):(n.pipPictureId=t.id,n.pipPicture={id:t.id,uri:null,name:t.name},n.pictureStartState=p.Original,n.control.reset(),i&&i(n.pipPicture))},function(t,e){n.control.progress=e})):this.control.uri&&this.pipPicture&&(this.control.uploading=!1,this.control.uri&&(this.pipPicture={id:this.control.id,uri:this.control.uri,name:this.control.name},this.pictureStartState=p.Original,this.control.reset(),i&&i(this.pipPicture)))},o.prototype.deletePicture=function(t,e){var i=this;this.pipPictureId?this.pipPictureData.deletePicture(this.pipPictureId,function(){i.pipPictureId=null,i.control.reset(!0),t&&t()},function(t){i.control.uploading=!1,i.control.upload=!1,i.control.progress=0,i.control.state=p.Error,e?e(t):i.$log.error(t)}):(this.control.uploading=!1,this.pipPicture={id:null,uri:null,name:null},this.control.reset(!0),t&&t(this.pipPicture))},o.prototype.saveImage=function(t,e){this.control.state==p.Changed?this.savePicture(t,e):this.control.state==p.Deleted?this.deletePicture(t,e):this.control.state==p.Copied?(this.pipPicture={id:this.control.id,name:this.control.name,uri:this.control.uri},this.pictureStartState=p.Original,this.control.reset(),t(this.pipPicture)):t&&(this.pipPicture?t(this.pipPicture):t(this.pipPictureId))},o.prototype.empty=function(){return""==this.control.url&&!this.control.uploading},o.prototype.isUpdated=function(){return this.control.state!=p.Original},o.prototype.readItemLocally=function(t,e,i,r){r?(this.control.file=null,this.control.name=r.name,this.control.uri=r.uri,this.control.id=r.id,this.control.uriData=null,this.control.url=r.uri?r.uri:r.id?this.pipPictureData.getPictureUrl(r.id):"",this.control.state,p.Copied):(this.control.file=i,this.control.name=i?i.name:t?t.split("/").pop():null,this.control.url=!i&&t?t:e||"",this.control.uri=!i&&t?t:null,this.control.uriData=e,this.control.id=null,this.control.state=p.Changed),this.onChange()},o.prototype.onDeleteClick=function(t){t.stopPropagation(),this.controlElement.focus(),this.control.file=null,this.control.url="",this.control.uri=null,this.control.uriData=null,this.control.name=null,this.control.id=null,this.control.state!=p.Copied&&(this.control.state=p.Deleted),this.onChange()},o.prototype.onKeyDown=function(t){var e=this;13==t.keyCode||32==t.keyCode?setTimeout(function(){e.controlElement.trigger("click")},0):46==t.keyCode||8==t.keyCode?(this.control.file=null,this.control.url="",this.control.state=p.Deleted,this.onChange()):27==t.keyCode&&this.control.reset()},o.prototype.onImageError=function(e){var i=this;this.$scope.$apply(function(){i.control.url="";var t=$(e.target);i.control.state=p.Error,i.pipPictureUtils.setErrorImageCSS(t,{width:"auto",height:"100%"})})},o.prototype.onImageLoad=function(t){var e=$(t.target),i={clientWidth:80,clientHeight:80};this.pipPictureUtils.setImageMarginCSS(i,e),this.control.uploading=!1},o.prototype.onChange=function(){this.pipChanged&&this.pipChanged({$event:{sender:this.control},$control:this.control})},o)};function o(t,e,i,r,n,o,l,a){var c=this;this.$log=t,this.$scope=e,this.$rootScope=i,this.$element=r,this.pipPictureData=n,this.pipPictureUtils=o,this.$timeout=l,this.pipFileUpload=a,this.pipPicturePaste=new u.PicturePaste(l),this.pictureStartState=this.pipAddedPicture?p.Copied:p.Original,this.text=this.text||"PICTURE_EDIT_TEXT",this.icon=this.icon||"picture-no-border",this.errorText="PICTURE_ERROR_LOAD",this.multiUpload=!1,this.control=new s,this.control.state=this.pictureStartState,this.control.reset=function(t){c.resetImage(t)},this.control.save=function(t,e){c.saveImage(t,e)},this.control.abort=function(){c.abort()},r.addClass("pip-picture-edit")}angular.module("pipPictureEdit",["ui.event","pipPicturePaste","pipTranslate","angularFileUpload","pipPictures.Templates"]).config(r).component("pipPictureEdit",n)},{"../utilities/PicturePaste":43}],33:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=t("../utilities/PicturePaste"),a=t("async"),o=function(){};i.PictureListEditItem=o;var p=function(){this.uploading=0};i.PictureListEditControl=p;var d=function(){};d.Added="added",d.Original="original",d.Copied="copied",d.Changed="changed",d.Deleted="deleted",d.Error="error",i.PictureListEditStates=d;function r(){}i.PictureUploadErrors=r;function n(t){t.translations("en",{PICTURE_LIST_EDIT_TEXT:"Click here to add a picture",ERROR_TRANSACTION_IN_PROGRESS:"Transaction is in progress. Please, wait until it is finished or abort",ERROR_IMAGE_PRELOADING:"Image loading error. The picture can not be saved"}),t.translations("ru",{PICTURE_LIST_EDIT_TEXT:"Нажмите сюда чтобы добавить картинку",ERROR_TRANSACTION_IN_PROGRESS:"Транзакция еще не завершена. Подождите окончания или прервите её",ERROR_IMAGE_PRELOADING:"Ошибка при загрузки картинки. Картинка не сохранена."})}n.$inject=["pipTranslateProvider"];var l={bindings:{ngDisabled:"<?",pipCreated:"&?",pipChanged:"&?",pictures:"=?pipPictures",pipAddedPicture:"&?",text:"<?pipDefaultText",icon:"<?pipDefaultIcon",pipRebind:"<?"},templateUrl:"picture_list_edit/PictureListEdit.html",controller:(c.$inject=["$log","$scope","$rootScope","$element","pipPictureUtils","$timeout","pipFileUpload","pipRest","pipPictureData"],c.prototype.toBoolean=function(t){return null!=t&&!!t&&("1"==(t=t.toString().toLowerCase())||"true"==t)},c.prototype.filterItem=function(t){return t.state!=d.Deleted},c.prototype.$postLink=function(){this.controlElement=this.$element.find(".pip-picture-drop"),this.control.reset(),this.pipCreated&&this.pipCreated({$event:{sender:this.control},$control:this.control})},c.prototype.removeItem=function(t){if(t.state===d.Added||t.state===d.Copied){var e=_.findIndex(this.control.items,{pin:t.pin});-1<e&&this.control.items.splice(e,1)}else t.state=d.Deleted},c.prototype.$onChanges=function(t){t.pipRebind&&t.pipRebind.currentValue!==t.pipRebind.previousValue&&(this.pipRebind=t.pipRebind.currentValue),t.ngDisabled&&t.ngDisabled.currentValue!==t.ngDisabled.previousValue&&(this.ngDisabled=t.ngDisabled.currentValue),this.pipRebind&&t.pictures&&!_.isEqual(t.pictures.currentValue,this.pictures)&&(this.pictures=t.pictures.currentValue,this.control.reset()),this.pictures=this.pictures?this.pictures:[]},c.prototype.onImageError=function(t,e){e.state=d.Error,e.url=""},c.prototype.onFocus=function(){var e=this;this.pipPicturePaste.addPasteListener(function(t){e.readItemLocally(t.url,t.uriData,t.file,t.picture)})},c.prototype.onBlur=function(){this.pipPicturePaste.removePasteListener()},c.prototype.getItems=function(){var t,e=[];if(null==this.pictures||0==this.pictures.length)return e;for(t=0;t<this.pictures.length;t++){var i={pin:this.itemPin++,id:this.pictures[t].id,name:this.pictures[t].name,uri:this.pictures[t].uri,uriData:null,uploading:!1,uploaded:!1,progress:0,file:null,url:this.pictures[t].id?this.pipPictureData.getPictureUrl(this.pictures[t].id):this.pictures[t].uri,state:this.pictureStartState};e.push(i)}return e},c.prototype.setItems=function(){var t;for(this.pictures&&0<this.pictures.length&&this.pictures.splice(0,this.pictures.length),t=0;t<this.control.items.length;t++){var e=this.control.items[t];if((e.id||e.uri)&&e.state!=d.Deleted){var i={id:e.id,name:e.name,uri:e.uri};this.pictures.push(i)}}},c.prototype.reset=function(){this.controlElement&&(this.control.uploading=0,this.control.items=this.getItems())},c.prototype.addItem=function(t,e,i){var r=_.findIndex(this.control.items,{pin:t.pin});r<0||(i?(this.control.items[r].uploaded=!1,this.control.items[r].uploading=!1,this.control.items[r].progress=0,this.control.items[r].upload=null,this.control.items[r].state=d.Error):(e?(this.control.items[r].id=e.id,this.control.items[r].name=e.name,this.control.items[r].uploaded=!0,this.control.items[r].state=d.Original):this.control.items[r].uploaded=!1,this.control.items[r].uploading=!1,this.control.items[r].uriData=null,this.control.items[r].progress=0,this.control.items[r].upload=null,this.control.items[r].file=null))},c.prototype.deleteItem=function(t,e){t.upload&&(t.upload.abort(),t.upload=null),t.state==d.Deleted&&(this.removeItem(t),e())},c.prototype.save=function(r,n){var o=this;if(this.control.uploading)n&&n("ERROR_TRANSACTION_IN_PROGRESS");else{this.cancelQuery=null,this.control.error=null,this.control.uploading=0;var l=[],e=[];_.each(this.control.items,function(t){"added"==t.state&&(t.file?l.push(t):e.push(t))});var t=_.filter(this.control.items,{state:"deleted"});if(_.each(e,function(t){t.uploaded=!0,t.uploading=!1,t.progress=0,t.upload=null,t.uriData=null,t.file=null,t.state=d.Original}),!l.length&&!t.length)return 0<e.length&&this.setItems(),this.control.uploading=0,void(r&&r(this.pictures));this.control.uploading=l.length+t.length,a.parallel([function(r){_.each(l,function(t){t.uploading=!0,t.progress=0}),o.pipFileUpload.multiUpload(o.pipPictureData.postPictureUrl(),l,function(t,e,i){var r=l[t];o.addItem(r,e,i),i&&(o.control.error=!0)},function(t,e,i){l[t].progress=i},function(t,e,i){o.cancelQuery=null,r()},function(t){o.cancelQuery=t},!1,"pin")},function(i){t.length?a.each(t,function(t,e){o.deleteItem(t,function(t){e()})},function(t,e){i()}):i()}],function(t,e){if(t&&!o.control.error&&(o.control.error=t),o.control.error){o.control.uploading=0;var i=o.getUploadErors();n?n(i):o.$log.error(i)}else o.setItems(),o.control.uploading=0,r&&r(o.pictures)})}},c.prototype.getUploadErors=function(){var e=[];return _.each(this.control.items,function(t){t.state!=d.Error&&t.state!=d.Error||e.push({id:t.id,uri:t.uri,name:t.name})}),e},c.prototype.abort=function(){var t;for(t=0;t<this.control.items.length;t++){var e=this.control.items[t];e.uploading&&(e.upload&&e.upload.abort(),e.uploaded=!1,e.uploading=!1,e.progress=0,e.upload=null)}this.cancelQuery&&this.cancelQuery.resolve(),this.control.uploading=0,this.control.error=!0},c.prototype.readItemLocally=function(t,e,i,r){var n=new o;n.pin=this.itemPin++,n.uploading=!1,n.uploaded=!1,n.progress=0,r?(n.file=null,n.name=r.name,n.uri=r.uri,n.id=r.id,n.uriData=null,n.url=r.uri?r.uri:r.id?this.pipPictureData.getPictureUrl(r.id):"",n.state,d.Copied):(n.file=i,n.name=i?i.name:t?t.split("/").pop():null,n.url=!i&&t?t:e||"",n.uri=!i&&t?t:null,n.uriData=e,n.id=null,n.state=d.Added),this.control.items.push(n),this.onChange()},c.prototype.onSelectClick=function(t){var e;if(this.controlElement.focus(),null!=t&&0!=t.length)for(e=0;e<t.length;e++){var i=t[e];-1<i.type.indexOf("image")&&this.readItemLocally("",null,i,null)}},c.prototype.onDeleteClick=function(t){this.removeItem(t),this.onChange()},c.prototype.onKeyDown=function(t,e){var i=this;e?46!=t.keyCode&&8!=t.keyCode||(e.state==d.Added?this.removeItem(e):e.state=d.Deleted,this.onChange()):13!=t.keyCode&&32!=t.keyCode||setTimeout(function(){i.controlElement.trigger("click")},0)},c.prototype.onImageLoad=function(i,t){var r=this;setTimeout(function(){var t=$(i.target),e={clientWidth:80,clientHeight:80};r.pipPictureUtils.setImageMarginCSS(e,t)},250),t.loaded=!0},c.prototype.onChange=function(){this.pipChanged&&this.pipChanged({$event:{sender:this.control},$control:this.control})},c)};function c(t,e,i,r,n,o,l,a,c){var u=this;this.$log=t,this.$scope=e,this.$rootScope=i,this.$element=r,this.pipPictureUtils=n,this.$timeout=o,this.pipFileUpload=l,this.pipRest=a,this.pipPictureData=c,this.itemPin=0,this.pipPicturePaste=new s.PicturePaste(o),this.pictureStartState=this.toBoolean(this.pipAddedPicture)?d.Copied:d.Original,this.text=this.text||"PICTURE_LIST_EDIT_TEXT",this.icon=this.icon||"picture-no-border",this.errorText="PICTURE_ERROR_LOAD",this.control=new p,this.control.uploading=0,this.control.items=[],this.control.reset=function(){u.reset()},this.control.save=function(t,e){u.save(t,e)},this.control.abort=function(){u.abort()},r.addClass("pip-picture-list-edit")}angular.module("pipPictureListEdit",["ui.event","pipPicturePaste","pipFocused","angularFileUpload","pipPictures.Templates"]).config(n).component("pipPictureListEdit",l)},{"../utilities/PicturePaste":43,async:1}],34:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0})},{}],35:[function(t,e,i){function r(t){t.translations("en",{PICTURE_FROM_WEBLINK:"Add from web link",LINK_PICTURE:"Link to the picture..."}),t.translations("ru",{PICTURE_FROM_WEBLINK:"Добавить из веб ссылки",LINK_PICTURE:"Ссылка на изображение..."})}r.$inject=["pipTranslateProvider"];var n=(o.$inject=["$log","$scope","$mdDialog","$rootScope","$timeout","$mdMenu","pipPictureUtils"],o.prototype.setImageSize=function(t){var e=t.width(),i={};t.height()<e?(i.width="250px",i.height="auto"):(i.width="auto",i.height="250px"),t.css(i)},o.prototype.checkUrl=function(){var e=this,i=$("img#url_image").on("error",function(){e.invalid=!0,e.$scope.$apply()}).on("load",function(t){e.invalid=!1,e.setImageSize(i),e.$scope.$apply()}).attr("src",this.url)},o.prototype.onCancelClick=function(){this.$mdDialog.cancel()},o.prototype.onAddClick=function(){this.$mdDialog.hide(this.url)},o);function o(t,e,i,r,n,o,l){this.$log=t,this.$scope=e,this.$mdDialog=i,this.$rootScope=r,this.$timeout=n,this.$mdMenu=o,this.pipPictureUtils=l,this.url="",this.invalid=!0,this.theme=this.$rootScope[pip.themes.ThemeRootVar]}angular.module("pipPictureUrlDialog").config(r).controller("pipPictureUrlDialogController",n)},{}],36:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=(n.$inject=["$mdDialog"],n.prototype.show=function(e,t){this._mdDialog.show({templateUrl:"picture_url_dialog/PictureUrlDialog.html",clickOutsideToClose:!0,controller:"pipPictureUrlDialogController",controllerAs:"$ctrl"}).then(function(t){e&&e(t)})},n);function n(t){this._mdDialog=t}angular.module("pipPictureUrlDialog").service("pipPictureUrlDialog",r)},{}],37:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),angular.module("pipPictureUrlDialog",["ngMaterial","pipPictures.Templates"]),t("./IPictureUrlDialogService"),t("./PictureUrlDialogService"),t("./PictureUrlDialogController")},{"./IPictureUrlDialogService":34,"./PictureUrlDialogController":35,"./PictureUrlDialogService":36}],38:[function(t,e,i){function r(t){t.registerOperation("avatars","/api/1.0/avatars/:avatar_id")}r.$inject=["pipRestProvider"],angular.module("pipPictures.Rest").config(r)},{}],39:[function(t,e,i){function r(t){t.registerPagedCollection("imagesets","/api/1.0/imagesets/:imageset_id",{imageset_id:"@imageset_id"},{page:{method:"GET",isArray:!1},update:{method:"PUT"}})}r.$inject=["pipRestProvider"],angular.module("pipPictures.Rest").config(r)},{}],40:[function(t,e,i){function r(t){t.registerPagedCollection("picture","/api/1.0/blobs/:picture_id",{blob_id:"@picture_id"},{page:{method:"GET",isArray:!1},update:{method:"PUT"}}),t.registerResource("picturesInfo","/api/1.0/blobs/:picture_id/info")}r.$inject=["pipRestProvider"],angular.module("pipPictures.Rest").config(r)},{}],41:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),angular.module("pipPictures.Rest",[]),t("./PictureResources"),t("./ImageSetResources"),t("./AvatarResources")},{"./AvatarResources":38,"./ImageSetResources":39,"./PictureResources":40}],42:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});function r(){}i.imageCssParams=r},{}],43:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=(n.$inject=["$timeout"],n.prototype.addPasteListener=function(r){var n=this;window.Clipboard||(null!==this.pasteCatcher&&void 0!==this.pasteCatcher&&this.removePasteListener(),this.pasteCatcher=document.createElement("div"),this.pasteCatcher.setAttribute("contenteditable","true"),$(this.pasteCatcher).css({position:"absolute",left:"-999",width:"0",height:"0",overflow:"hidden",outline:0}),document.body.appendChild(this.pasteCatcher)),$(document).on("paste",function(t){var e;if((e=null==t.clipboardData&&t.originalEvent?t.originalEvent:t).clipboardData){var i=e.clipboardData.items;_.each(i,function(t){if(-1!=t.type.indexOf("image")){var e=t.getAsFile(),i=new FileReader;i.onload=function(t){n.$timeout(function(){r({url:t.target.result,file:e})})},i.readAsDataURL(e)}})}else window.clipboardData&&window.clipboardData.files&&_.each(window.clipboardData.files,function(e){var t=new FileReader;t.onload=function(t){n.$timeout(function(){r({url:t.target.result,file:e})})},t.readAsDataURL(e)})})},n.prototype.removePasteListener=function(){window.Clipboard||null!==this.pasteCatcher&&void 0!==this.pasteCatcher&&(document.body.removeChild(this.pasteCatcher),this.pasteCatcher=null),$(document).off("paste")},n);function n(t){this.$timeout=t}i.PicturePaste=r,angular.module("pipPicturePaste",[])},{}],44:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=[[{flex:100,fullWidth:!0,fullHeight:!0}],[{group:!0,layout:"row",flex:100,fullHeight:!0,children:[{flex:50,fullHeight:!0,rightPadding:!0},{flex:50,fullHeight:!0,leftPadding:!0}]}],[{group:!0,layout:"row",flex:100,fullHeight:!0,children:[{flex:33,fullHeight:!0,rightPadding:!0},{flex:33,fullHeight:!0,leftPadding:!0,rightPadding:!0},{flex:33,fullHeight:!0,leftPadding:!0}]},{group:!0,layout:"row",flex:100,fullHeight:!0,children:[{flex:50,fullHeight:!0,rightPadding:!0},{group:!0,layout:"column",flex:50,fullHeight:!0,children:[{flex:50,leftPadding:!0,bottomPadding:!0},{flex:50,leftPadding:!0,topPadding:!0}]}]},{group:!0,layout:"row",flex:100,fullHeight:!0,children:[{flex:70,fullHeight:!0,rightPadding:!0},{group:!0,layout:"column",flex:30,fullHeight:!0,children:[{flex:50,leftPadding:!0,bottomPadding:!0},{flex:50,leftPadding:!0,topPadding:!0}]}]},{group:!0,layout:"column",flex:100,fullHeight:!0,children:[{flex:50,fullWidth:!0,bottomPadding:!0},{group:!0,layout:"row",flex:50,fullHeight:!0,children:[{flex:50,rightPadding:!0,topPadding:!0},{flex:50,leftPadding:!0,topPadding:!0}]}]}],[{group:!0,layout:"column",flex:100,fullHeight:!0,children:[{group:!0,layout:"row",flex:50,fullHeight:!0,children:[{flex:50,fullWidth:!0,rightPadding:!0,bottomPadding:!0},{flex:50,fullWidth:!0,leftPadding:!0,bottomPadding:!0}]},{group:!0,layout:"row",flex:50,fullHeight:!0,children:[{flex:50,fullWidth:!0,rightPadding:!0,topPadding:!0},{flex:50,fullWidth:!0,leftPadding:!0,topPadding:!0}]}]},{group:!0,layout:"row",flex:100,fullHeight:!0,children:[{flex:50,fullWidth:!0,rightPadding:!0},{group:!0,layout:"column",flex:50,fullHeight:!0,children:[{flex:50,fullWidth:!0,leftPadding:!0,bottomPadding:!0},{group:!0,layout:"row",flex:50,fullHeight:!0,children:[{flex:50,fullWidth:!0,leftPadding:!0,rightPadding:!0,topPadding:!0},{flex:50,fullWidth:!0,leftPadding:!0,topPadding:!0}]}]}]},{group:!0,layout:"row",flex:100,fullHeight:!0,children:[{flex:30,fullWidth:!0,rightPadding:!0},{group:!0,layout:"column",flex:70,fullHeight:!0,children:[{flex:50,fullWidth:!0,leftPadding:!0,bottomPadding:!0},{group:!0,layout:"row",flex:50,fullHeight:!0,children:[{flex:50,fullWidth:!0,leftPadding:!0,rightPadding:!0,topPadding:!0},{flex:50,fullWidth:!0,leftPadding:!0,topPadding:!0}]}]}]},{group:!0,layout:"column",flex:100,fullHeight:!0,children:[{group:!0,layout:"row",flex:50,fullHeight:!0,children:[{flex:100,fullWidth:!0,bottomPadding:!0}]},{group:!0,layout:"row",flex:50,fullHeight:!0,children:[{flex:33,fullWidth:!0,rightPadding:!0,topPadding:!0},{flex:33,fullWidth:!0,leftPadding:!0,rightPadding:!0,topPadding:!0},{flex:33,fullWidth:!0,leftPadding:!0,topPadding:!0}]}]}],[{group:!0,layout:"column",flex:100,fullHeight:!0,children:[{group:!0,layout:"row",flex:50,fullHeight:!0,children:[{flex:50,fullWidth:!0,rightPadding:!0,bottomPadding:!0},{flex:50,fullWidth:!0,leftPadding:!0,bottomPadding:!0}]},{group:!0,layout:"row",flex:50,fullHeight:!0,children:[{flex:33,fullWidth:!0,rightPadding:!0,topPadding:!0},{flex:33,fullWidth:!0,leftPadding:!0,rightPadding:!0,topPadding:!0},{flex:33,fullWidth:!0,leftPadding:!0,topPadding:!0}]}]},{group:!0,layout:"row",flex:100,fullHeight:!0,children:[{flex:50,fullWidth:!0,rightPadding:!0},{group:!0,layout:"column",flex:50,fullHeight:!0,children:[{group:!0,layout:"row",flex:50,fullHeight:!0,children:[{flex:50,fullWidth:!0,leftPadding:!0,rightPadding:!0,bottomPadding:!0},{flex:50,fullWidth:!0,leftPadding:!0,bottomPadding:!0}]},{group:!0,layout:"row",flex:50,fullHeight:!0,children:[{flex:50,fullWidth:!0,leftPadding:!0,rightPadding:!0,topPadding:!0},{flex:50,fullWidth:!0,leftPadding:!0,topPadding:!0}]}]}]},{group:!0,layout:"row",flex:100,fullHeight:!0,children:[{flex:33,fullWidth:!0,rightPadding:!0},{group:!0,layout:"column",flex:67,fullHeight:!0,children:[{group:!0,layout:"row",flex:50,fullHeight:!0,children:[{flex:50,fullWidth:!0,leftPadding:!0,rightPadding:!0,bottomPadding:!0},{flex:50,fullWidth:!0,leftPadding:!0,bottomPadding:!0}]},{group:!0,layout:"row",flex:50,fullHeight:!0,children:[{flex:50,fullWidth:!0,leftPadding:!0,rightPadding:!0,topPadding:!0},{flex:50,fullWidth:!0,leftPadding:!0,topPadding:!0}]}]}]},{group:!0,layout:"column",flex:100,fullHeight:!0,children:[{group:!0,layout:"row",flex:50,fullHeight:!0,children:[{flex:100,fullWidth:!0,bottomPadding:!0}]},{group:!0,layout:"row",flex:50,fullHeight:!0,children:[{flex:25,fullWidth:!0,rightPadding:!0,topPadding:!0},{flex:25,fullWidth:!0,leftPadding:!0,rightPadding:!0,topPadding:!0},{flex:25,fullWidth:!0,leftPadding:!0,rightPadding:!0,topPadding:!0},{flex:25,fullWidth:!0,leftPadding:!0,topPadding:!0}]}]}],[{group:!0,layout:"column",flex:100,fullHeight:!0,children:[{group:!0,layout:"row",flex:50,fullHeight:!0,children:[{flex:33,fullWidth:!0,rightPadding:!0,bottomPadding:!0},{flex:33,fullWidth:!0,leftPadding:!0,rightPadding:!0,bottomPadding:!0},{flex:33,fullWidth:!0,leftPadding:!0,bottomPadding:!0}]},{group:!0,layout:"row",flex:50,fullHeight:!0,children:[{flex:33,fullWidth:!0,rightPadding:!0,topPadding:!0},{flex:33,fullWidth:!0,leftPadding:!0,rightPadding:!0,topPadding:!0},{flex:33,fullWidth:!0,leftPadding:!0,topPadding:!0}]}]},{group:!0,layout:"column",flex:100,fullHeight:!0,children:[{group:!0,layout:"row",flex:50,fullHeight:!0,children:[{flex:50,fullWidth:!0,rightPadding:!0,bottomPadding:!0},{flex:25,fullWidth:!0,leftPadding:!0,rightPadding:!0,bottomPadding:!0},{flex:25,fullWidth:!0,leftPadding:!0,bottomPadding:!0}]},{group:!0,layout:"row",flex:50,fullHeight:!0,children:[{flex:50,fullWidth:!0,rightPadding:!0,topPadding:!0},{flex:25,fullWidth:!0,leftPadding:!0,rightPadding:!0,topPadding:!0},{flex:25,fullWidth:!0,leftPadding:!0,topPadding:!0}]}]},{group:!0,layout:"row",flex:100,fullHeight:!0,children:[{flex:33,fullWidth:!0,rightPadding:!0},{group:!0,layout:"column",flex:67,fullHeight:!0,children:[{group:!0,layout:"row",flex:50,fullHeight:!0,children:[{flex:50,fullWidth:!0,leftPadding:!0,rightPadding:!0,bottomPadding:!0},{flex:50,fullWidth:!0,leftPadding:!0,bottomPadding:!0}]},{group:!0,layout:"row",flex:50,fullHeight:!0,children:[{flex:33,fullWidth:!0,leftPadding:!0,rightPadding:!0,topPadding:!0},{flex:33,fullWidth:!0,leftPadding:!0,rightPadding:!0,topPadding:!0},{flex:33,fullWidth:!0,leftPadding:!0,topPadding:!0}]}]}]},{group:!0,layout:"column",flex:100,fullHeight:!0,children:[{group:!0,layout:"row",flex:50,fullHeight:!0,children:[{flex:50,fullWidth:!0,rightPadding:!0,bottomPadding:!0},{flex:50,fullWidth:!0,leftPadding:!0,bottomPadding:!0}]},{group:!0,layout:"row",flex:50,fullHeight:!0,children:[{flex:25,fullWidth:!0,rightPadding:!0,topPadding:!0},{flex:25,fullWidth:!0,leftPadding:!0,rightPadding:!0,topPadding:!0},{flex:25,fullWidth:!0,leftPadding:!0,rightPadding:!0,topPadding:!0},{flex:25,fullWidth:!0,leftPadding:!0,topPadding:!0}]}]}],[{group:!0,layout:"column",flex:100,fullHeight:!0,children:[{group:!0,layout:"row",flex:50,fullHeight:!0,children:[{flex:33,fullWidth:!0,rightPadding:!0,bottomPadding:!0},{flex:33,fullWidth:!0,leftPadding:!0,rightPadding:!0,bottomPadding:!0},{flex:33,fullWidth:!0,leftPadding:!0,bottomPadding:!0}]},{group:!0,layout:"row",flex:50,fullHeight:!0,children:[{flex:25,fullWidth:!0,rightPadding:!0,topPadding:!0},{flex:25,fullWidth:!0,leftPadding:!0,rightPadding:!0,topPadding:!0},{flex:25,fullWidth:!0,leftPadding:!0,rightPadding:!0,topPadding:!0},{flex:25,fullWidth:!0,leftPadding:!0,topPadding:!0}]}]},{group:!0,layout:"column",flex:100,fullHeight:!0,children:[{group:!0,layout:"row",flex:50,fullHeight:!0,children:[{flex:50,fullWidth:!0,rightPadding:!0,bottomPadding:!0},{flex:25,fullWidth:!0,leftPadding:!0,rightPadding:!0,bottomPadding:!0},{flex:25,fullWidth:!0,leftPadding:!0,bottomPadding:!0}]},{group:!0,layout:"row",flex:50,fullHeight:!0,children:[{flex:25,fullWidth:!0,rightPadding:!0,topPadding:!0},{flex:25,fullWidth:!0,leftPadding:!0,rightPadding:!0,topPadding:!0},{flex:25,fullWidth:!0,leftPadding:!0,rightPadding:!0,topPadding:!0},{flex:25,fullWidth:!0,leftPadding:!0,topPadding:!0}]}]},{group:!0,layout:"row",flex:100,fullHeight:!0,children:[{flex:25,fullWidth:!0,rightPadding:!0},{group:!0,layout:"column",flex:75,fullHeight:!0,children:[{group:!0,layout:"row",flex:50,fullHeight:!0,children:[{flex:33,fullWidth:!0,leftPadding:!0,rightPadding:!0,bottomPadding:!0},{flex:33,fullWidth:!0,leftPadding:!0,rightPadding:!0,bottomPadding:!0},{flex:33,fullWidth:!0,leftPadding:!0,bottomPadding:!0}]},{group:!0,layout:"row",flex:50,fullHeight:!0,children:[{flex:33,fullWidth:!0,leftPadding:!0,rightPadding:!0,topPadding:!0},{flex:33,fullWidth:!0,leftPadding:!0,rightPadding:!0,topPadding:!0},{flex:33,fullWidth:!0,leftPadding:!0,topPadding:!0}]}]}]}],[{group:!0,layout:"column",flex:100,fullHeight:!0,fullWidth:!0,children:[{group:!0,layout:"row",flex:50,fullWidth:!0,children:[{flex:25,fullWidth:!0,rightPadding:!0,bottomPadding:!0},{flex:25,fullWidth:!0,leftPadding:!0,rightPadding:!0,bottomPadding:!0},{flex:25,fullWidth:!0,leftPadding:!0,rightPadding:!0,bottomPadding:!0},{flex:25,fullWidth:!0,leftPadding:!0,bottomPadding:!0}]},{group:!0,layout:"row",flex:50,fullWidth:!0,children:[{flex:25,fullWidth:!0,rightPadding:!0,topPadding:!0},{flex:25,fullWidth:!0,leftPadding:!0,rightPadding:!0,topPadding:!0},{flex:25,fullWidth:!0,leftPadding:!0,rightPadding:!0,topPadding:!0},{flex:25,fullWidth:!0,leftPadding:!0,topPadding:!0}]}]}]],n=(o.prototype.getCollageSchemes=function(){return r},o.prototype.setErrorImageCSS=function(t,e){var i={width:"","margin-left":"",height:"","margin-top":""};e&&(i=_.assign(i,e)),t&&t.css(i)},o.prototype.setImageMarginCSS=function(t,e,i){var r=t.width?t.width():t.clientWidth,n=t.height?t.height():t.clientHeight,o=e[0].naturalWidth||e.width,l=e[0].naturalHeight||e.height,a=0,c={};l/n<o/r?(a=-(o/l*n-r)/2,c["margin-left"]=a+"px",c.height=n+"px",c.width=o*n/l+"px",c["margin-top"]=""):(a=-(l/o*r-n)/2,c["margin-top"]=a+"px",c.height=l*r/o+"px",c.width=r+"px",c["margin-left"]=""),i&&(c=_.assign(c,i)),e.css(c)},o.prototype.setIconMarginCSS=function(t,e){var i=t.clientWidth?t.clientWidth:t.width,r=t.clientHeight?t.clientHeight:t.height,n=0,o=r<i?r:i,l={width:o+"px","margin-left":"",height:o+"px","margin-top":""};r<i?(n=(i-r)/2,l["margin-left"]=n+"px"):(n=(r-i)/2,l["margin-top"]=n+"px"),e.css(l)},o);function o(){}var l=(a.prototype.$get=function(){return null==this._service&&(this._service=new n),this._service},a);function a(){}angular.module("pipPictureUtils",[]).provider("pipPictureUtils",l)},{}],45:[function(t,e,i){"use strict";function r(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}Object.defineProperty(i,"__esModule",{value:!0}),t("./IPictureUtils"),t("./PictureUtils"),t("./PicturePaste"),r(t("./IPictureUtils")),r(t("./PicturePaste"))},{"./IPictureUtils":42,"./PicturePaste":43,"./PictureUtils":44}],46:[function(t,e,i){!function(e){try{e=angular.module("pipPictures.Templates")}catch(t){e=angular.module("pipPictures.Templates",[])}e.run(["$templateCache",function(t){t.put("add_image/AddImage.html",'<md-menu><ng-transclude class="pip-add-image-open-button" ng-click="vm.openMenu($mdOpenMenu)" xxxng-click="vm.ngDisabled() ? \'\' : $mdOpenMenu()"></ng-transclude><md-menu-content width="4"><md-menu-item ng-if="vm.option.Upload"><md-button class="layout-row layout-align-start-center" accept="image/*" ng-keydown="vm.onKeyDown($event)" ng-multiple="vm.isMulti()" ng-file-select="" ng-file-change="vm.onFileChange($files)" ng-click="vm.hideMenu()" ng-file-drop=""><md-icon class="text-headline text-grey rm24-flex" md-svg-icon="icons:folder"></md-icon><span class="text-grey">{{ ::\'FILE\' | translate }}</span></md-button></md-menu-item><md-menu-item ng-if="vm.option.WebLink"><md-button class="layout-row layout-align-start-center" ng-click="vm.onWebLinkClick()"><md-icon class="text-headline text-grey rm24-flex" md-svg-icon="icons:weblink"></md-icon><span class="text-grey">{{ ::\'WEB_LINK\' | translate }}</span></md-button></md-menu-item><md-menu-item ng-if="vm.option.Camera"><md-button class="layout-row layout-align-start-center" ng-click="vm.onCameraClick()"><md-icon class="text-headline text-grey rm24-flex" md-svg-icon="icons:camera"></md-icon><span class="text-grey">{{ ::\'CAMERA\' | translate }}</span></md-button></md-menu-item><md-menu-item ng-if="vm.option.Galery"><md-button class="layout-row layout-align-start-center" ng-click="vm.onGalleryClick()"><md-icon class="text-headline text-grey rm24-flex" md-svg-icon="icons:images"></md-icon><span class="text-grey">{{ ::\'IMAGE_GALLERY\' | translate }}</span></md-button></md-menu-item></md-menu-content></md-menu>')}])}(),function(e){try{e=angular.module("pipPictures.Templates")}catch(t){e=angular.module("pipPictures.Templates",[])}e.run(["$templateCache",function(t){t.put("camera_dialog/CameraDialog.html",'<md-dialog class="pip-dialog pip-picture-dialog pip-camera-dialog layout-column" md-theme="{{$ctrl.theme}}" ng-show="$ctrl.browser != \'android\'" ng-class="{\'pip-android-dialog\': $ctrl.browser == \'android\' || !$ctrl.browser}"><div class="pip-header"><md-button ng-click="$ctrl.onCancelClick()" class="md-icon-button" aria-label="{{ ::\'CANCEL\' | translate }}"><md-icon class="text-grey" md-svg-icon="icons:arrow-left"></md-icon></md-button><h3 class="m0 text-title">{{ ::\'TAKE_PICTURE\' | translate }}</h3></div><div class="pip-body"><div class="camera-stream" ng-hide="$ctrl.webCamError || $ctrl.browser == \'android\'"></div><div class="camera-error" ng-show="$ctrl.webCamError || $ctrl.browser == \'android\'"><span>{{ ::\'WEB_CAM_ERROR\' | translate }}</span></div></div><div class="pip-footer"><div class="w48"><md-button ng-click="$ctrl.onResetPicture()" ng-hide="!$ctrl.freeze || $ctrl.webCamError" class="md-icon-button" ng-disabled="transaction.busy()" aria-label="{{ ::\'REMOVE_PICTURE\' | translate }}"><md-icon class="text-grey" md-svg-icon="icons:refresh"></md-icon></md-button></div><div class="flex"></div><div class="w48"><md-button ng-click="$ctrl.onTakePictureClick()" ng-hide="$ctrl.webCamError" class="md-icon-button" aria-label="{{ ::\'TAKE_PICTURE\' | translate }}"><md-icon class="text-grey icon-button" md-svg-icon="icons:{{$ctrl.freeze ? \'check\' : \'camera\'}}"></md-icon></md-button></div><div class="flex"></div><div class="w48"><md-button ng-click="$ctrl.onCancelClick()" class="md-icon-button" aria-label="{{ ::\'CANCEL\' | translate }}"><md-icon class="text-grey" md-svg-icon="icons:cross"></md-icon></md-button></div></div></md-dialog>')}])}(),function(e){try{e=angular.module("pipPictures.Templates")}catch(t){e=angular.module("pipPictures.Templates",[])}e.run(["$templateCache",function(t){t.put("gallery_search_dialog/GallerySearchDialog.html",'<md-dialog class="pip-dialog pip-gallery-search-dialog pip-picture-dialog layout-column" md-theme="{{ $ctrl.theme }}"><md-progress-linear ng-show="$ctrl.transaction.busy()" md-mode="indeterminate"></md-progress-linear><md-dialog-content class="pip-body lp0 rp0 tp0 pip-scroll flex layout-row"><div class="layout-column layout-align-start-start flex"><div class="pip-header w-stretch layout-column layout-align-start-start"><h3 class="w-stretch text-title m0 bp8"><md-button class="md-icon-button m0" ng-click="$ctrl.onCancelClick()" aria-label="{{ ::\'CANCEL\' | translate }}"><md-icon class="text-grey" md-svg-icon="icons:arrow-left"></md-icon></md-button>{{ ::\'IMAGE_GALLERY\' | translate }}</h3><div class="w-stretch divider-bottom layout-row layout-start-center"><input class="no-divider rm8 text-subhead1 flex" ng-disabled="$ctrl.transaction.busy()" ng-model="$ctrl.search" ng-keypress="$ctrl.onKeyPress($event)" placeholder="{{ ::\'SEARCH_PICTURES\' | translate }}" type="text" tabindex="1"><md-button class="md-icon-button md-icon-button-square p0 pip-search-button md-primary" ng-click="$ctrl.onSearchClick()" ng-hide="$ctrl.optionDefault" tabindex="-1" aria-label="SEARCH"><md-icon class="text-opacity md-primary" md-svg-icon="icons:search-square"></md-icon></md-button></div></div><div class="pip-content flex" ng-show="$ctrl.imagesSearchResult.length > 0"><div class="pip-image-container" ng-click="$ctrl.onImageClick(image)" ng-repeat="image in $ctrl.imagesSearchResult track by $index" ng-class="{\'checked\': image.checked}" tabindex="{{ $index + 2 }}"><pip-picture pip-src="image.thumbnail" pip-default-icon="icon-images" pip-rebind="true"></pip-picture><div class="pip-checked-cover"></div><div class="pip-checkbox-backdrop"><md-checkbox md-no-ink="" ng-model="image.checked" ng-click="image.checked = !image.checked" aria-label="CHECKED"></md-checkbox></div></div></div><div class="pip-no-images w-stretch layout-column layout-align-center-center flex" ng-show="$ctrl.imagesSearchResult.length == 0"><img src="images/add_from_image_library.svg" width="200" height="200"><p class="text-secondary opacity-secondary text-center">{{ ::\'IMAGE_START_SEARCH\' | translate }}</p></div></div></md-dialog-content><div class="pip-footer"><md-button ng-click="$ctrl.onCancelClick()" ng-hide="$ctrl.transaction.busy()" aria-label="{{ ::\'CANCEL\' | translate }}" tabindex="{{ $ctrl.imagesSearchResult.length + 3 }}"><span class="text-grey">{{ ::\'CANCEL\' | translate }}</span></md-button><md-button ng-if="transaction.busy()" ng-click="$ctrl.onStopSearchClick()" class="md-raised md-warn m0" tabindex="5" aria-label="ABORT" pip-test="button-cancel">{{ ::\'CANCEL\' | translate }}</md-button><md-button class="md-accent" ng-hide="$ctrl.transaction.busy()" ng-disabled="$ctrl.addButtonDisabled()" ng-click="$ctrl.onAddClick()" aria-label="{{ ::\'ADD\' | translate }}" tabindex="{{ $ctrl.imagesSearchResult.length + 4 }}">{{ ::\'ADD\' | translate }}</md-button></div></md-dialog>')}])}(),function(e){try{e=angular.module("pipPictures.Templates")}catch(t){e=angular.module("pipPictures.Templates",[])}e.run(["$templateCache",function(t){t.put("picture_edit/PictureEdit.html",'<div class="pip-picture-upload pip-picture-drop md-focused" ng-keydown="$ctrl.onKeyDown($event)" ng-class="{\'pip-picture-error\': $ctrl.control.state == \'error\'}" tabindex="{{ $ctrl.ngDisabled || $ctrl.control.uploading ? -1 : 0 }}" pip-changed="$ctrl.readItemLocally(url, uriData, file, picture)" ng-disabled="$ctrl.ngDisabled" pip-multi="$ctrl.multiUpload" ng-focus="$ctrl.onFocus()" ng-blur="$ctrl.onBlur()" pip-option="$ctrl.option" pip-add-image=""><div class="pip-default-icon" ng-show="$ctrl.empty() || $ctrl.control.state == \'error\'"><md-icon class="pip-picture-icon" md-svg-icon="icons:{{ $ctrl.icon }}"></md-icon></div><div class="pip-default-text" ng-show="$ctrl.control.state == \'error\'"><span>{{ $ctrl.errorText | translate }}</span></div><div class="pip-default-text" ng-show="$ctrl.empty() && $ctrl.control.state != \'error\'"><span>{{ $ctrl.text | translate }}</span></div><img class="pip-picture-image" ng-src="{{ $ctrl.control.url }}" ng-show="!$ctrl.empty() && $ctrl.control.state != \'error\'" ng-class="{ \'pip-image-new\': $ctrl.isUpdated(), \'cursor-default\' : $ctrl.ngDisabled || $ctrl.control.uploading }" ui-event="{ error: \'$ctrl.onImageError($event)\', load: \'$ctrl.onImageLoad($event)\' }"><md-button class="md-icon-button" ng-click="$ctrl.onDeleteClick($event)" tabindex="-1" aria-label="delete" ng-hide="$ctrl.empty() || $ctrl.ngDisabled" ng-disabled="$ctrl.ngDisabled || $ctrl.control.uploading"><md-icon md-svg-icon="icons:cross"></md-icon></md-button><md-progress-linear ng-show="$ctrl.control.uploading" ng-value="$ctrl.control.progress"></md-progress-linear></div>')}])}(),function(e){try{e=angular.module("pipPictures.Templates")}catch(t){e=angular.module("pipPictures.Templates",[])}e.run(["$templateCache",function(t){t.put("picture_list_edit/PictureListEdit.html",'<div pip-focused=""><div class="pip-picture-upload pointer pip-focusable" ng-class="{\'pip-picture-error\': item.state == \'error\'}" ng-keydown="$ctrl.onKeyDown($event, item)" tabindex="{{ $ctrl.ngDisabled ? -1 : 0 }}" ng-repeat="item in $ctrl.control.items | filter: $ctrl.filterItem"><div class="pip-default-icon" ng-hide="item.loaded || item.state == \'error\'"><md-icon pip-cancel-drag="true" class="pip-picture-icon" md-svg-icon="icons:{{ $ctrl.icon }}"></md-icon></div><div class="pip-default-text" ng-show="$ctrl.control.state == \'error\'"><span>{{ $ctrl.errorText | translate }}</span></div><img ng-src="{{ ::item.url }}" pip-cancel-drag="true" ng-hide="item.state == \'error\'" ng-class="{ \'pip-image-new\': item.state == \'added\' }" ui-event="{ error: \'$ctrl.onImageError($event, item)\', load: \'$ctrl.onImageLoad($event, item)\' }"><md-button ng-click="$ctrl.onDeleteClick(item)" ng-hide="$ctrl.ngDisabled || $ctrl.control.uploading" ng-disabled="$ctrl.ngDisabled || $ctrl.control.uploading" tabindex="-1" aria-label="delete" class="md-icon-button"><md-icon pip-cancel-drag="true" md-svg-icon="icons:cross"></md-icon></md-button><md-progress-linear md-mode="indeterminate" ng-show="item.uploading" value="{{ item.progress }}"></md-progress-linear></div><button class="pip-picture-upload pip-picture-drop pip-focusable" pip-add-image="" pip-multi="true" ng-focus="$ctrl.onFocus()" ng-blur="$ctrl.onBlur()" pip-changed="$ctrl.readItemLocally(url, uriData, file, picture)" ng-disabled="$ctrl.ngDisabled || $ctrl.control.uploading"><div class="pip-default-icon"><md-icon pip-cancel-drag="true" class="pip-picture-icon" md-svg-icon="icons:{{ $ctrl.icon }}"></md-icon></div><div class="pip-default-text"><span>{{ $ctrl.text | translate }}</span></div></button><div class="clearfix"></div></div>')}])}(),function(e){try{e=angular.module("pipPictures.Templates")}catch(t){e=angular.module("pipPictures.Templates",[])}e.run(["$templateCache",function(t){t.put("picture_url_dialog/PictureUrlDialog.html",'<md-dialog class="pip-dialog pip-picture-url-dialog pip-picture-dialog layout-column" md-theme="{{ $ctrl.theme }}"><md-dialog-content class="pip-body lp0 rp0 tp0 pip-scroll"><div class="pip-header bm16 layout-row layout-align-start-center"><md-button ng-click="$ctrl.onCancelClick()" class="md-icon-button lm0" aria-label="{{ ::\'CANCEL\' | translate }}"><md-icon class="text-grey" md-svg-icon="icons:arrow-left"></md-icon></md-button><h3 class="text-title m0">{{ ::\'PICTURE_FROM_WEBLINK\' | translate}}</h3></div><div class="pip-content lm6 rm16"><md-input-container md-no-float="" class="w-stretch text-subhead1"><input type="text" ng-model="$ctrl.url" ng-change="$ctrl.checkUrl()" placeholder="{{ ::\'LINK_PICTURE\' | translate }}"></md-input-container><div class="w-stretch layout-row layout-align-center-center" ng-hide="$ctrl.invalid"><img id="url_image"></div><div class="pip-no-images layout-row layout-align-center-center" ng-show="$ctrl.invalid"><md-icon class="text-grey" md-svg-icon="icons:images"></md-icon></div></div></md-dialog-content><div class="pip-footer"><md-button ng-click="$ctrl.onCancelClick()" aria-label="{{ ::\'CANCEL\' | translate }}">{{ ::\'CANCEL\' | translate }}</md-button><md-button class="md-accent" ng-click="$ctrl.onAddClick()" ng-disabled="$ctrl.invalid" aria-label="{{ ::\'ADD\' | translate }}">{{ ::\'ADD\' | translate }}</md-button></div></md-dialog>')}])}()},{}]},{},[46,30])(46)});


!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;((e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).pip||(e.pip={})).documents=t()}}(function(){return function r(c,u,l){function s(e,t){if(!u[e]){if(!c[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(a)return a(e,!0);var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}var o=u[e]={exports:{}};c[e][0].call(o.exports,function(t){return s(c[e][1][t]||t)},o,o.exports,r,c,u,l)}return u[e].exports}for(var a="function"==typeof require&&require,t=0;t<l.length;t++)s(l[t]);return s}({1:[function(t,B,e){(function(P,N,F){!function(){var t,g={};function v(){}function l(t){return t}function e(t){return!!t}function n(t){return!t}var i="object"==typeof self&&self.self===self&&self||"object"==typeof N&&N.global===N&&N||this;function a(t){return function(){if(null===t)throw new Error("Callback was already called.");t.apply(this,arguments),t=null}}function D(t){return function(){null!==t&&(t.apply(this,arguments),t=null)}}null!=i&&(t=i.async),g.noConflict=function(){return i.async=t,g};var o=Object.prototype.toString,y=Array.isArray||function(t){return"[object Array]"===o.call(t)};function c(t){return y(t)||"number"==typeof t.length&&0<=t.length&&t.length%1==0}function b(t,e){for(var n=-1,i=t.length;++n<i;)e(t[n],n,t)}function s(t,e){for(var n=-1,i=t.length,o=Array(i);++n<i;)o[n]=e(t[n],n,t);return o}function r(t){return s(Array(t),function(t,e){return e})}function _(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var $=Object.keys||function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e};function p(t){var e,n,i=-1;return c(t)?(e=t.length,function(){return++i<e?i:null}):(n=$(t),e=n.length,function(){return++i<e?n[i]:null})}function T(i,o){return o=null==o?i.length-1:+o,function(){for(var t=Math.max(arguments.length-o,0),e=Array(t),n=0;n<t;n++)e[n]=arguments[n+o];switch(o){case 0:return i.call(this,e);case 1:return i.call(this,arguments[0],e)}}}function u(i){return function(t,e,n){return i(t,n)}}var d="function"==typeof F&&F,m=d?function(t){d(t)}:function(t){setTimeout(t,0)};function f(s){return function(n,i,o){o=D(o||v);var r=p(n=n||[]);if(s<=0)return o(null);var c=!1,u=0,l=!1;!function e(){if(c&&u<=0)return o(null);for(;u<s&&!l;){var t=r();if(null===t)return c=!0,void(u<=0&&o(null));u+=1,i(n[t],t,a(function(t){--u,t?(o(t),l=!0):e()}))}}()}}function h(i){return function(t,e,n){return i(g.eachOf,t,e,n)}}function E(o){return function(t,e,n,i){return o(f(e),t,n,i)}}function w(i){return function(t,e,n){return i(g.eachOfSeries,t,e,n)}}function I(t,e,o,n){n=D(n||v);var r=c(e=e||[])?[]:{};t(e,function(t,n,i){o(t,function(t,e){r[n]=e,i(t)})},function(t){n(t,r)})}function C(t,e,o,n){var r=[];t(e,function(e,n,i){o(e,function(t){t&&r.push({index:n,value:e}),i()})},function(){n(s(r.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})}function O(t,e,n,i){C(t,e,function(t,e){n(t,function(t){e(!t)})},i)}function R(c,u,l){return function(t,e,i,o){function n(){o&&o(l(!1,void 0))}function r(e,t,n){if(!o)return n();i(e,function(t){o&&u(t)&&(o(l(!0,e)),o=i=!1),n()})}3<arguments.length?c(t,e,r,n):(o=i,i=e,c(t,r,n))}}function k(t,e){return e}function L(t,e,n){n=n||v;var o=c(e)?[]:{};t(e,function(t,n,i){t(T(function(t,e){e.length<=1&&(e=e[0]),o[n]=e,i(t)}))},function(t){n(t,o)})}function x(t,e,i,n){var o=[];t(e,function(t,e,n){i(t,function(t,e){o=o.concat(e||[]),n(t)})},function(t){n(t,o)})}function A(i,t,e){if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");function n(n,t,i,o){if(null!=o&&"function"!=typeof o)throw new Error("task callback must be a function");if(n.started=!0,y(t)||(t=[t]),0===t.length&&n.idle())return g.setImmediate(function(){n.drain()});b(t,function(t){var e={data:t,callback:o||v};i?n.tasks.unshift(e):n.tasks.push(e),n.tasks.length===n.concurrency&&n.saturated()}),g.setImmediate(n.process)}function o(e,n){return function(){--r;var i=!1,t=arguments;b(n,function(n){b(c,function(t,e){t!==n||i||(c.splice(e,1),i=!0)}),n.callback.apply(n,t)}),e.tasks.length+r===0&&e.drain(),e.process()}}var r=0,c=[],u={tasks:[],concurrency:t,payload:e,saturated:v,empty:v,drain:v,started:!1,paused:!1,push:function(t,e){n(u,t,!1,e)},kill:function(){u.drain=v,u.tasks=[]},unshift:function(t,e){n(u,t,!0,e)},process:function(){for(;!u.paused&&r<u.concurrency&&u.tasks.length;){var t=u.payload?u.tasks.splice(0,u.payload):u.tasks.splice(0,u.tasks.length),e=s(t,function(t){return t.data});0===u.tasks.length&&u.empty(),r+=1,c.push(t[0]);var n=a(o(u,t));i(e,n)}},length:function(){return u.tasks.length},running:function(){return r},workersList:function(){return c},idle:function(){return u.tasks.length+r===0},pause:function(){u.paused=!0},resume:function(){if(!1!==u.paused){u.paused=!1;for(var t=Math.min(u.concurrency,u.tasks.length),e=1;e<=t;e++)g.setImmediate(u.process)}}};return u}function U(n){return T(function(t,e){t.apply(null,e.concat([T(function(t,e){"object"==typeof console&&(t?console.error&&console.error(t):console[n]&&b(e,function(t){console[n](t)}))})]))})}function S(i){return function(t,e,n){i(r(t),e,n)}}function M(r){return T(function(e,t){var n=T(function(i){var o=this,t=i.pop();return r(e,function(t,e,n){t.apply(o,i.concat([n]))},t)});return t.length?n.apply(this,t):n})}function j(i){return T(function(t){var e=t.pop();t.push(function(){var t=arguments;n?g.setImmediate(function(){e.apply(null,t)}):e.apply(null,t)});var n=!0;i.apply(this,t),n=!1})}"object"==typeof P&&"function"==typeof P.nextTick?g.nextTick=P.nextTick:g.nextTick=m,g.setImmediate=d?m:g.nextTick,g.forEach=g.each=function(t,e,n){return g.eachOf(t,u(e),n)},g.forEachSeries=g.eachSeries=function(t,e,n){return g.eachOfSeries(t,u(e),n)},g.forEachLimit=g.eachLimit=function(t,e,n,i){return f(e)(t,u(n),i)},g.forEachOf=g.eachOf=function(t,e,n){n=D(n||v);for(var i,o=p(t=t||[]),r=0;null!=(i=o());)r+=1,e(t[i],i,a(c));function c(t){r--,t?n(t):null===i&&r<=0&&n(null)}0===r&&n(null)},g.forEachOfSeries=g.eachOfSeries=function(t,i,o){o=D(o||v);var r=p(t=t||[]),c=r();!function e(){var n=!0;if(null===c)return o(null);i(t[c],c,a(function(t){if(t)o(t);else{if(null===(c=r()))return o(null);n?g.setImmediate(e):e()}})),n=!1}()},g.forEachOfLimit=g.eachOfLimit=function(t,e,n,i){f(e)(t,n,i)},g.map=h(I),g.mapSeries=w(I),g.mapLimit=E(I),g.inject=g.foldl=g.reduce=function(t,i,o,e){g.eachOfSeries(t,function(t,e,n){o(i,t,function(t,e){i=e,n(t)})},function(t){e(t,i)})},g.foldr=g.reduceRight=function(t,e,n,i){var o=s(t,l).reverse();g.reduce(o,e,n,i)},g.transform=function(t,i,o,e){3===arguments.length&&(e=o,o=i,i=y(t)?[]:{}),g.eachOf(t,function(t,e,n){o(i,t,e,n)},function(t){e(t,i)})},g.select=g.filter=h(C),g.selectLimit=g.filterLimit=E(C),g.selectSeries=g.filterSeries=w(C),g.reject=h(O),g.rejectLimit=E(O),g.rejectSeries=w(O),g.any=g.some=R(g.eachOf,e,l),g.someLimit=R(g.eachOfLimit,e,l),g.all=g.every=R(g.eachOf,n,n),g.everyLimit=R(g.eachOfLimit,n,n),g.detect=R(g.eachOf,l,k),g.detectSeries=R(g.eachOfSeries,l,k),g.detectLimit=R(g.eachOfLimit,l,k),g.sortBy=function(t,e,n){function i(t,e){var n=t.criteria,i=e.criteria;return n<i?-1:i<n?1:0}g.map(t,function(n,i){e(n,function(t,e){t?i(t):i(null,{value:n,criteria:e})})},function(t,e){if(t)return n(t);n(null,s(e.sort(i),function(t){return t.value}))})},g.auto=function(u,l,s){"function"==typeof l&&(s=l,l=null),s=D(s||v);var t=$(u),e=t.length;if(!e)return s(null);l=l||e;var a={},p=0,d=!1,m=[];function f(t){m.unshift(t)}function h(){e--,b(m.slice(0),function(t){t()})}f(function(){e||s(null,a)}),b(t,function(r){if(!d){for(var t,n=y(u[r])?u[r]:[u[r]],i=T(function(t,e){if(p--,e.length<=1&&(e=e[0]),t){var n={};o=function(t,e){n[e]=t},b($(i=a),function(t){o(i[t],t)}),n[r]=e,d=!0,s(t,n)}else a[r]=e,g.setImmediate(h);var i,o}),e=n.slice(0,n.length-1),o=e.length;o--;){if(!(t=u[e[o]]))throw new Error("Has nonexistent dependency in "+e.join(", "));if(y(t)&&0<=_(t,r))throw new Error("Has cyclic dependencies")}c()?(p++,n[n.length-1](i,a)):f(function t(){c()&&(p++,0<=(e=_(m,t))&&m.splice(e,1),n[n.length-1](i,a));var e})}function c(){return p<l&&(i=function(t,e){return t&&a.hasOwnProperty(e)},o=!0,b(e,function(t,e,n){o=i(o,t,e,n)}),o)&&!a.hasOwnProperty(r);var i,o}})},g.retry=function(t,e,n){var r=[],c={times:5,interval:0};var i=arguments.length;if(i<1||3<i)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");function o(n,e){function t(t,i){return function(n){t(function(t,e){n(!t||i,{err:t,result:e})},e)}}function i(e){return function(t){setTimeout(function(){t(null)},e)}}for(;c.times;){var o=!--c.times;r.push(t(c.task,o)),!o&&0<c.interval&&r.push(i(c.interval))}g.series(r,function(t,e){e=e[e.length-1],(n||c.callback)(e.err,e.result)})}return i<=2&&"function"==typeof t&&(n=e,e=t),"function"!=typeof t&&function(t,e){if("number"==typeof e)t.times=parseInt(e,10)||5;else{if("object"!=typeof e)throw new Error("Unsupported argument type for 'times': "+typeof e);t.times=parseInt(e.times,10)||5,t.interval=parseInt(e.interval,10)||0}}(c,t),c.callback=n,c.task=e,c.callback?o():o},g.waterfall=function(t,r){if(r=D(r||v),!y(t)){var e=new Error("First argument to waterfall must be an array of functions");return r(e)}if(!t.length)return r();!function i(o){return T(function(t,e){if(t)r.apply(null,[t].concat(e));else{var n=o.next();n?e.push(i(n)):e.push(r),j(o).apply(null,e)}})}(g.iterator(t))()},g.parallel=function(t,e){L(g.eachOf,t,e)},g.parallelLimit=function(t,e,n){L(f(e),t,n)},g.series=function(t,e){L(g.eachOfSeries,t,e)},g.iterator=function(i){return function t(e){function n(){return i.length&&i[e].apply(null,arguments),n.next()}return n.next=function(){return e<i.length-1?t(e+1):null},n}(0)},g.apply=T(function(e,n){return T(function(t){return e.apply(null,n.concat(t))})}),g.concat=h(x),g.concatSeries=w(x),g.whilst=function(n,i,o){if(o=o||v,n()){var r=T(function(t,e){t?o(t):n.apply(this,e)?i(r):o.apply(null,[null].concat(e))});i(r)}else o(null)},g.doWhilst=function(t,e,n){var i=0;return g.whilst(function(){return++i<=1||e.apply(this,arguments)},t,n)},g.until=function(t,e,n){return g.whilst(function(){return!t.apply(this,arguments)},e,n)},g.doUntil=function(t,e,n){return g.doWhilst(t,function(){return!e.apply(this,arguments)},n)},g.during=function(n,i,o){o=o||v;var r=T(function(t,e){t?o(t):(e.push(c),n.apply(this,e))}),c=function(t,e){t?o(t):e?i(r):o(null)};n(c)},g.doDuring=function(t,e,n){var i=0;g.during(function(t){i++<1?t(null,!0):e.apply(this,arguments)},t,n)},g.queue=function(n,t){return A(function(t,e){n(t[0],e)},t,1)},g.priorityQueue=function(t,e){function r(t,e){return t.priority-e.priority}function i(n,t,i,o){if(null!=o&&"function"!=typeof o)throw new Error("task callback must be a function");if(n.started=!0,y(t)||(t=[t]),0===t.length)return g.setImmediate(function(){n.drain()});b(t,function(t){var e={data:t,priority:i,callback:"function"==typeof o?o:v};n.tasks.splice(function(t,e,n){for(var i=-1,o=t.length-1;i<o;){var r=i+(o-i+1>>>1);0<=n(e,t[r])?i=r:o=r-1}return i}(n.tasks,e,r)+1,0,e),n.tasks.length===n.concurrency&&n.saturated(),g.setImmediate(n.process)})}var o=g.queue(t,e);return o.push=function(t,e,n){i(o,t,e,n)},delete o.unshift,o},g.cargo=function(t,e){return A(t,1,e)},g.log=U("log"),g.dir=U("dir"),g.memoize=function(n,i){var r={},c={},u=Object.prototype.hasOwnProperty;i=i||l;var t=T(function(t){var e=t.pop(),o=i.apply(null,t);u.call(r,o)?g.setImmediate(function(){e.apply(null,r[o])}):u.call(c,o)?c[o].push(e):(c[o]=[e],n.apply(null,t.concat([T(function(t){r[o]=t;var e=c[o];delete c[o];for(var n=0,i=e.length;n<i;n++)e[n].apply(null,t)})])))});return t.memo=r,t.unmemoized=n,t},g.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},g.times=S(g.map),g.timesSeries=S(g.mapSeries),g.timesLimit=function(t,e,n,i){return g.mapLimit(r(t),e,n,i)},g.seq=function(){var e=arguments;return T(function(t){var i=this,n=t[t.length-1];"function"==typeof n?t.pop():n=v,g.reduce(e,t,function(t,e,n){e.apply(i,t.concat([T(function(t,e){n(t,e)})]))},function(t,e){n.apply(i,[t].concat(e))})})},g.compose=function(){return g.seq.apply(null,Array.prototype.reverse.call(arguments))},g.applyEach=M(g.eachOf),g.applyEachSeries=M(g.eachOfSeries),g.forever=function(t,e){var n=a(e||v),i=j(t);!function t(e){if(e)return n(e);i(t)}()},g.ensureAsync=j,g.constant=T(function(t){var e=[null].concat(t);return function(t){return t.apply(this,e)}}),g.wrapSync=g.asyncify=function(r){return T(function(t){var e,n,i,o=t.pop();try{e=r.apply(this,t)}catch(t){return o(t)}("function"==(i=typeof(n=e))||"object"==i&&n)&&"function"==typeof e.then?e.then(function(t){o(null,t)}).catch(function(t){o(t.message?t:new Error(t))}):o(null,e)})},"object"==typeof B&&B.exports?B.exports=g:i.async=g}()}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("timers").setImmediate)},{_process:2,timers:3}],2:[function(t,e,n){var i,o,r=e.exports={};function c(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function l(e){if(i===setTimeout)return setTimeout(e,0);if((i===c||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:c}catch(t){i=c}try{o="function"==typeof clearTimeout?clearTimeout:u}catch(t){o=u}}();var s,a=[],p=!1,d=-1;function m(){p&&s&&(p=!1,s.length?a=s.concat(a):d=-1,a.length&&f())}function f(){if(!p){var t=l(m);p=!0;for(var e=a.length;e;){for(s=a,a=[];++d<e;)s&&s[d].run();d=-1,e=a.length}s=null,p=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===u||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(t)}}function h(t,e){this.fun=t,this.array=e}function g(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];a.push(new h(t,e)),1!==a.length||p||l(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},{}],3:[function(l,t,s){(function(t,e){var i=l("process/browser.js").nextTick,n=Function.prototype.apply,o=Array.prototype.slice,r={},c=0;function u(t,e){this._id=t,this._clearFn=e}s.setTimeout=function(){return new u(n.call(setTimeout,window,arguments),clearTimeout)},s.setInterval=function(){return new u(n.call(setInterval,window,arguments),clearInterval)},s.clearTimeout=s.clearInterval=function(t){t.close()},u.prototype.unref=u.prototype.ref=function(){},u.prototype.close=function(){this._clearFn.call(window,this._id)},s.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},s.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},s._unrefActive=s.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;0<=e&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},s.setImmediate="function"==typeof t?t:function(t){var e=c++,n=!(arguments.length<2)&&o.call(arguments,1);return r[e]=!0,i(function(){r[e]&&(n?t.apply(null,n):t.call(null),s.clearImmediate(e))}),e},s.clearImmediate="function"==typeof e?e:function(t){delete r[t]}}).call(this,l("timers").setImmediate,l("timers").clearImmediate)},{"process/browser.js":2,timers:3}],4:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function i(t){t.translations("en",{FILE_DOCUMENTS:"Upload document",WEB_LINK:"Use web link"}),t.translations("ru",{FILE_DOCUMENTS:"Загрузить документ",WEB_LINK:"Вставить веб ссылка"})}i.$inject=["pipTranslateProvider"];var o=(r.$inject=["$scope","$element","$mdMenu","$timeout","pipDocumentUrlDialog"],r.prototype.openMenu=function(t){this.$scope.ngDisabled()||t()},r.prototype.toBoolean=function(t){return!!t&&("1"==(t=t.toString().toLowerCase())||"true"==t)},r.prototype.isMulti=function(){return void 0===this.$scope.multi||null===this.$scope.multi||(angular.isFunction(this.$scope.multi)?this.toBoolean(this.$scope.multi()):this.toBoolean(this.$scope.multi))},r.prototype.hideMenu=function(){this.$mdMenu.hide()},r.prototype.addDocuments=function(t){var n=this;if(void 0!==t){if(Array.isArray(t))t.forEach(function(t){if(n.$scope.onChange){var e={url:t.url,file:t.file};n.$scope.onChange(e)}});else if(this.$scope.onChange){var e={url:t.url,file:t.file};this.$scope.onChange(e)}void 0!==this.$scope.$document&&Array.isArray(this.$scope.$document)&&(Array.isArray(t)?t.forEach(function(t){n.$scope.$document.push(t.url)}):this.$scope.$document.push(t.url))}},r.prototype.onFileChange=function(t){var n=this;null!=t&&0!=t.length&&t.forEach(function(e){-1<e.type.indexOf("image")&&n.$timeout(function(){var t=new FileReader;t.readAsDataURL(e),t.onload=function(t){n.$timeout(function(){n.addDocuments({url:null,file:e})})}})})},r.prototype.onWebLinkClick=function(){var e=this;this.pipDocumentUrlDialog.show(function(t){e.addDocuments({url:t,file:null})})},r);function r(t,e,n,i,o){this.$scope=t,this.$element=e,this.$mdMenu=n,this.$timeout=i,this.pipDocumentUrlDialog=o}angular.module("pipAddDocument",["DocumentUrlDialog"]).config(i).directive("pipAddDocument",function(){return{restrict:"AC",scope:{$document:"=pipDocuments",onChange:"&pipChanged",multi:"&pipMulti",ngDisabled:"&"},transclude:!0,templateUrl:"add_documents/AddDocument.html",controller:o,controllerAs:"vm"}})},{}],5:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function i(t,e,n){this.id=t,this.uri=e,this.name=n}n.Attachment=i},{}],6:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function i(t,e,n,i,o,r,c,u){this.id=t,this.group=e,this.name=n,this.size=i,this.content_type=o,this.create_time=r,this.expire_time=c,this.completed=u}n.BlobInfo=i},{}],7:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function i(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this.total=e,this.data=t}n.DataPage=i},{}],8:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t("./IDocumentDataService"),o=(r.$inject=["_config","pipRest","pipFormat"],Object.defineProperty(r.prototype,"DocumentRoute",{get:function(){return this._config.DocumentRoute},enumerable:!0,configurable:!0}),r.prototype.getDocumentUrl=function(t){return this.pipRest.serverUrl+this._config.DocumentRoute+"/"+t},r.prototype.postDocumentUrl=function(){return this.pipRest.serverUrl+this._config.DocumentRoute},r.prototype.readDocuments=function(t,e,n){return(t=t||{}).filter&&(t.filer=this.pipFormat.filterToString(t.filer)),this.pipRest.getResource(this.RESOURCE).page(t,e,n)},r.prototype.readDocumentInfo=function(t,e,n){return(t=t||{}).filter&&(t.filer=this.pipFormat.filterToString(t.filer)),this.pipRest.getResource(this.RESOURCE_INFO).get(t,e,n)},r.prototype.readDocument=function(t,e,n){return this.pipRest.getResource(this.RESOURCE).get({blob_id:t},e,n)},r.prototype.deleteDocument=function(t,e,n){this.pipRest.getResource(this.RESOURCE).remove({blob_id:t},null,e,n)},r);function r(t,e,n){this._config=t,this.pipRest=e,this.pipFormat=n,this.RESOURCE="documents",this.RESOURCE_INFO="documentsInfo",this.PAGE_SIZE=100,this.PAGE_START=0,this.PAGE_TOTAL=!0}var c=(u.$inject=["pipRestProvider"],Object.defineProperty(u.prototype,"DocumentRoute",{get:function(){return this._config.DocumentRoute},set:function(t){this._config.DocumentRoute=t,this.pipRestProvider.registerOperation("documents",this._config.DocumentRoute+"/:document_id"),this.pipRestProvider.registerResource("documentInfo",this._config.DocumentRoute+"/:document_id/info")},enumerable:!0,configurable:!0}),u.prototype.$get=["pipRest","pipFormat",function(t,e){return null==this._service&&(this._service=new o(this._config,t,e)),this._service}],u);function u(t){this.pipRestProvider=t,this._config=new i.DocumentConfig,this._config.DocumentRoute="/api/1.0/blobs"}angular.module("pipDocumentData",["pipRest","pipServices"]).provider("pipDocumentData",c)},{"./IDocumentDataService":9}],9:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function i(){}n.DocumentConfig=i},{}],10:[function(t,e,n){"use strict";function i(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}Object.defineProperty(n,"__esModule",{value:!0}),t("./Attachment"),t("./BlobInfo"),t("./DataPage"),t("./DocumentDataService"),t("./IDocumentDataService"),angular.module("pipDocuments.Data",["pipDocumentData"]),i(t("./Attachment")),i(t("./BlobInfo")),i(t("./DataPage")),i(t("./IDocumentDataService"))},{"./Attachment":5,"./BlobInfo":6,"./DataPage":7,"./DocumentDataService":8,"./IDocumentDataService":9}],11:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function i(t){t&&(t.setTranslations("en",{DOCUMENTS_ATTACHED:"document(s) attached",ERROR_DOCUMENTS_LOADED:"Error: <%= error_number %> document(s) are not loaded"}),t.setTranslations("ru",{DOCUMENTS_ATTACHED:"документов добавлено",ERROR_DOCUMENTS_LOADED:"Ошибка: <%= error_number %> документ(ов) не загружено"}))}var l=t("../document_list_edit/DocumentListEdit");i.$inject=["pipTranslate"];var o={bindings:{ngDisabled:"&?",documents:"<pipDocuments",collapsable:"<?pipCollapse",pipDocumentIcon:"<?pipDocumentIcon",rebind:"<?pipRebind"},templateUrl:"document_list/DocumentList.html",controller:(r.$inject=["$element","$attrs","pipTranslate","$parse","$scope","$timeout","pipDocumentData","pipRest"],r.prototype.$postLink=function(){this.documentsContainer=this.$element.children(".pip-documents-container"),this.up=this.$element.find(".icon-up"),this.down=this.$element.find(".icon-down"),this.documents=this.documents||[],this.showDocuments=this.collapsable,this.collapsable?this.down.hide():(this.up.hide(),this.documentsContainer.hide()),this.ngDisabled()&&(this.up.hide(),this.down.hide())},r.prototype.onDownload=function(t){var e=document.createEvent("MouseEvents"),n=document.createElement("a");n.href=this.pipDocumentData.getDocumentUrl(t.id),n.dataset.downloadurl=["undefined",n.download,n.href].join(":"),e.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!0,!1,!1,!1,0,null),n.dispatchEvent(e)},r.prototype.$onChanges=function(t){this.toBoolean(this.rebind)&&t.documents&&t.documents.currentValue&&this.differentDocumentList(t.documents.currentValue)&&(this.documents=t.documents.currentValue)},r.prototype.differentDocumentList=function(t){var e;if(!this.documents||t)return!0;if(this.documents.length!==t.length)return!0;for(e=0;e<t.length;e++)if(void 0===_.find(this.documents,{id:t[e].id}))return!0;return!1},r.prototype.onTitleClick=function(t){t&&t.stopPropagation(),this.$attrs.disabled||(this.showDocuments=!this.showDocuments,this.up[this.showDocuments?"show":"hide"](),this.down[this.showDocuments?"hide":"show"](),this.documentsContainer[this.showDocuments?"show":"hide"]())},r.prototype.toBoolean=function(t){return null!=t&&!!t&&("1"==(t=t.toString().toLowerCase())||"true"==t)},r)};function r(t,e,n,i,o,r,c,u){this.$element=t,this.$attrs=e,this.pipTranslate=n,this.$parse=i,this.$scope=o,this.$timeout=r,this.pipDocumentData=c,this.pipRest=u,this.documentListIcon=l.DefaultDocumentIcon,this.$element.addClass("pip-document-list")}angular.module("pipDocumentList",["pipFocused","pipDocuments.Templates"]).run(i).component("pipDocumentList",o)},{"../document_list_edit/DocumentListEdit":12}],12:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.DefaultDocumentIcon="document";function i(t){t&&(t.setTranslations("en",{DOCUMENT_LIST_EDIT_TEXT:"Click here to add a document",ERROR_TRANSACTION_IN_PROGRESS:"Transaction is in progress. Please, wait until it's finished or abort"}),t.setTranslations("ru",{DOCUMENT_LIST_EDIT_TEXT:"Нажмите сюда, чтобы добавить документ",ERROR_TRANSACTION_IN_PROGRESS:"Транзакция еще не завершена. Подождите окончания или прервите её"}))}var u=t("async");i.$inject=["pipTranslate"];function o(){this.uploading=0}n.DocumentListEditControl=o;function r(){}n.DocumentUploadErrors=r;function c(){}n.DocumentListEditItem=c;var l=function(){};l.Original="original",l.Copied="copied",l.Added="added",l.Error="error",l.Deleted="deleted";var s={bindings:{ngDisabled:"&?",pipCreated:"&?",pipChanged:"&?",documents:"=?pipDocuments",addedDocument:"&?pipAddedDocument",documentListText:"<?pipDefaultText",documentListIcon:"<?pipDefaultIcon",cancelDrag:"<?pipCanselDrag"},templateUrl:"document_list_edit/DocumentListEdit.html",controller:(a.$inject=["$log","$element","$injector","pipRest","$timeout","pipDocumentData","pipFileUpload"],a.prototype.$onChanges=function(t){t.documents&&t.documents.currentValue&&(_.isEqual(this.documents,t.documents.currentValue)||this.control.reset())},a.prototype.toBoolean=function(t){return null!=t&&!!t&&("1"==(t=t.toString().toLowerCase())||"true"==t)},a.prototype.getItems=function(){var t,e=[];if(null===this.documents||0===this.documents.length)return e;for(t=0;t<this.documents.length;t++){var n={pin:this._itemPin++,id:this.documents[t].id,name:this.documents[t].name,uri:this.documents[t].uri,uploading:!1,uploaded:!1,progress:50,file:null,state:this.documentStartState,error:null};e.push(n)}return e},a.prototype.setItems=function(){var t,e;for(this.documents&&0<this.documents.length&&this.documents.splice(0,this.documents.length),e=0;e<this.control.items.length;e++)if(((t=this.control.items[e]).id||t.uri)&&t.state!=l.Deleted){var n={id:t.id,name:t.name,uri:t.uri};this.documents.push(n)}},a.prototype.getUploadErors=function(){var e=[];return _.each(this.control.items,function(t){t.state!=l.Error&&!t.error||e.push({id:t.id,uri:t.uri,name:t.name,error:t.error})}),e},a.prototype.isDisabled=function(){return!!this.control.uploading||!!this.ngDisabled&&this.ngDisabled()},a.prototype.resetDocument=function(){this.control.uploading=0,this.control.items=this.getItems()},a.prototype.deleteItem=function(t,e){t.upload&&(t.upload.abort(),t.upload=null),t.state===l.Deleted&&(this.removeItem(t),e())},a.prototype.saveDocument=function(i,o){var r=this;if(this.control.uploading)o&&o("ERROR_TRANSACTION_IN_PROGRESS");else{this.cancelQuery=null,this.control.error=null,this.control.uploading=0;var c=[],e=[];_.each(this.control.items,function(t){"added"==t.state&&(t.uri?e.push(t):c.push(t))});var t=_.filter(this.control.items,{state:"deleted"});if(_.each(e,function(t){t.uploaded=!0,t.uploading=!1,t.progress=0,t.upload=null,t.file=null,t.state=l.Original}),!c.length&&!t.length)return 0<e.length&&this.setItems(),this.control.uploading=0,void(i&&i(this.documents));this.control.uploading=c.length+t.length,u.parallel([function(i){_.each(c,function(t){t.uploading=!0,t.progress=0}),r.pipFileUpload.multiUpload(r.pipDocumentData.postDocumentUrl(),c,function(t,e,n){var i=c[t];r.addItem(i,e,n),n&&(r.control.error=!0)},function(t,e,n){c[t].progress=n},function(t,e,n){r.cancelQuery=null,i()},function(t){r.cancelQuery=t},!1,"pin")},function(n){t.length?u.each(t,function(t,e){r.deleteItem(t,function(t){e()})},function(t,e){n()}):n()}],function(t,e){if(t&&!r.control.error&&(r.control.error=t),r.control.error){r.control.uploading=0;var n=r.getUploadErors();o?o(n):r.$log.error(r.control.error)}else r.setItems(),r.control.uploading=0,i&&i(r.documents)})}},a.prototype.addItem=function(t,e,n){var i=_.findIndex(this.control.items,{pin:t.pin});i<0||(n?(this.control.items[i].uploaded=!1,this.control.items[i].uploading=!1,this.control.items[i].progress=0,this.control.items[i].upload=null,this.control.items[i].state=l.Error,this.control.items[i].error=n):(e?(this.control.items[i].id=e.id,this.control.items[i].name=e.name,this.control.items[i].uploaded=!0,this.control.items[i].state=l.Original):this.control.items[i].uploaded=!1,this.control.items[i].uploading=!1,this.control.items[i].progress=0,this.control.items[i].upload=null,this.control.items[i].file=null,this.control.items[i].error=null))},a.prototype.onAbort=function(){var t,e;for(e=0;e<this.control.items.length;e++)(t=this.control.items[e]).uploading&&(t.upload&&t.upload.abort(),t.uploaded=!1,t.uploading=!1,t.progress=0,t.upload=null);this.cancelQuery&&this.cancelQuery.resolve(),this.control.uploading=0,this.control.error=!0},a.prototype.filterItem=function(t){return t.state!==l.Deleted},a.prototype.readItemLocally=function(t,e){var n={pin:this._itemPin++,id:null,name:e?e.name:t?t.split("/").pop():null,uri:!e&&t?t:null,uploading:!1,uploaded:!1,progress:0,file:e||null,state:l.Added,error:null};this.control.items.push(n),this.onChange()},a.prototype.removeItem=function(t){if(t.state===l.Added||t.state===l.Copied){var e=_.findIndex(this.control.items,{pin:t.pin});-1<e&&this.control.items.splice(e,1)}else t.state=l.Deleted},a.prototype.onDelete=function(t){this.removeItem(t),this.onChange()},a.prototype.onKeyDown=function(t,e){var n=this;e?46!==t.keyCode&&8!==t.keyCode||(this.removeItem(e),this.onChange()):13!==t.keyCode&&32!==t.keyCode||setTimeout(function(){n._elementDocumentDrop.trigger("click")},0)},a.prototype.onChange=function(){this.pipChanged&&this.pipChanged({$event:{sender:this.control},$control:this.control})},a.prototype.executeCallback=function(){this.pipCreated&&this.pipCreated({$event:{sender:this.control},$control:this.control})},a)};function a(t,e,n,i,o,r,c){var u=this;this.$log=t,this.$element=e,this.$injector=n,this.pipRest=i,this.$timeout=o,this.pipDocumentData=r,this.pipFileUpload=c,this._itemPin=0,this._pipTranslate=this.$injector.has("pipTranslate")?this.$injector.get("pipTranslate"):null,this._elementDocumentDrop=e.children(".pip-document-drop"),this.documentListText||(this.documentListText="DOCUMENT_LIST_EDIT_TEXT"),this.documentListIcon||(this.documentListIcon="document"),this.iconError="warn-circle",this.documentStartState=this.toBoolean(this.addedDocument)?l.Copied:l.Original,this.control={uploading:0,items:this.getItems(),reset:function(){u.resetDocument()},save:function(t,e){u.saveDocument(t,e)},abort:function(){u.onAbort()},error:null},this.control.reset(),this.executeCallback(),this.$element.addClass("pip-document-list-edit")}angular.module("pipDocumentListEdit",["ui.event","pipFocused","pipDocuments.Templates","pipFiles","DocumentUrlDialog"]).run(i).component("pipDocumentListEdit",s)},{async:1}],13:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=(o.$inject=["$mdDialog"],o.prototype.show=function(e,t){this._mdDialog.show({templateUrl:"document_url_dialog/DocumentUrlDialog.html",clickOutsideToClose:!0,controller:c,controllerAs:"$ctrl"}).then(function(t){e&&e(t)})},o);function o(t){this._mdDialog=t}function r(t){t.translations("en",{DOCUMENT_FROM_WEBLINK:"Add web link",LINK_DOCUMENT:"Link to the document..."}),t.translations("ru",{DOCUMENT_FROM_WEBLINK:"Добавить веб ссылку",LINK_DOCUMENT:"Ссылка на документ..."})}r.$inject=["pipTranslateProvider"];var c=(u.$inject=["$log","$scope","$mdDialog","$rootScope","$timeout","$mdMenu"],u.prototype.checkUrl=function(){this.url.match(this.regexURI)?this.matchURI=!0:this.matchURI=!1},u.prototype.onCancelClick=function(){this.$mdDialog.cancel()},u.prototype.onAddClick=function(){this.$mdDialog.hide(this.url)},u);function u(t,e,n,i,o,r){this.$log=t,this.$scope=e,this.$mdDialog=n,this.$rootScope=i,this.$timeout=o,this.$mdMenu=r,this.url="",this.invalid=!0,this.theme=this.$rootScope[pip.themes.ThemeRootVar],this.ExpressionURI=/^([a-z][a-z0-9+.-]*):(?:\/\/((?:(?=((?:[a-z0-9-._~!$&'()*+,;=:]|%[0-9A-F]{2})*))(\3)@)?(?=(\[[0-9A-F:.]{2,}\]|(?:[a-z0-9-._~!$&'()*+,;=]|%[0-9A-F]{2})*))\5(?::(?=(\d*))\6)?)(\/(?=((?:[a-z0-9-._~!$&'()*+,;=:@\/]|%[0-9A-F]{2})*))\8)?|(\/?(?!\/)(?=((?:[a-z0-9-._~!$&'()*+,;=:@\/]|%[0-9A-F]{2})*))\10)?)(?:\?(?=((?:[a-z0-9-._~!$&'()*+,;=:@\/?]|%[0-9A-F]{2})*))\11)?(?:#(?=((?:[a-z0-9-._~!$&'()*+,;=:@\/?]|%[0-9A-F]{2})*))\12)?$/i,this.regexURI=new RegExp(this.ExpressionURI),this.matchURI=!1}angular.module("DocumentUrlDialog",["ngMaterial","pipDocuments.Templates"]).service("pipDocumentUrlDialog",i).config(r)},{}],14:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0})},{}],15:[function(t,e,n){"use strict";function i(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}Object.defineProperty(n,"__esModule",{value:!0}),t("./document_url_dialog/DocumentUrlDialogService"),t("./document_url_dialog/IDocumentUrlDialogService"),t("./document_list/DocumentList"),t("./document_list_edit/DocumentListEdit"),t("./rest"),t("./data"),t("./add_documents/AddDocument"),angular.module("pipDocuments",["DocumentUrlDialog","pipAddDocument","pipDocuments.Rest","pipDocuments.Data","pipDocumentList","pipDocumentListEdit"]),i(t("./document_list_edit/DocumentListEdit")),i(t("./data"))},{"./add_documents/AddDocument":4,"./data":10,"./document_list/DocumentList":11,"./document_list_edit/DocumentListEdit":12,"./document_url_dialog/DocumentUrlDialogService":13,"./document_url_dialog/IDocumentUrlDialogService":14,"./rest":18}],16:[function(t,e,n){function i(t){t.registerPagedCollection("documents","/api/1.0/blobs/:document_id",{blob_id:"@document_id"},{page:{method:"GET",isArray:!1},update:{method:"PUT"}}),t.registerResource("documentInfo","/api/1.0/blobs/:document_id/info")}i.$inject=["pipRestProvider"],angular.module("pipDocuments.Rest").config(i)},{}],17:[function(t,e,n){function i(t){t.registerPagedCollection("files","/api/1.0/files/:file_id")}i.$inject=["pipRestProvider"],angular.module("pipDocuments.Rest").config(i)},{}],18:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),angular.module("pipDocuments.Rest",[]),t("./DocumentResources"),t("./FileResources")},{"./DocumentResources":16,"./FileResources":17}],19:[function(t,e,n){!function(e){try{e=angular.module("pipDocuments.Templates")}catch(t){e=angular.module("pipDocuments.Templates",[])}e.run(["$templateCache",function(t){t.put("add_documents/AddDocument.html",'<md-menu><ng-transclude class="pip-add-image-open-button" ng-click="vm.openMenu($mdOpenMenu)" xxxng-click="vm.ngDisabled() ? \'\' : $mdOpenMenu()"></ng-transclude><md-menu-content width="4"><md-menu-item><md-button class="layout-row layout-align-start-center" accept="image/*" ng-keydown="vm.onKeyDown($event)" ng-multiple="vm.isMulti()" ng-file-select="" ng-file-change="vm.onFileChange($files)" ng-click="vm.hideMenu()" ng-file-drop=""><md-icon class="text-headline text-grey rm24-flex" md-svg-icon="icons:folder"></md-icon><span class="text-grey">{{ ::\'FILE_DOCUMENTS\' | translate }}</span></md-button></md-menu-item><md-menu-item><md-button class="layout-row layout-align-start-center" ng-click="vm.onWebLinkClick()"><md-icon class="text-headline text-grey rm24-flex" md-svg-icon="icons:weblink"></md-icon><span class="text-grey">{{ ::\'WEB_LINK\' | translate }}</span></md-button></md-menu-item></md-menu-content></md-menu>')}])}(),function(e){try{e=angular.module("pipDocuments.Templates")}catch(t){e=angular.module("pipDocuments.Templates",[])}e.run(["$templateCache",function(t){t.put("document_list/DocumentList.html",'<md-button class="pip-documents-name" ng-class="{\'lp24-flex rp16\': $ctrl.pipDocumentIcon }" ng-click="$ctrl.onTitleClick($event); $ctrl.onResize()" aria-label="RESIZE"><div class="layout-align-start-center layout-row w-stretch"><md-icon md-svg-icon="icons:document" ng-class="{\'pip-icon\': $ctrl.pipDocumentIcon}" ng-if="$ctrl.pipDocumentIcon"></md-icon><span class="pip-documents-text">{{ $ctrl.documents.length }} {{ ::\'DOCUMENTS_ATTACHED\' | translate }}</span><md-icon class="icon-up" md-svg-icon="icons:triangle-up"></md-icon><md-icon class="icon-down" md-svg-icon="icons:triangle-down"></md-icon></div></md-button><div pip-focused="" class="pip-documents-container bm8" ng-class="{ \'lp24-flex rp24-flex\': $ctrl.pipDocumentIcon }"><md-button class="pip-document-download md-primary" ng-if="document.uri" ng-class="{\'pip-focusable\' : !$ctrl.ngDisabled()}" href="{{ document.uri }}" target="_blank" ng-disabled="$ctrl.ngDisabled() || $ctrl.document.error" ng-repeat="document in $ctrl.documents track by $index" aria-label="DOCUMENT"><div class="pip-default-icon"><md-icon md-svg-icon="icons:{{::$ctrl.documentListIcon}}"></md-icon></div><div class="pip-document-title">{{ ::document.name }}</div></md-button><md-button class="pip-document-download md-primary" ng-if="!document.uri" ng-class="{\'pip-focusable\' : !$ctrl.ngDisabled()}" ng-click="$ctrl.onDownload(document)" target="_blank" ng-disabled="$ctrl.ngDisabled() || $ctrl.document.error" ng-repeat="document in $ctrl.documents track by $index" aria-label="DOCUMENT"><div class="pip-default-icon"><md-icon md-svg-icon="icons:{{::$ctrl.documentListIcon}}"></md-icon></div><div class="pip-document-title">{{ ::document.name }}</div></md-button></div>')}])}(),function(e){try{e=angular.module("pipDocuments.Templates")}catch(t){e=angular.module("pipDocuments.Templates",[])}e.run(["$templateCache",function(t){t.put("document_list/DocumentListCollapse.html",'<div class="pip-documents-name" ng-click="$ctrl.onTitleClick($event); $ctrl.onResize()"><span class="pip-documents-text">{{ documents.length }} {{ ::\'DOCUMENTS_ATTACHED\' | translate }}</span><md-icon class="icon-up" md-svg-icon="icons:triangle-up"></md-icon><md-icon class="icon-down" md-svg-icon="icons:triangle-down"></md-icon></div><div pip-focused="" class="pip-documents-container bm8"><md-button class="pip-document-download pip-focusable md-primary" href="{{::$ctrl.document.url}}" target="_blank" ng-repeat="document in $ctrl.documents track by document.id" aria-label="DOCUMENT"><div class="pip-default-icon"><md-icon md-svg-icon="icons:{{::$ctrl.icon}}"></md-icon></div><div class="pip-document-title">{{ ::$ctrl.document.name }}</div></md-button></div>')}])}(),function(e){try{e=angular.module("pipDocuments.Templates")}catch(t){e=angular.module("pipDocuments.Templates",[])}e.run(["$templateCache",function(t){t.put("document_list_edit/DocumentListEdit.html",'<div pip-focusable=""><div class="pip-document-upload pointer md-primary" ng-class="{\'pip-focusable\' : !$ctrl.ngDisabled(), \'pip-item-error\' : item.state == \'error\'}" ng-keydown="$ctrl.onKeyDown($event, item)" tabindex="{{ $ctrl.ngDisabled() ? -1 : 0 }}" ng-repeat="item in $ctrl.control.items | filter: $ctrl.filterItem track by $index"><div class="pip-default-icon" ng-class="{ \'pip-document-new\': item.state == \'added\' || item.state == \'copied\' }"><md-icon pip-cancel-drag="true" class="md-primary" ng-if="item.state == \'original\' || item.state == \'added\'" md-svg-icon="icons:{{::$ctrl.documentListIcon}}"></md-icon><md-icon pip-cancel-drag="true" class="md-warn" ng-if="item.state == \'error\'" md-svg-icon="icons:{{::$ctrl.iconError}}"></md-icon></div><div class="pip-document-title" pip-cancel-drag="true">{{ item.name }}</div><md-button ng-click="$ctrl.onDelete(item)" ng-disabled="$ctrl.isDisabled()" tabindex="-1" ng-hide="$ctrl.ngDisabled()" class="md-icon-button" aria-label="DELETE"><md-icon md-svg-icon="icons:cross" pip-cancel-drag="true"></md-icon></md-button><md-progress-linear md-mode="determinate" ng-show="item.uploading" ng-value="item.progress"></md-progress-linear></div><button class="pip-document-upload pip-document-drop" ng-class="{\'pip-focusable\' : !$ctrl.ngDisabled()}" ng-keydown="$ctrl.onKeyDown($event)" tabindex="0" xxxng-file-drop="" xxxng-file-select="" xxxng-file-change="$ctrl.onSelect($files)" pip-changed="$ctrl.readItemLocally(url, file)" xxng-multiple="true" pip-multi="true" ng-disabled="$ctrl.ngDisabled()" aria-label="UPLOAD" pip-add-document=""><div class="pip-default-icon"><md-icon pip-cancel-drag="true" md-svg-icon="icons:{{ ::$ctrl.documentListIcon }}"></md-icon></div><div class="pip-default-text"><span>{{ $ctrl.documentListText | translate }}</span></div></button><div class="clearfix"></div></div>')}])}(),function(e){try{e=angular.module("pipDocuments.Templates")}catch(t){e=angular.module("pipDocuments.Templates",[])}e.run(["$templateCache",function(t){t.put("document_url_dialog/DocumentUrlDialog.html",'<md-dialog class="pip-dialog pip-document-url-dialog pip-document-dialog layout-column" md-theme="{{ $ctrl.theme }}"><md-dialog-content class="pip-body lp0 rp0 tp0 pip-scroll"><div class="pip-header bm16 layout-row layout-align-start-center"><md-button ng-click="$ctrl.onCancelClick()" class="md-icon-button lm0" aria-label="{{ ::\'CANCEL\' | translate }}"><md-icon class="text-grey" md-svg-icon="icons:arrow-left"></md-icon></md-button><h3 class="text-title m0">{{ ::\'DOCUMENT_FROM_WEBLINK\' | translate}}</h3></div><div class="pip-content lp16 rp16"><md-input-container md-no-float="" class="w-stretch text-subhead1"><input type="text" ng-model="$ctrl.url" ng-change="$ctrl.checkUrl()" placeholder="{{ ::\'LINK_DOCUMENT\' | translate }}"></md-input-container></div></md-dialog-content><div class="pip-footer"><md-button ng-click="$ctrl.onCancelClick()" aria-label="{{ ::\'CANCEL\' | translate }}">{{ ::\'CANCEL\' | translate }}</md-button><md-button class="md-accent" ng-click="$ctrl.onAddClick()" aria-label="{{ ::\'ADD\' | translate }}" ng-disabled="!$ctrl.matchURI">{{ ::\'ADD\' | translate }}</md-button></div></md-dialog>')}])}()},{}]},{},[19,4,5,6,7,8,9,10,12,11,13,14,15,16,17,18])(19)});


!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;((e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).pip||(e.pip={})).standalone=t()}}(function(){return function s(c,p,r){function l(e,t){if(!p[e]){if(!c[e]){var i="function"==typeof require&&require;if(!t&&i)return i(e,!0);if(a)return a(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var o=p[e]={exports:{}};c[e][0].call(o.exports,function(t){return l(c[e][1][t]||t)},o,o.exports,s,c,p,r)}return p[e].exports}for(var a="function"==typeof require&&require,t=0;t<r.length;t++)l(r[t]);return l}({1:[function(t,F,e){(function(R,U,V){!function(){var t,g={};function b(){}function r(t){return t}function e(t){return!!t}function i(t){return!t}var n="object"==typeof self&&self.self===self&&self||"object"==typeof U&&U.global===U&&U||this;function a(t){return function(){if(null===t)throw new Error("Callback was already called.");t.apply(this,arguments),t=null}}function C(t){return function(){null!==t&&(t.apply(this,arguments),t=null)}}null!=n&&(t=n.async),g.noConflict=function(){return n.async=t,g};var o=Object.prototype.toString,y=Array.isArray||function(t){return"[object Array]"===o.call(t)};function c(t){return y(t)||"number"==typeof t.length&&0<=t.length&&t.length%1==0}function v(t,e){for(var i=-1,n=t.length;++i<n;)e(t[i],i,t)}function l(t,e){for(var i=-1,n=t.length,o=Array(n);++i<n;)o[i]=e(t[i],i,t);return o}function s(t){return l(Array(t),function(t,e){return e})}function $(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1}var k=Object.keys||function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i);return e};function d(t){var e,i,n=-1;return c(t)?(e=t.length,function(){return++n<e?n:null}):(i=k(t),e=i.length,function(){return++n<e?i[n]:null})}function E(n,o){return o=null==o?n.length-1:+o,function(){for(var t=Math.max(arguments.length-o,0),e=Array(t),i=0;i<t;i++)e[i]=arguments[i+o];switch(o){case 0:return n.call(this,e);case 1:return n.call(this,arguments[0],e)}}}function p(n){return function(t,e,i){return n(t,i)}}var u="function"==typeof V&&V,h=u?function(t){u(t)}:function(t){setTimeout(t,0)};function m(l){return function(i,n,o){o=C(o||b);var s=d(i=i||[]);if(l<=0)return o(null);var c=!1,p=0,r=!1;!function e(){if(c&&p<=0)return o(null);for(;p<l&&!r;){var t=s();if(null===t)return c=!0,void(p<=0&&o(null));p+=1,n(i[t],t,a(function(t){--p,t?(o(t),r=!0):e()}))}}()}}function f(n){return function(t,e,i){return n(g.eachOf,t,e,i)}}function T(o){return function(t,e,i,n){return o(m(e),t,i,n)}}function _(n){return function(t,e,i){return n(g.eachOfSeries,t,e,i)}}function x(t,e,o,i){i=C(i||b);var s=c(e=e||[])?[]:{};t(e,function(t,i,n){o(t,function(t,e){s[i]=e,n(t)})},function(t){i(t,s)})}function w(t,e,o,i){var s=[];t(e,function(e,i,n){o(e,function(t){t&&s.push({index:i,value:e}),n()})},function(){i(l(s.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})}function D(t,e,i,n){w(t,e,function(t,e){i(t,function(t){e(!t)})},n)}function I(c,p,r){return function(t,e,n,o){function i(){o&&o(r(!1,void 0))}function s(e,t,i){if(!o)return i();n(e,function(t){o&&p(t)&&(o(r(!0,e)),o=n=!1),i()})}3<arguments.length?c(t,e,s,i):(o=n,n=e,c(t,s,i))}}function O(t,e){return e}function S(t,e,i){i=i||b;var o=c(e)?[]:{};t(e,function(t,i,n){t(E(function(t,e){e.length<=1&&(e=e[0]),o[i]=e,n(t)}))},function(t){i(t,o)})}function P(t,e,n,i){var o=[];t(e,function(t,e,i){n(t,function(t,e){o=o.concat(e||[]),i(t)})},function(t){i(t,o)})}function L(n,t,e){if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");function i(i,t,n,o){if(null!=o&&"function"!=typeof o)throw new Error("task callback must be a function");if(i.started=!0,y(t)||(t=[t]),0===t.length&&i.idle())return g.setImmediate(function(){i.drain()});v(t,function(t){var e={data:t,callback:o||b};n?i.tasks.unshift(e):i.tasks.push(e),i.tasks.length===i.concurrency&&i.saturated()}),g.setImmediate(i.process)}function o(e,i){return function(){--s;var n=!1,t=arguments;v(i,function(i){v(c,function(t,e){t!==i||n||(c.splice(e,1),n=!0)}),i.callback.apply(i,t)}),e.tasks.length+s===0&&e.drain(),e.process()}}var s=0,c=[],p={tasks:[],concurrency:t,payload:e,saturated:b,empty:b,drain:b,started:!1,paused:!1,push:function(t,e){i(p,t,!1,e)},kill:function(){p.drain=b,p.tasks=[]},unshift:function(t,e){i(p,t,!0,e)},process:function(){for(;!p.paused&&s<p.concurrency&&p.tasks.length;){var t=p.payload?p.tasks.splice(0,p.payload):p.tasks.splice(0,p.tasks.length),e=l(t,function(t){return t.data});0===p.tasks.length&&p.empty(),s+=1,c.push(t[0]);var i=a(o(p,t));n(e,i)}},length:function(){return p.tasks.length},running:function(){return s},workersList:function(){return c},idle:function(){return p.tasks.length+s===0},pause:function(){p.paused=!0},resume:function(){if(!1!==p.paused){p.paused=!1;for(var t=Math.min(p.concurrency,p.tasks.length),e=1;e<=t;e++)g.setImmediate(p.process)}}};return p}function M(i){return E(function(t,e){t.apply(null,e.concat([E(function(t,e){"object"==typeof console&&(t?console.error&&console.error(t):console[i]&&v(e,function(t){console[i](t)}))})]))})}function B(n){return function(t,e,i){n(s(t),e,i)}}function j(s){return E(function(e,t){var i=E(function(n){var o=this,t=n.pop();return s(e,function(t,e,i){t.apply(o,n.concat([i]))},t)});return t.length?i.apply(this,t):i})}function A(n){return E(function(t){var e=t.pop();t.push(function(){var t=arguments;i?g.setImmediate(function(){e.apply(null,t)}):e.apply(null,t)});var i=!0;n.apply(this,t),i=!1})}"object"==typeof R&&"function"==typeof R.nextTick?g.nextTick=R.nextTick:g.nextTick=h,g.setImmediate=u?h:g.nextTick,g.forEach=g.each=function(t,e,i){return g.eachOf(t,p(e),i)},g.forEachSeries=g.eachSeries=function(t,e,i){return g.eachOfSeries(t,p(e),i)},g.forEachLimit=g.eachLimit=function(t,e,i,n){return m(e)(t,p(i),n)},g.forEachOf=g.eachOf=function(t,e,i){i=C(i||b);for(var n,o=d(t=t||[]),s=0;null!=(n=o());)s+=1,e(t[n],n,a(c));function c(t){s--,t?i(t):null===n&&s<=0&&i(null)}0===s&&i(null)},g.forEachOfSeries=g.eachOfSeries=function(t,n,o){o=C(o||b);var s=d(t=t||[]),c=s();!function e(){var i=!0;if(null===c)return o(null);n(t[c],c,a(function(t){if(t)o(t);else{if(null===(c=s()))return o(null);i?g.setImmediate(e):e()}})),i=!1}()},g.forEachOfLimit=g.eachOfLimit=function(t,e,i,n){m(e)(t,i,n)},g.map=f(x),g.mapSeries=_(x),g.mapLimit=T(x),g.inject=g.foldl=g.reduce=function(t,n,o,e){g.eachOfSeries(t,function(t,e,i){o(n,t,function(t,e){n=e,i(t)})},function(t){e(t,n)})},g.foldr=g.reduceRight=function(t,e,i,n){var o=l(t,r).reverse();g.reduce(o,e,i,n)},g.transform=function(t,n,o,e){3===arguments.length&&(e=o,o=n,n=y(t)?[]:{}),g.eachOf(t,function(t,e,i){o(n,t,e,i)},function(t){e(t,n)})},g.select=g.filter=f(w),g.selectLimit=g.filterLimit=T(w),g.selectSeries=g.filterSeries=_(w),g.reject=f(D),g.rejectLimit=T(D),g.rejectSeries=_(D),g.any=g.some=I(g.eachOf,e,r),g.someLimit=I(g.eachOfLimit,e,r),g.all=g.every=I(g.eachOf,i,i),g.everyLimit=I(g.eachOfLimit,i,i),g.detect=I(g.eachOf,r,O),g.detectSeries=I(g.eachOfSeries,r,O),g.detectLimit=I(g.eachOfLimit,r,O),g.sortBy=function(t,e,i){function n(t,e){var i=t.criteria,n=e.criteria;return i<n?-1:n<i?1:0}g.map(t,function(i,n){e(i,function(t,e){t?n(t):n(null,{value:i,criteria:e})})},function(t,e){if(t)return i(t);i(null,l(e.sort(n),function(t){return t.value}))})},g.auto=function(p,r,l){"function"==typeof r&&(l=r,r=null),l=C(l||b);var t=k(p),e=t.length;if(!e)return l(null);r=r||e;var a={},d=0,u=!1,h=[];function m(t){h.unshift(t)}function f(){e--,v(h.slice(0),function(t){t()})}m(function(){e||l(null,a)}),v(t,function(s){if(!u){for(var t,i=y(p[s])?p[s]:[p[s]],n=E(function(t,e){if(d--,e.length<=1&&(e=e[0]),t){var i={};o=function(t,e){i[e]=t},v(k(n=a),function(t){o(n[t],t)}),i[s]=e,u=!0,l(t,i)}else a[s]=e,g.setImmediate(f);var n,o}),e=i.slice(0,i.length-1),o=e.length;o--;){if(!(t=p[e[o]]))throw new Error("Has nonexistent dependency in "+e.join(", "));if(y(t)&&0<=$(t,s))throw new Error("Has cyclic dependencies")}c()?(d++,i[i.length-1](n,a)):m(function t(){c()&&(d++,0<=(e=$(h,t))&&h.splice(e,1),i[i.length-1](n,a));var e})}function c(){return d<r&&(n=function(t,e){return t&&a.hasOwnProperty(e)},o=!0,v(e,function(t,e,i){o=n(o,t,e,i)}),o)&&!a.hasOwnProperty(s);var n,o}})},g.retry=function(t,e,i){var s=[],c={times:5,interval:0};var n=arguments.length;if(n<1||3<n)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");function o(i,e){function t(t,n){return function(i){t(function(t,e){i(!t||n,{err:t,result:e})},e)}}function n(e){return function(t){setTimeout(function(){t(null)},e)}}for(;c.times;){var o=!--c.times;s.push(t(c.task,o)),!o&&0<c.interval&&s.push(n(c.interval))}g.series(s,function(t,e){e=e[e.length-1],(i||c.callback)(e.err,e.result)})}return n<=2&&"function"==typeof t&&(i=e,e=t),"function"!=typeof t&&function(t,e){if("number"==typeof e)t.times=parseInt(e,10)||5;else{if("object"!=typeof e)throw new Error("Unsupported argument type for 'times': "+typeof e);t.times=parseInt(e.times,10)||5,t.interval=parseInt(e.interval,10)||0}}(c,t),c.callback=i,c.task=e,c.callback?o():o},g.waterfall=function(t,s){if(s=C(s||b),!y(t)){var e=new Error("First argument to waterfall must be an array of functions");return s(e)}if(!t.length)return s();!function n(o){return E(function(t,e){if(t)s.apply(null,[t].concat(e));else{var i=o.next();i?e.push(n(i)):e.push(s),A(o).apply(null,e)}})}(g.iterator(t))()},g.parallel=function(t,e){S(g.eachOf,t,e)},g.parallelLimit=function(t,e,i){S(m(e),t,i)},g.series=function(t,e){S(g.eachOfSeries,t,e)},g.iterator=function(n){return function t(e){function i(){return n.length&&n[e].apply(null,arguments),i.next()}return i.next=function(){return e<n.length-1?t(e+1):null},i}(0)},g.apply=E(function(e,i){return E(function(t){return e.apply(null,i.concat(t))})}),g.concat=f(P),g.concatSeries=_(P),g.whilst=function(i,n,o){if(o=o||b,i()){var s=E(function(t,e){t?o(t):i.apply(this,e)?n(s):o.apply(null,[null].concat(e))});n(s)}else o(null)},g.doWhilst=function(t,e,i){var n=0;return g.whilst(function(){return++n<=1||e.apply(this,arguments)},t,i)},g.until=function(t,e,i){return g.whilst(function(){return!t.apply(this,arguments)},e,i)},g.doUntil=function(t,e,i){return g.doWhilst(t,function(){return!e.apply(this,arguments)},i)},g.during=function(i,n,o){o=o||b;var s=E(function(t,e){t?o(t):(e.push(c),i.apply(this,e))}),c=function(t,e){t?o(t):e?n(s):o(null)};i(c)},g.doDuring=function(t,e,i){var n=0;g.during(function(t){n++<1?t(null,!0):e.apply(this,arguments)},t,i)},g.queue=function(i,t){return L(function(t,e){i(t[0],e)},t,1)},g.priorityQueue=function(t,e){function s(t,e){return t.priority-e.priority}function n(i,t,n,o){if(null!=o&&"function"!=typeof o)throw new Error("task callback must be a function");if(i.started=!0,y(t)||(t=[t]),0===t.length)return g.setImmediate(function(){i.drain()});v(t,function(t){var e={data:t,priority:n,callback:"function"==typeof o?o:b};i.tasks.splice(function(t,e,i){for(var n=-1,o=t.length-1;n<o;){var s=n+(o-n+1>>>1);0<=i(e,t[s])?n=s:o=s-1}return n}(i.tasks,e,s)+1,0,e),i.tasks.length===i.concurrency&&i.saturated(),g.setImmediate(i.process)})}var o=g.queue(t,e);return o.push=function(t,e,i){n(o,t,e,i)},delete o.unshift,o},g.cargo=function(t,e){return L(t,1,e)},g.log=M("log"),g.dir=M("dir"),g.memoize=function(i,n){var s={},c={},p=Object.prototype.hasOwnProperty;n=n||r;var t=E(function(t){var e=t.pop(),o=n.apply(null,t);p.call(s,o)?g.setImmediate(function(){e.apply(null,s[o])}):p.call(c,o)?c[o].push(e):(c[o]=[e],i.apply(null,t.concat([E(function(t){s[o]=t;var e=c[o];delete c[o];for(var i=0,n=e.length;i<n;i++)e[i].apply(null,t)})])))});return t.memo=s,t.unmemoized=i,t},g.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},g.times=B(g.map),g.timesSeries=B(g.mapSeries),g.timesLimit=function(t,e,i,n){return g.mapLimit(s(t),e,i,n)},g.seq=function(){var e=arguments;return E(function(t){var n=this,i=t[t.length-1];"function"==typeof i?t.pop():i=b,g.reduce(e,t,function(t,e,i){e.apply(n,t.concat([E(function(t,e){i(t,e)})]))},function(t,e){i.apply(n,[t].concat(e))})})},g.compose=function(){return g.seq.apply(null,Array.prototype.reverse.call(arguments))},g.applyEach=j(g.eachOf),g.applyEachSeries=j(g.eachOfSeries),g.forever=function(t,e){var i=a(e||b),n=A(t);!function t(e){if(e)return i(e);n(t)}()},g.ensureAsync=A,g.constant=E(function(t){var e=[null].concat(t);return function(t){return t.apply(this,e)}}),g.wrapSync=g.asyncify=function(s){return E(function(t){var e,i,n,o=t.pop();try{e=s.apply(this,t)}catch(t){return o(t)}("function"==(n=typeof(i=e))||"object"==n&&i)&&"function"==typeof e.then?e.then(function(t){o(null,t)}).catch(function(t){o(t.message?t:new Error(t))}):o(null,e)})},"object"==typeof F&&F.exports?F.exports=g:n.async=g}()}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("timers").setImmediate)},{_process:2,timers:3}],2:[function(t,e,i){var n,o,s=e.exports={};function c(){throw new Error("setTimeout has not been defined")}function p(){throw new Error("clearTimeout has not been defined")}function r(e){if(n===setTimeout)return setTimeout(e,0);if((n===c||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:c}catch(t){n=c}try{o="function"==typeof clearTimeout?clearTimeout:p}catch(t){o=p}}();var l,a=[],d=!1,u=-1;function h(){d&&l&&(d=!1,l.length?a=l.concat(a):u=-1,a.length&&m())}function m(){if(!d){var t=r(h);d=!0;for(var e=a.length;e;){for(l=a,a=[];++u<e;)l&&l[u].run();u=-1,e=a.length}l=null,d=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===p||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function g(){}s.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];a.push(new f(t,e)),1!==a.length||d||r(m)},f.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=g,s.addListener=g,s.once=g,s.off=g,s.removeListener=g,s.removeAllListeners=g,s.emit=g,s.prependListener=g,s.prependOnceListener=g,s.listeners=function(t){return[]},s.binding=function(t){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(t){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},{}],3:[function(r,t,l){(function(t,e){var n=r("process/browser.js").nextTick,i=Function.prototype.apply,o=Array.prototype.slice,s={},c=0;function p(t,e){this._id=t,this._clearFn=e}l.setTimeout=function(){return new p(i.call(setTimeout,window,arguments),clearTimeout)},l.setInterval=function(){return new p(i.call(setInterval,window,arguments),clearInterval)},l.clearTimeout=l.clearInterval=function(t){t.close()},p.prototype.unref=p.prototype.ref=function(){},p.prototype.close=function(){this._clearFn.call(window,this._id)},l.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},l.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},l._unrefActive=l.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;0<=e&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},l.setImmediate="function"==typeof t?t:function(t){var e=c++,i=!(arguments.length<2)&&o.call(arguments,1);return s[e]=!0,n(function(){s[e]&&(i?t.apply(null,i):t.call(null),l.clearImmediate(e))}),e},l.clearImmediate="function"==typeof e?e:function(t){delete s[t]}}).call(this,r("timers").setImmediate,r("timers").clearImmediate)},{"process/browser.js":2,timers:3}],4:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ChecklistDraggEvent="onChecklistDrag";var s=function(){this.index=0,this.dragId=0,this.isChanged=!1},n={bindings:{ngDisabled:"<?",pipChanged:"=?",pipDraggable:"<?",pipOptions:"=",pipScrollContainer:"<?",pipRebind:"<?"},templateUrl:"checklist_edit/ChecklistEdit.html",controller:(o.$inject=["$element","$timeout","$document","$rootScope"],o.prototype.$onChanges=function(t){this.toBoolean(this.pipRebind)&&(t.pipOptions&&t.pipOptions.currentValue&&(angular.equals(this.pipOptions,t.pipOptions.currentValue)||(this.selected.isChanged?this.selected.isChanged=!1:this.generateList(t.pipOptions.currentValue))),t.pipDraggable&&t.pipDraggable.currentValue&&(this.pipDraggable=t.pipDraggable.currentValue))},o.prototype.toBoolean=function(t){return null!=t&&!!t&&("1"==(t=t.toString().toLowerCase())||"true"==t)},o.prototype.getCaret=function(t){if(t.selectionStart)return t.selectionStart;if(this.$document.selection){t.focus();var e=this.$document.selection.createRange();if(null==e)return 0;var i=t.createTextRange(),n=i.duplicate();return i.moveToBookmark(e.getBookmark()),n.setEndPoint("EndToStart",i),n.text.length}return 0},o.prototype.setSelectionRange=function(t,e,i){if(t.setSelectionRange)t.focus(),t.setSelectionRange(e,i);else if(t.createTextRange){var n=t.createTextRange();n.collapse(!0),n.moveEnd("character",i),n.moveStart("character",e),n.select()}},o.prototype.setCaretToPos=function(t,e){this.setSelectionRange(t,e,e)},o.prototype.addItem=function(t,e){var i=this.getNewItem(t,!1);-1<e&&(this.selected.index=e),this.checklistContent.length<2?this.checklistContent.unshift(i):this.checklistContent.splice(this.selected.index+1,0,i),this.selected.index+=1,this.setFocus(this.selected.index),this._debounceChange()},o.prototype.updateContents=function(){this.selected.isChanged=!0;var e=[];_.each(this.checklistContent,function(t){t.empty||e.push({checked:t.checked,text:t.text})}),this.pipOptions=e},o.prototype.setFocus=function(e,i){var n=this;-1<e&&setTimeout(function(){var t=angular.element("#check-item-text-"+n.selected.id+"-"+e);t&&(t.focus(),void 0!==i&&t[0]&&n.setCaretToPos(t[0],i))},50)},o.prototype.getNewItem=function(t,e){return{checked:!1,text:t||"",empty:e}},o.prototype.now=function(){return+new Date},o.prototype.clearList=function(){this.selected.index=0,this.checklistContent=[],this.checklistContent.push(this.getNewItem("",!0))},o.prototype.generateList=function(t){var e=this;!t||t.length<1?this.clearList():(this.checklistContent=[],_.each(t,function(t){e.checklistContent.push(t)}),this.checklistContent.push(this.getNewItem("",!0)))},o.prototype.setWidth100=function(){var t=angular.element("#check-item-"+ +this.selected.id+"-"+this.selected.index);t.css("width","none"),t.css("max-width","none")},o.prototype.setWidth=function(){if(!this.isWidth){var t=angular.element("#check-item-empty-"+this.selected.id).width(),e=angular.element("#check-item-"+this.selected.id+"-"+this.selected.index);e&&(e.css("width",t+"px"),e.css("max-width",t+"px"))}},o.prototype.onItemFocus=function(t){this.ngDisabled||(this.selected.index=t)},o.prototype.isSelectedItem=function(t){var e;try{e=this.checklistContent[t].empty}catch(t){e=!0}return this.selected.index==t&&this.pipDraggable&&!e},o.prototype.onAddItem=function(){this.addItem("",this.selected.index-1)},o.prototype.onChangeItem=function(t){-1<t&&this.checklistContent[t]&&this.checklistContent[t].empty&&this.checklistContent[t].empty&&(this.checklistContent[t].empty=!1,this.checklistContent.push(this.getNewItem("",!0))),this._debounceChange()},o.prototype.onClick=function(t,e){this.ngDisabled||(this.selected.index=e)},o.prototype.onTextAreaClick=function(t,e){this.ngDisabled||(this.selected.index=e)},o.prototype.onDropComplete=function(t,e,i,n){if(this.selected.id==n&&this.selected.drag){var o=t,s=this.selected.index,c=_.cloneDeep(this.checklistContent);if(0!=s||1!=t){if(o<s){o>c.length-1&&(o=c.length-1);for(var p=0;p<s-o;p++)c[s-p]=c[s-p-1];c[o]=e}if(s<o){--o;for(var r=0;r<o-s;r++)c[s+r]=c[s+r+1];c[o]=e}this.selected.index=o}this.checklistContent=c,this._debounceChange()}},o.prototype.onMove=function(){this.setWidth(),this.isWidth=!0},o.prototype.onStop=function(t){var e=this;this.$timeout(function(){e.selected.drag=e.selected.dragInit,e.selected.dragId=0},50),this.isWidth&&(this.setWidth100(),this.isWidth=!1)},o.prototype.onStart=function(t){this.selected.isChanged=!0,t&&t!=this.selected.dragId&&(this.selected.drag=!1)},o.prototype.onDownDragg=function(t){this.pipDraggable&&2<this.checklistContent.length&&!t.empty&&(this.$rootScope.$broadcast(i.ChecklistDraggEvent),this.selected.dragId=this.selected.id)},o.prototype.onDeleteItem=function(t,e){if(1==this.checklistContent.length)this.checklistContent[0].text="",this.checklistContent[0].checked=!1,this.checklistContent[0].empty=!0,this.selected.index=0;else{if(!(0<=t&&t<=this.checklistContent.length))return;this.checklistContent.splice(t,1)}this.selected.index>=this.checklistContent.length&&(this.selected.index=this.checklistContent.length-1),this.setFocus(this.selected.index,0),this._debounceChange()},o.prototype.onChecked=function(t){this._debounceChange()},o.prototype.onChecklistChange=function(){var t=this;this.updateContents(),this.pipChanged&&this.$timeout(function(){t.pipChanged(t.pipOptions)},0)},o.prototype.onTextareaKeyDown=function(t,e,i){if(!this.ngDisabled&&-1!=this.selected.index){var n,o;if(t&&t.target&&(o=this.getCaret(t.target),void 0!==t.target.value&&(n=t.target.value.length)),0<this.selected.index&&""!=i.text&&0==o&&8==t.keyCode&&!t.ctrlKey&&!t.shiftKey){if(!i.empty){var s=this.checklistContent[this.selected.index-1].text.length;this.checklistContent[this.selected.index-1].text=this.checklistContent[this.selected.index-1].text+i.text,--this.selected.index,this.checklistContent.splice(this.selected.index+1,1),this._debounceChange(),this.setFocus(this.selected.index,s)}return t&&t.stopPropagation(),!1}if(!(""!=i.text||8!=t.keyCode&&46!=t.keyCode||t.ctrlKey||t.shiftKey))return i.empty||this.onDeleteItem(e,i),t&&t.stopPropagation(),!1;if(13!=t.keyCode&&45!=t.keyCode||t.ctrlKey||t.shiftKey)return 0!==o&&o!=n||!(1<this.checklistContent.length)||38!=t.keyCode||t.ctrlKey||t.shiftKey?0!==o&&o!=n||!(1<this.checklistContent.length)||40!=t.keyCode||t.ctrlKey||t.shiftKey?i.empty||46!=t.keyCode||!t.ctrlKey||t.shiftKey?32==t.keyCode&&t.ctrlKey&&!t.shiftKey?(t&&t.stopPropagation(),t&&t.preventDefault(),i&&(i.checked=!i.checked,this._debounceChange()),!1):void 0:(t&&t.stopPropagation(),t&&t.preventDefault(),this.onDeleteItem(e,i),!1):(t&&t.stopPropagation(),t&&t.preventDefault(),void 0!==o&&void 0!==n&&o==n?(this.selected.index>=this.checklistContent.length-1?this.selected.index=0:this.selected.index+=1,this.setFocus(this.selected.index,0)):this.setFocus(this.selected.index,n),!1):(t&&t.stopPropagation(),t&&t.preventDefault(),void 0!==o&&void 0!==n&&0==o?(s=(0==this.selected.index?this.selected.index=this.checklistContent.length-1:--this.selected.index,this.checklistContent[this.selected.index].text.length),this.setFocus(this.selected.index,s)):this.setFocus(this.selected.index,0),!1);if(void 0!==o&&0==o)return 0<this.selected.index?this.addItem("",this.selected.index-1):(this.selected.index=-1,this.addItem("",-1)),t&&t.stopPropagation(),t&&t.preventDefault(),!1;if(n&&o&&n==o)return i.empty||this.addItem("",this.selected.index),t&&t.stopPropagation(),t&&t.preventDefault(),!1;if(n&&o&&o<n){var c,p;if(!i.empty)c=i.text.substring(0,o),p=i.text.substring(o),i.text=c,this.addItem(p,this.selected.index),this.setFocus(this.selected.index,0);return t&&t.stopPropagation(),t&&t.preventDefault(),!1}return t&&t.preventDefault(),!1}},o)};function o(t,e,i,n){var o=this;this.$element=t,this.$timeout=e,this.$document=i,this.$rootScope=n,t.addClass("pip-checklist-edit"),this.pipOptions&&_.isArray(this.pipOptions)||(this.pipOptions=[]),this.selected=new s,this.selected.drag=this.pipDraggable,this.selected.dragInit=this.pipDraggable,this.selected.id=this.now(),this.generateList(this.pipOptions),this._debounceChange=_.debounce(function(){o.onChecklistChange()},200)}angular.module("pipChecklistEdit",["pipComposite.Templates","pipBehaviors"]).component("pipChecklistEdit",n)},{}],5:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n={bindings:{ngDisabled:"<?",pipChanged:"=?",pipOptions:"=",pipRebind:"<?"},templateUrl:"checklist_view/ChecklistView.html",controller:(o.$inject=["$element"],o.prototype.$onChanges=function(t){this.toBoolean(this.pipRebind)&&t.pipOptions&&t.pipOptions.currentValue&&(angular.equals(this.pipOptions,t.pipOptions.currentValue)||(this.isChanged?this.isChanged=!1:this.pipOptions=t.pipOptions.currentValue))},o.prototype.toBoolean=function(t){return null!=t&&!!t&&("1"==(t=t.toString().toLowerCase())||"true"==t)},o.prototype.onChecklistChange=function(){this.isChanged=!0,this.pipChanged&&this.pipChanged(this.pipOptions)},o.prototype.onClick=function(t,e){t&&t.stopPropagation(),this.ngDisabled||this.onChecklistChange()},o)};function o(t){this.$element=t,this.isChanged=!1,this.pipOptions&&_.isArray(this.pipOptions)||(this.pipOptions=[]),t.addClass("pip-checklist-view")}angular.module("pipChecklistView",["pipComposite.Templates"]).component("pipChecklistView",n)},{}],6:[function(t,e,p){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(p,"__esModule",{value:!0});var r=t("../checklist_edit/ChecklistEdit"),l=t("../utilities/CompositeFocused"),o=t("../data"),a=t("async");p.CompositeEmptyEvent="pipCompositeNotEmpty",p.CompositeAddItemEvent="pipAddContent",p.CompositeNotEmptyEvent="pipCompositeNotEmpty";function s(){}p.CompositeAddItem=s;function c(t){t&&(t.setTranslations("en",{COMPOSITE_TITLE:"What's on your mind?",COMPOSITE_PLACEHOLDER:"Type text ...",COMPOSITE_START_TIME:"Start time",COMPOSITE_END_TIME:"End time"}),t.setTranslations("ru",{COMPOSITE_TITLE:"Что у вас на уме?",COMPOSITE_PLACEHOLDER:"Введите текст ...",COMPOSITE_START_TIME:"Время начала",COMPOSITE_END_TIME:"Время окончания"}))}c.$inject=["pipTranslate"];function d(){}p.CompositeControl=d;var u,h=(u=o.ContentBlock,i(m,u),m);function m(){return null!==u&&u.apply(this,arguments)||this}p.CompositeContent=h;var f=function(){};f.Text="text",f.Pictures="pictures",f.Checklist="checklist",f.Documents="documents",f.Location="location",f.Time="time",f.SecondaryBlock=["checklist","documents","location","time"],f.PrimaryBlock=["text","pictures"],f.All=["text","pictures","checklist","documents","location","time"],p.CompositeBlockTypes=f;var g=function(){this.index=0,this.drag=!0,this.dragId=0,this.isChanged=!1},b={bindings:{ngDisabled:"<?",pipChanged:"=?",pipCreated:"&?",pipContents:"=?",compositeId:"<?pipCompositeId",pipCompositePlaceholder:"<?",pipScrollContainer:"<?",addedContent:"<?pipAddedContent",pipRebind:"<?"},templateUrl:"composite_edit/CompositeEdit.html",controller:(C.$inject=["$q","$element","$timeout","$document","$rootScope","pipTranslate"],C.prototype.abortContent=function(){_.each(this.compositeContent,function(t){t.pictures&&t.pictures.abort?t.pictures.abort():t.documents&&t.documents.abort&&t.documents.abort()})},C.prototype.getPicIdsArray=function(t){var e=[];return _.each(t,function(t){t.id&&e.push(t.id)}),e},C.prototype.saveContent=function(i,n,o){var s,c=this;s=_.cloneDeep(this.compositeContent);var p=null;a.eachOf(this.compositeContent,function(e,t,i){e.pictures&&e.pictures.save?e.pictures.save(function(t){delete e.picIds,e.pic_ids=c.getPicIdsArray(t),i()},function(t){p=p||t,o?i(t):i()}):e.documents&&e.documents.save?e.documents.save(function(t){e.docs=t,i()},function(t){p=p||t,o?i(t):i()}):i()},function(t,e){t||p?(o&&c.abortContent(),c.compositeContent=s,n&&n(t)):(c.onCompositeChange(),i&&i(c.pipContents))})},C.prototype.$onDestroy=function(){angular.isFunction(this.cleanupCompositeEvent)&&this.cleanupCompositeEvent(),angular.isFunction(this.cleanupChecklistDraggEvent)&&this.cleanupChecklistDraggEvent(),angular.isFunction(this.cleanupCompositeFocusedEvent)&&this.cleanupCompositeFocusedEvent()},C.prototype.$onChanges=function(t){t.pipRebind&&t.pipRebind.currentValue!==t.pipRebind.previousValue&&(this.pipRebind=t.pipRebind.currentValue,this.pipRebind&&t.pipContents&&_.isArray(t.pipContents.currentValue)&&(!this.selected.isChanged||this.pipContents&&this.pipContents.length!=this.compositeContent.length)&&(this.generateList(this.pipContents),this.selected.isChanged=!1)),t.ngDisabled&&t.ngDisabled.currentValue!==t.ngDisabled.previousValue&&(this.ngDisabled=t.ngDisabled.currentValue),t.pipCompositePlaceholder&&t.pipCompositePlaceholder.currentValue!==t.pipCompositePlaceholder.previousValue&&(this.pipCompositePlaceholder=t.pipCompositePlaceholder.currentValue,this.setPlaceholder())},C.prototype.executeCallback=function(){this.pipCreated&&this.pipCreated({event:this.control})},C.prototype.toBoolean=function(t){return null!=t&&!!t&&("1"==(t=t.toString().toLowerCase())||"true"==t)},C.prototype.getEmptyItem=function(){return{empty:!0,id:this.getId(),type:"text",text:"",docs:[],pic_ids:[],loc_pos:null,loc_name:"",start:null,end:null,checklist:[]}},C.prototype.setPlaceholder=function(){this.compositePlaceholder=void 0===this.pipCompositePlaceholder||null===this.pipCompositePlaceholder?this.pipTranslate.translate(this.defaultPlaceholder):this.pipTranslate.translate(this.pipCompositePlaceholder)},C.prototype.addItem=function(t,e){if(!(_.indexOf(this.CONTENT_TYPES,t)<0)){var i={id:this.getId(),type:t,text:"text"==t?e:"",docs:"documents"==t&&e?e:[],pic_ids:"pictures"==t&&e?e:[],loc_pos:"location"==t&&e?e.loc_pos:null,loc_name:"location"==t&&e?e.loc_name:"",start:"time"==t&&e?e.start:null,end:"time"==t&&e?e.end:null,checklist:"checklist"==t&&e?e:[]},n=_.findIndex(this.compositeContent,{id:this.selected.index});n=n<0?0:n,1==this.compositeContent.length&&this.compositeContent[0].empty?this.compositeContent[0]=i:(this.compositeContent.splice(n+1,0,i),n+=1),this.selected.index=i.id,this.onSelect(),setTimeout(this.scrollTo(this.pipScrollContainer,"#composite-item-"+this.selected.id+"-"+n),1e3),this.isFirst=!1,this.setToolbar(),this._debounceChange()}},C.prototype.getId=function(){var e=-1;return _.each(this.compositeContent,function(t){e<t.id&&(e=t.id)}),e+1},C.prototype.scrollTo=function(e,i){e&&i&&setTimeout(function(){if($(i).position()&&!(Math.abs($(e).scrollTop()-$(i).position().top)<20)){var t=$(e).scrollTop()+($(i).position().top-20);$(e).animate({scrollTop:t+"px"},300)}},100)},C.prototype.getPicIds=function(t){var i=[];return _.each(t,function(t){var e={id:t};i.push(e)}),i},C.prototype.generateList=function(t){var e=this;!t||t.length<1?this.clearList():(this.compositeContent=[],_.each(t,function(t){t.id=e.getId(),t.picIds=t.pic_ids?e.getPicIds(t.pic_ids):null,e.compositeContent.push(t)}),this.isFirst=!1,this.setToolbar())},C.prototype.setToolbar=function(){2<this.compositeContent.length||this.$rootScope.$emit(p.CompositeNotEmptyEvent,!this.isFirst)},C.prototype.clearList=function(){this.compositeContent=[],this.compositeContent.push(this.getEmptyItem()),this.isFirst=!0},C.prototype.now=function(){return+new Date},C.prototype.updateContents=function(){this.selected.isChanged=!0,this.pipContents=this.compositeContent},C.prototype.getParentIndex=function(t){if(t.length<1)return null;var e=t.parent();if(e[0]&&e[0].id&&-1<e[0].id.indexOf("composite-item-"+this.selected.id)){var i=e[0].id.split("-");return parseInt(i[i.length-1],10)}return this.getParentIndex(e)},C.prototype.isActiveChecklist=function(t){return t.id==this.selected.id},C.prototype.onKeyUp=function(t){var i=this;9==t.keyCode&&this.$timeout(function(){var t=angular.element(i.$document[0].activeElement),e=i.getParentIndex(t);null!=e&&(i.selected.index=e),i.selected.index=i.compositeContent[e].id},50)},C.prototype.onKeyDown=function(t,e,i){this.ngDisabled||i&&!i.empty&&46==t.keyCode&&!t.ctrlKey&&t.shiftKey&&(t&&(t.stopPropagation(),t.preventDefault()),-1<e&&this.onDeleteItem(e))},C.prototype.onCompositeChange=function(){this.updateContents(),this.pipChanged&&this.pipChanged(this.pipContents)},C.prototype.onDeleteItem=function(t){t<0||0==this.compositeContent.length||(1==this.compositeContent.length?(this.compositeContent[0]=this.getEmptyItem(),this.selected.index=this.compositeContent[0].id,this.onSelect(0),this.isFirst=!0,this.setToolbar()):(0<=t&&t<this.compositeContent.length&&this.compositeContent.splice(t,1),t==this.compositeContent.length?this.selected.index=this.compositeContent[this.compositeContent.length-1].id:this.selected.index=this.compositeContent[t].id,this.onSelect()),this.setToolbar(),this._debounceChange())},C.prototype.onContentChange=function(t){t&&t.empty&&t.text&&(t.empty=!1,this.isFirst=!1,this.setToolbar()),this.ngDisabled||this._debounceChange()},C.prototype.isSelectedSection=function(t,e){return this.selected.index==e.id&&!e.empty},C.prototype.onDraggEnd=function(){this.selected.drag=!0},C.prototype.onStart=function(t){t&&t!=this.selected.dragId&&(this.selected.drag=!1)},C.prototype.onStop=function(t){var e=this;this.$timeout(function(){e.selected.drag=!0,e.selected.dragId=0},500)},C.prototype.onDownDragg=function(t,e){this.ngDisabled||(this.selected.dragId=this.selected.id,this.selected.drag=!0,this.selected.index=e.id)},C.prototype.onClick=function(t,e,i){this.ngDisabled||(this.selected.event="onClick",t&&t.target&&t.target.tagName&&("INPUT"==t.target.tagName||"TEXTAREA"==t.target.tagName)?this.selected.index=i.id:this.selected.index==i.id&&"checklist"==i.type&&0<i.checklist.length||this.selected.index==i.id&&"location"==i.type||(this.selected.index=i.id,this.onSelect()))},C.prototype.onDropComplete=function(t,e,i,n){if(n==this.selected.id&&e&&e.type){var o,s=t,c=_.findIndex(this.compositeContent,{id:e.id});if(0!=c||1!=t){if(s<c){for(s>this.compositeContent.length-1&&(s=this.compositeContent.length-1),o=0;o<c-s;o++)this.compositeContent[c-o]=this.compositeContent[c-o-1];this.compositeContent[s]=e}if(c<s){for(--s,o=0;o<s-c;o++)this.compositeContent[c+o]=this.compositeContent[c+o+1];this.compositeContent[s]=e}this.selected.index=this.compositeContent[s].id}this.onSelect(),this._debounceChange()}else this.compositeContent=_.cloneDeep(this.pipContents)},C.prototype.onSelect=function(t){var e=this;if(!((t=t||_.findIndex(this.compositeContent,{id:this.selected.index}))<0)){var i,n=this.compositeContent[t];if(!_.isEmpty(n))switch(n.type){case"pictures":setTimeout(function(){(i=angular.element("#composite-item-"+e.selected.id+"-"+t+" button.pip-picture-upload"))&&!i.is(":focus")&&i.focus()},50);break;case"documents":setTimeout(function(){(i=angular.element("#composite-item-"+e.selected.id+"-"+t+" button.pip-document-upload"))&&!i.is(":focus")&&i.focus()},50);break;case"location":setTimeout(function(){(i=angular.element("#composite-item-"+e.selected.id+"-"+t+" .pip-location-empty  button"))&&!i.is(":focus")&&i.focus()},50)}}},C)};function C(t,e,i,n,o,s){var c=this;this.$q=t,this.$element=e,this.$timeout=i,this.$document=n,this.$rootScope=o,this.pipTranslate=s,this.defaultPlaceholder="COMPOSITE_PLACEHOLDER",this.CONTENT_TYPES=f.All,this.selected=new g,this.selected.id=this.now(),e.addClass("pip-composite-edit"),this.generateList(this.pipContents),this.setPlaceholder(),this.control={save:function(t,e){c.saveContent(t,e)},abort:function(){c.abortContent()},error:null},this.executeCallback(),this.cleanupCompositeEvent=this.$rootScope.$on(p.CompositeAddItemEvent,function(t,e){(!c.compositeId||e.id&&e.id==c.compositeId)&&c.addItem(e.type)}),this.cleanupChecklistDraggEvent=this.$rootScope.$on(r.ChecklistDraggEvent,function(){c.selected.drag=!1,c.$timeout(function(){c.selected.drag=!1},0)}),this.cleanupCompositeFocusedEvent=this.$rootScope.$on(l.CompositeFocusedEvent,function(){c.isFirst&&c.$timeout(function(){var t=angular.element("#composite-item-text-"+c.selected.id+"-0");t&&!t.is(":focus")&&t.focus()},50)}),this._debounceChange=_.debounce(function(){c.onCompositeChange()},200)}angular.module("pipCompositeEdit",["pipDocuments","pipLocations","pipPictures","pipDates","pipComposite.Templates"]).run(c).component("pipCompositeEdit",b)},{"../checklist_edit/ChecklistEdit":4,"../data":15,"../utilities/CompositeFocused":22,async:1}],7:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=t("../composite_edit/CompositeEdit"),n={bindings:{pipContents:"<?",pipChecklistSize:"<?",pipTextSize:"<?",pipPrimaryBlockLimit:"<?",pipSecondaryBlockLimit:"<?",pipSecondaryBlockTypes:"<?",pipRebind:"<?"},templateUrl:"composite_summary/CompositeSummary.html",controller:(s.$inject=["$element"],s.prototype.$onChanges=function(t){this.toBoolean(this.pipRebind)&&t.pipContents&&t.pipContents.currentValue&&(angular.equals(this.pipContents,t.pipContents.currentValue)||this.generateList(this.pipContents))},s.prototype.getPicIds=function(t){var i=[];return _.each(t,function(t){var e={id:t};i.push(e)}),i},s.prototype.toBoolean=function(t){return null!=t&&!!t&&("1"==(t=t.toString().toLowerCase())||"true"==t)},s.prototype.limitChecklist=function(t,i){if(i){var n={text:"...",checked:!1};_.each(t,function(t){if(t&&t.type==o.CompositeBlockTypes.Checklist){var e=t.checklist.length;t.checklist=_.take(t.checklist,i),i<e&&t.checklist.push(n)}})}},s.prototype.selectSummary=function(t){var e,i=this,n=[];return _.each(t,function(t){if(0<=i.pipPrimaryBlockLimit&&e>=i.pipPrimaryBlockLimit)return n;i.pipSecondaryBlockTypes.indexOf(t.type)<0&&(n.push(t),e+=1)}),n},s.prototype.selectSummarySecondary=function(t,e){for(var i,n=this.pipSecondaryBlockLimit<0?t.length:this.pipSecondaryBlockLimit,o=[];i<t.length&&!(-1<e.indexOf(t[i].type)&&(o.push(t[i]),o.length>=n));i++);return o},s.prototype.generateList=function(t){var e=this;if(!t||t.length<1)this.clearList();else{var i,n=_.cloneDeep(t),o=this.selectSummary(n);0==o.length&&(o=this.selectSummarySecondary(n,this.pipSecondaryBlockTypes)),this.limitChecklist(o,this.pipChecklistSize),_.each(o,function(t){t.id=i,t.picIds=t.pic_ids?e.getPicIds(t.pic_ids):null,i++}),this.compositeContent=o}},s.prototype.clearList=function(){this.compositeContent=[]},s)};function s(t){this.$element=t,this.disableControl=!0,this.disabledChecklist=!0,t.addClass("pip-composite-summary"),this.pipChecklistSize=this.pipChecklistSize?this.pipChecklistSize:0,this.pipTextSize=this.pipTextSize?this.pipTextSize:0,this.pipPrimaryBlockLimit=void 0===this.pipPrimaryBlockLimit||null===this.pipPrimaryBlockLimit?-1:this.pipPrimaryBlockLimit,this.pipSecondaryBlockLimit=void 0===this.pipSecondaryBlockLimit||null===this.pipSecondaryBlockLimit?-1:this.pipSecondaryBlockLimit,this.pipSecondaryBlockTypes=this.pipSecondaryBlockTypes&&_.isArray(this.pipSecondaryBlockTypes)?this.pipSecondaryBlockTypes:o.CompositeBlockTypes.SecondaryBlock,this.generateList(this.pipContents)}angular.module("pipCompositeSummary",["pipDocuments","pipLocations","pipPictures","pipDates","pipComposite.Templates"]).component("pipCompositeSummary",n)},{"../composite_edit/CompositeEdit":6}],8:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});function n(){}var o=t("../composite_edit/CompositeEdit");i.CompositeAddItemEventParams=n;var s=function(){this.picture=!0,this.document=!0,this.location=!0,this.event=!0,this.checklist=!0,this.text=!0};i.CompositeToolbarButton=s;function c(t){t.translations("en",{TEXT:"Text",CHECKLIST:"Checklist",LOCATION:"Location",PICTURE:"Picture",TIME:"Time",DOCUMENT:"Document"}),t.translations("ru",{TEXT:"Текст",CHECKLIST:"Список",LOCATION:"Локация",PICTURE:"Изображение",TIME:"Время",DOCUMENT:"Document"})}c.$inject=["pipTranslateProvider"];var p={bindings:{ngDisabled:"<?",emptyState:"<?pipCompositeEmpty",pipToolbarButton:"=?",compositeId:"=?pipCompositeId"},templateUrl:"composite_toolbar/CompositeToolbar.html",controller:(r.$inject=["$rootScope","$element"],r.prototype.$onDestroy=function(){angular.isFunction(this.cleanupCompositeEvent)&&this.cleanupCompositeEvent()},r.prototype.$onChanges=function(t){t.pipToolbarButton&&t.pipToolbarButton.currentValue&&this.setOption()},r.prototype.toBoolean=function(t){return null!=t&&!!t&&("1"==(t=t.toString().toLowerCase())||"true"==t)},r.prototype.onAddItem=function(t){var e={type:t,id:this.compositeId};this.$rootScope.$emit(o.CompositeAddItemEvent,e)},r.prototype.setOption=function(){_.assign(this.pipToolbarButton,this.pipToolbarButton),this.toolbarButton.text=!0},r)};function r(t,e){var i=this;this.$rootScope=t,this.$element=e,this.toolbarButton=new s,this.setOption(),e.addClass("pip-composite-toolbar"),this.cleanupCompositeEvent=this.$rootScope.$on(o.CompositeEmptyEvent,function(t,e){i.emptyState=!e})}angular.module("pipCompositeToolbar",["pipComposite.Templates"]).config(c).component("pipCompositeToolbar",p)},{"../composite_edit/CompositeEdit":6}],9:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n={bindings:{ngDisabled:"<?",pipDisabledChecklist:"<?",pipChanged:"=?",pipContents:"=?",pipRebind:"<?"},templateUrl:"composite_view/CompositeView.html",controller:(o.$inject=["$element","$attrs"],o.prototype.$onChanges=function(t){t.pipRebind&&t.pipRebind.currentValue!==t.pipRebind.previousValue&&(this.pipRebind=t.pipRebind.currentValue,this.pipRebind&&t.pipContents&&_.isArray(t.pipContents.currentValue)&&(!0===this.selected.isChanged?this.selected.isChanged=!1:this.generateList(t.pipContents.currentValue))),t.ngDisabled&&t.ngDisabled.currentValue!==t.ngDisabled.previousValue&&(this.ngDisabled=t.ngDisabled.currentValue),t.pipDisabledChecklist&&t.pipDisabledChecklist.currentValue!==t.pipDisabledChecklist.previousValue&&(this.pipDisabledChecklist=t.pipDisabledChecklist.currentValue)},o.prototype.getPicIds=function(t){var i=[];return _.each(t,function(t){var e={id:t};i.push(e)}),i},o.prototype.updateContents=function(){this.selected.isChanged=!0,this.pipContents=this.compositeContent},o.prototype.isDisabled=function(){return!0===this.pipDisabledChecklist||!0===this.ngDisabled},o.prototype.onContentChange=function(){this.updateContents(),this.pipChanged&&this.pipChanged(this.pipContents)},o.prototype.onCompositeChange=function(){this.updateContents(),this.pipChanged&&this.pipChanged(this.pipContents)},o.prototype.generateList=function(t){var e=this;if(!t||t.length<1)this.clearList();else{this.compositeContent=[];var i=0;_.each(t,function(t){if("object"!=typeof t||null==t)throw new Error("Error: content error!");t.id=i,t.picIds=t.pic_ids?e.getPicIds(t.pic_ids):null,i++,e.compositeContent.push(t)})}},o.prototype.clearList=function(){this.compositeContent=[]},o)};function o(t,e){this.$element=t,this.$attrs=e,this.selected={},t.addClass("pip-composite-view"),this.selected.isChanged=!1,this.pipContents=_.isArray(this.pipContents)?this.pipContents:[],this.generateList(this.pipContents)}angular.module("pipCompositeView",["pipDocuments","pipLocations","pipPictures","pipDates","pipComposite.Templates","pipEmbeddedView"]).component("pipCompositeView",n)},{}],10:[function(t,e,i){function n(n){return{restrict:"EA",scope:!1,templateUrl:"content_switch/ContentSwitch.html",link:function(t,e,i){new o(n,t,e,i)}}}var o=(s.$inject=["$parse","$scope","$element","$attrs"],s.prototype.scrollTo=function(e){var i=this;setTimeout(function(){if(!(Math.abs($(i.parentElement).scrollTop()-$(e).position().top)<20)){var t=$(i.parentElement).scrollTop()+($(e).position().top-20);$(i.parentElement).animate({scrollTop:t+"px"},300)}},100)},s.prototype.setOption=function(){null!==this.$scope.contentSwitchOption&&void 0!==this.$scope.contentSwitchOption?(this.$scope.showIconPicture=this.$scope.contentSwitchOption.picture?this.$scope.contentSwitchOption.picture:this.$scope.showIconPicture,this.$scope.showIconDocument=this.$scope.contentSwitchOption.document?this.$scope.contentSwitchOption.document:this.$scope.showIconDocument,this.$scope.showIconLocation=this.$scope.contentSwitchOption.location?this.$scope.contentSwitchOption.location:this.$scope.showIconLocation,this.$scope.showIconEvent=this.$scope.contentSwitchOption.event?this.$scope.contentSwitchOption.event:this.$scope.showIconEvent):(this.$scope.showIconPicture=!0,this.$scope.showIconDocument=!0,this.$scope.showIconLocation=!0,this.$scope.showIconEvent=!0)},s.prototype.onButtonClick=function(t){if(this.parentElement)switch(t){case"event":this.$scope.showEvent&&scrollTo(".event-edit");break;case"documents":this.$scope.showDocuments&&scrollTo(".pip-document-list-edit");break;case"pictures":this.$scope.showPictures&&scrollTo(".pip-picture-list-edit");break;case"location":this.$scope.showLocation&&scrollTo(".pip-location-edit")}},s);function s(t,e,i,n){this.$parse=t,this.$scope=e,this.$element=i,this.$attrs=n,this.parentElementNameGetter=t(n.pipParentElementName),this.parentElement=this.parentElementNameGetter(e),this.setOption()}n.$inject=["$parse"],angular.module("pipContentSwitch",["pipComposite.Templates"]).directive("pipContentSwitch",n)},{}],11:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});function n(){}i.ChecklistItem=n},{}],12:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});function n(){}i.ContentBlock=n},{}],13:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){};n.Text="text",n.Checklist="checklist",n.Location="location",n.Time="time",n.Pictures="pictures",n.Documents="documents",n.Embedded="embedded",n.Custom="custom",i.ContentBlockType=n},{}],14:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){};n.Youtube="youtube",n.Custom="custom",i.EmbeddedType=n},{}],15:[function(t,e,i){"use strict";function n(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}Object.defineProperty(i,"__esModule",{value:!0}),t("./Content"),t("./ChecklistItem"),t("./ContentBlockType"),n(t("./Content")),n(t("./ChecklistItem")),n(t("./ContentBlockType"))},{"./ChecklistItem":11,"./Content":12,"./ContentBlockType":13}],16:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=t("../data/EmbeddedType"),n={embed_type:"=?pipEmbeddedType",embed_uri:"=?pipEmbeddedUri",onChange:"=pipChanged",ngDisabled:"&?ngDisabled"},s=(c.$inject=["$element","$scope","$state","pipMedia"],c.prototype.$onInit=function(){},c.prototype.$onChanges=function(t){console.log("$onChanges"),this.init()},c.prototype.$postLink=function(){console.log("postlink",this.$scope),this.form=this.$scope.embedded},c.prototype.init=function(){this.embed_type||(this.embed_type=o.EmbeddedType.Custom)},c.prototype.onChangeType=function(){console.log("onChangeType"),this.form.url.$error||this.onChange(this.embed_type,this.embed_uri)},c.prototype.onChangeUrl=function(){console.log("onChangeUrl"),this.onChange(this.embed_type,this.embed_uri)},c.prototype.isDisabled=function(){return!!this.ngDisabled&&this.ngDisabled()},c);function c(t,e,i,n){this.$element=t,this.$scope=e,this.$state=i,this.pipMedia=n,this.embeddedTypeCollection=[{title:"EMBEDDED_TYPE_CUSTOM",shortTitle:"EMBEDDED_TYPE_CUSTOM_SHORT",id:o.EmbeddedType.Custom},{title:"EMBEDDED_TYPE_YOUTUBE",shortTitle:"EMBEDDED_TYPE_YOUTUBE_SHORT",id:o.EmbeddedType.Youtube}],t.addClass("pip-embedded-edit"),this.init()}function p(t){t.translations("en",{EMBEDDED_TYPE_LABEL:"Embedded type",EMBEDDED_URL_LABEL:"Embedded uri",EMBEDDED_TYPE_HINT:"Enter uri of embedded resource",EMBEDDED_URL_ERROR:"Uri error",EMBEDDED_TYPE_CUSTOM:"Custom",EMBEDDED_TYPE_YOUTUBE:"Youtube",EMBEDDED_TYPE_CUSTOM_SHORT:"Custom",EMBEDDED_TYPE_YOUTUBE_SHORT:"Youtube"}),t.translations("ru",{EMBEDDED_TYPE_LABEL:"Тип встроенного ресурса",EMBEDDED_URL_LABEL:"Uri встроенного ресурса",EMBEDDED_TYPE_HINT:"Введите uri встроенного ресурса",EMBEDDED_URL_ERROR:"Неверный uri",EMBEDDED_TYPE_CUSTOM:"Другой",EMBEDDED_TYPE_YOUTUBE:"Youtube",EMBEDDED_TYPE_CUSTOM_SHORT:"Другой",EMBEDDED_TYPE_YOUTUBE_SHORT:"Youtube"})}p.$inject=["pipTranslateProvider"],angular.module("pipEmbeddedEdit",[]).component("pipEmbeddedEdit",{bindings:n,templateUrl:"embedded_edit/EmbeddedEdit.html",controller:s,controllerAs:"$ctrl"}).config(p)},{"../data/EmbeddedType":14}],17:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n={embed_type:"=?pipEmbeddedType",embed_uri:"=?pipEmbeddedUri"},o=(s.$inject=["$element","pipMedia"],s.prototype.$onInit=function(){},s.prototype.$onChanges=function(t){console.log("$onChanges"),this.init()},s.prototype.init=function(){},s);function s(t,e){this.$element=t,this.pipMedia=e,t.addClass("pip-embedded-view"),this.init()}function c(t){t.translations("en",{}),t.translations("ru",{})}function p(t){t.resourceUrlWhitelist(["self","https://www.youtube.com/**"])}p.$inject=["$sceDelegateProvider"],c.$inject=["pipTranslateProvider"],angular.module("pipEmbeddedView",[]).component("pipEmbeddedView",{bindings:n,templateUrl:"embedded_view/EmbeddedView.html",controller:o,controllerAs:"$ctrl"}).config(p).config(c)},{}],18:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),t("./checklist_edit/ChecklistEdit"),t("./checklist_view/ChecklistView"),t("./composite_edit/CompositeEdit"),t("./composite_summary/CompositeSummary"),t("./composite_toolbar/CompositeToolbar"),t("./composite_view/CompositeView"),t("./utilities/CompositeFocused"),t("./mobile_mouse"),t("./content_switch/ContentSwitch"),t("./embedded_edit/EmbeddedEdit"),t("./embedded_view/EmbeddedView"),t("./data"),angular.module("pipComposite",["pipContentSwitch","pipChecklistEdit","pipChecklistView","pipCompositeEdit","pipCompositeView","pipCompositeSummary","pipCompositeToolbar","pipCompositeFocused","pipMobileMouse","pipEmbeddedEdit","pipEmbeddedView"]),function(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}(t("./data"))},{"./checklist_edit/ChecklistEdit":4,"./checklist_view/ChecklistView":5,"./composite_edit/CompositeEdit":6,"./composite_summary/CompositeSummary":7,"./composite_toolbar/CompositeToolbar":8,"./composite_view/CompositeView":9,"./content_switch/ContentSwitch":10,"./data":15,"./embedded_edit/EmbeddedEdit":16,"./embedded_view/EmbeddedView":17,"./mobile_mouse":21,"./utilities/CompositeFocused":22}],19:[function(t,e,i){function n(e,t,i){t.bind("touchstart mousedown",function(t){e.$apply(i.pipMobileMousedown)})}angular.module("pipMobileMouse").directive("pipMobileMousedown",function(){return n})},{}],20:[function(t,e,i){function n(e,t,i){t.bind("touchend mouseup",function(t){e.$apply(i.pipMobileMouseup)})}angular.module("pipMobileMouse").directive("pipMobileMouseup",function(){return n})},{}],21:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),angular.module("pipMobileMouse",[]),t("./MobileMousedown"),t("./MobileMouseup")},{"./MobileMousedown":19,"./MobileMouseup":20}],22:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.CompositeFocusedEvent="focusedComposite";var n=(o.$inject=["$element","$rootScope"],o);function o(t,e){t.bind("touchstart mousedown",function(t){e.$broadcast(i.CompositeFocusedEvent)})}angular.module("pipCompositeFocused",[]).directive("pipCompositeFocused",function(){return{restrict:"A",scope:!1,controller:n}})},{}],23:[function(t,e,i){!function(e){try{e=angular.module("pipComposite.Templates")}catch(t){e=angular.module("pipComposite.Templates",[])}e.run(["$templateCache",function(t){t.put("checklist_edit/ChecklistEdit.html",'<div ng-class="{\'pip-checklist-draggable\': $ctrl.selected.drag}" id="{{\'checklist-\' + $ctrl.selected.id}}"><div ng-repeat="item in $ctrl.checklistContent" ng-mousedown="$ctrl.onClick($event, $index)" class="pip-checklist-item" id="{{\'check-item-\' + $ctrl.selected.id + \'-\' + $index}}" pip-drag="$ctrl.checklistContent.length > 1 && $ctrl.selected.drag && !item.empty" pip-drag-data="item" pip-force-touch="true" pip-touch-delay="30" pip-drop="true" pip-drag-stop="$ctrl.onStop(selected.id)" pip-drag-start="$ctrl.onStart(selected.id)" pip-scroll-container="$ctrl.pipScrollContainer" pip-drop-success="$ctrl.onDropComplete($index, $data, $event, $ctrl.selected.id)"><div ng-class="{\'put_place\': $ctrl.selected.drag}"></div><div class="pip-checklist-item-body layout-row layout-align-start-start" pip-cancel-drag="true" ng-class="{ \'select-active-item\': $ctrl.isSelectedItem($index) }"><div class="pip-checklist-button" pip-cancel-drag="true"><md-button pip-drag-handle="" class="pip-icon-checklist-button md-icon-button no-ripple-container" aria-label="REARRANGE" tabindex="-1" pip-mobile-mousedown="$ctrl.onDownDragg(item)" pip-mobile-mouseup="$ctrl.onDraggEnd()" ng-if="$ctrl.pipDraggable && $ctrl.checklistContent.length > 2 && !item.empty" ng-class="$ctrl.checklistContent.length > 1 ? \'cursor-move\' : \'cursor-default\'" ng-disabled="$ctrl.ngDisabled"><md-icon class="text-grey" md-svg-icon="icons:vhandle"></md-icon></md-button></div><div class="pip-checklist-button" style="overflow: hidden" pip-cancel-drag="true"><div class="pip-checklist-button-container"><md-button class="pip-icon-checklist-button md-icon-button" ng-show="item.empty" ng-disabled="$ctrl.ngDisabled" md-ink-ripple="" ng-click="$ctrl.onAddItem()" tabindex="-1" aria-label="PLUS"><md-icon class="text-grey" md-svg-icon="icons:plus"></md-icon></md-button><md-checkbox ng-model="item.checked" ng-show="!item.empty" aria-label="COMPLETE" pip-cancel-drag="true" ng-focus="$ctrl.onItemFocus($index)" ng-change="$ctrl.onChecked(item)" ng-disabled="$ctrl.ngDisabled"></md-checkbox></div></div><div class="pip-checklist-text flex" pip-cancel-drag="true"><md-input-container md-no-float="" class="flex"><textarea ng-model="item.text" name="{{\'text\' + $index}}" aria-label="TEXT" class="pip-text-checkbox" ng-focus="$ctrl.onItemFocus($index)" ng-change="$ctrl.onChangeItem($index)" ng-keydown="$ctrl.onTextareaKeyDown($event, $index, item)" placeholder="{{::\'TEXT\' | translate}}" id="{{\'check-item-text-\' + selected.id + \'-\' + $index}}" ng-disabled="$ctrl.ngDisabled">\n                    </textarea></md-input-container></div><div class="pip-checklist-button" pip-cancel-drag="true"><md-button class="pip-icon-checklist-button md-icon-button" md-ink-ripple="" ng-click="$ctrl.onDeleteItem($index, item)" ng-disabled="$ctrl.ngDisabled" tabindex="-1" ng-focus="$ctrl.onItemFocus($index)" ng-show="$ctrl.isSelectedItem($index)" aria-label="DELETE-ITEM"><md-icon class="text-grey" md-svg-icon="icons:cross-circle"></md-icon></md-button></div></div></div><div id="{{\'check-item-empty-\' + $ctrl.selected.id}}" class="pip-empty-text" pip-drag="false" pip-drop="true" pip-drop-success="$ctrl.onDropComplete($ctrl.checklistContent.length, $data, $event, $ctrl.selected.id)"><div ng-class="{\'put_place\': $ctrl.selected.drag}"></div></div></div>')}])}(),function(e){try{e=angular.module("pipComposite.Templates")}catch(t){e=angular.module("pipComposite.Templates",[])}e.run(["$templateCache",function(t){t.put("checklist_view/ChecklistView.html",'<div ng-repeat="item in $ctrl.pipOptions track by $index"><div class="pip-checklist-item layout-row layout-align-start-start"><div class="pip-checklist-icon"><md-checkbox ng-model="item.checked" ng-click="$ctrl.onClick($event, item)" aria-label="COMPLETE" ng-disabled="$ctrl.ngDisabled"></md-checkbox></div><div class="pip-checklist-text flex"><pip-markdown pip-text="item.text" pip-rebind="true" ng-disabled="true"></pip-markdown></div></div></div>')}])}(),function(e){try{e=angular.module("pipComposite.Templates")}catch(t){e=angular.module("pipComposite.Templates",[])}e.run(["$templateCache",function(t){t.put("composite_edit/CompositeEdit.html",'<div class="divider-top"><div class="pip-composite-body" ng-show="$ctrl.compositeContent.length != 0" ng-class="{\'drag-active\': $ctrl.selected.drag}"><div class="pip-composite-item" ng-repeat="obj in $ctrl.compositeContent track by obj.id" ng-mousedown="$ctrl.onClick($event, $index, obj)" ng-class="{\'selected-content\': $ctrl.isSelectedSection($index, obj), \'composite-animate\': !obj.empty && $ctrl.compositeContent.length > 1}" ng-keyup="$ctrl.onKeyUp($event)" ng-keydown="$ctrl.onKeyDown($event, $index, obj)" pip-drag="$ctrl.compositeContent.length > 1 && $ctrl.selected.drag" pip-touch-delay="10" pip-drag-data="obj" pip-scroll-container="$ctrl.pipScrollContainer" pip-drop="true" pip-force-touch="true" pip-drag-stop="$ctrl.onStop($ctrl.selected.id)" pip-drag-start="$ctrl.onStart($ctrl.selected.id)" pip-drop-success="$ctrl.onDropComplete($index, $data, $event, $ctrl.selected.id)" id="{{\'composite-item-\' + $ctrl.selected.id + \'-\' + $index}}"><div class="putt_box"></div><div class="pip-section-header layout-row layout-align-start-center" ng-if="!obj.empty"><div class="w38"></div><md-button class="md-icon-button md-icon-button-little icon-rearrange-btn no-ripple-container rm8 cursor-move" ng-if="!$ctrl.ngDisabled && $ctrl.compositeContent.length > 1" pip-drag-handle="" pip-mobile-mousedown="$ctrl.onDownDragg($event, obj)" pip-mobile-mouseup="$ctrl.onDraggEnd()" tabindex="-1" aria-label="COMPOSITE-DRAGG" ng-hide="$ctrl.compositeContent.length == 1"><md-icon class="composite-icon cursor-move" md-svg-icon="icons:handle"></md-icon></md-button><div><md-button class="md-icon-button md-icon-button-little rm8" ng-click="$ctrl.onDeleteItem($index)" ng-disabled="$ctrl.ngDisabled" aria-label="COMPOSITE-DELETE"><md-icon class="composite-icon" md-svg-icon="icons:cross"></md-icon></md-button></div></div><div class="pip-section-content rp24-flex lp24-flex tp16 bp16" ng-if="obj.type == \'text\'" pip-cancel-drag="true"><md-input-container class="p0 m0 w-stretch" md-no-float=""><textarea ng-model="obj.text" aria-label="text" placeholder="{{ $ctrl.isFirst ? $ctrl.compositePlaceholder : \'TEXT\' | translate}}" id="{{\'composite-item-text-\' + $ctrl.selected.id + \'-\' + $index}}" ng-change="$ctrl.onContentChange(obj)" pip-cancel-drag="true" ng-disabled="$ctrl.ngDisabled">\n                            </textarea></md-input-container></div><div class="pip-section-content rp24-flex lp24-flex vp20" ng-if="obj.type == \'pictures\'" pip-cancel-drag="true"><pip-picture-list-edit class="w-stretch" pip-cancel-drag="true" pip-pictures="obj.picIds" pip-changed="$ctrl.onContentChange(obj)" pip-created="obj.pictures = $event.sender" pip-added-picture="$ctrl.addedContent" ng-disabled="$ctrl.ngDisabled"></pip-picture-list-edit></div><div class="pip-section-content rp24-flex lp24-flex vp20" ng-if="obj.type == \'documents\'" pip-cancel-drag="true"><pip-document-list-edit class="w-stretch" pip-documents="obj.docs" pip-cancel-drag="true" pip-changed="$ctrl.onContentChange(obj)" pip-created="obj.documents = $event.sender" pip-added-document="$ctrl.addedContent" ng-disabled="$ctrl.ngDisabled"></pip-document-list-edit></div><div class="pip-section-embedded rp24-flex lp24-flex vp20" ng-if="obj.type == \'embedded\'" pip-cancel-drag="true"><pip-embedded-edit pip-embedded-type="obj.embed_type" pip-embedded_uri="obj.embed_uri" pip-cancel-drag="true" pip-changed="$ctrl.onContentChange(obj)" ng-disabled="$ctrl.ngDisabled"></pip-embedded-edit></div><div class="pip-section-content layout-row layout-align-start-center" ng-if="obj.type == \'checklist\'" pip-cancel-drag="true"><pip-checklist-edit pip-options="obj.checklist" pip-draggable="$ctrl.isActiveChecklist(obj)" pip-changed="$ctrl.onContentChange(obj)" ng-disabled="$ctrl.ngDisabled" pip-scroll-container="$ctrl.pipScrollContainer" pip-rebind="true"></pip-checklist-edit></div><div class="pip-section-content vp20 rp24-flex lp24-flex" ng-if="obj.type == \'location\'" pip-cancel-drag="true"><pip-location-edit class="pip-location-attachments w-stretch" pip-location-name="obj.loc_name" pip-location-pos="obj.loc_pos" pip-cancel-drag="true" xxxpip-location-holder="$ctrl.pipLocationHolder" pip-changed="$ctrl.onContentChange(obj)" ng-disabled="$ctrl.ngDisabled"></pip-location-edit></div><div class="pip-section-content bp16-flex rp24-flex lp24-flex tp20" ng-if="obj.type == \'time\'" pip-cancel-drag="true"><pip-time-range-edit class="w-stretch" pip-start-date="obj.start" pip-end-date="obj.end" xxxpip-size="$sizeGtSmall" pip-changed="$ctrl.onContentChange(obj)" ng-disabled="$ctrl.ngDisabled" pip-start-label="{{ \'COMPOSITE_START_TIME\' | translate }}" pip-end-label="{{ \'COMPOSITE_END_TIME\' | translate }}"></pip-time-range-edit></div></div><div class="pip-composite-item w-stretch" pip-drag="false" pip-drop="true" pip-drop-success="$ctrl.onDropComplete($ctrl.compositeContent.length, $data, $event, $ctrl.selected.id)" pip-drag-stop="$ctrl.onStop($ctrl.selected.id)" pip-drag-start="$ctrl.onStart($ctrl.selected.id)" id="{{\'pip-composite-last-\' + $ctrl.selected.id}}"><div class="putt_box"></div><div class="pip-section-content h24" style="border: 0px!important;"></div></div></div></div>')}])}(),function(e){try{e=angular.module("pipComposite.Templates")}catch(t){e=angular.module("pipComposite.Templates",[])}e.run(["$templateCache",function(t){t.put("composite_summary/CompositeSummary.html",'<div ng-repeat="item in $ctrl.compositeContent track by $index"><div class="pip-composite-text" ng-if="item.type == \'text\' && item.text"><pip-markdown pip-text="item.text" pip-line-count="$ctrl.textSize" pip-rebind="true" ng-disabled="true"></pip-markdown></div><div ng-if="item.type == \'pictures\' && item.picIds && item.picIds.length > 0" ng-class="$ctrl.compositeContent[$index - 1].type != \'pictures\' ? $ctrl.compositeContent[$index + 1].type != \'pictures\' ? \'tm16 bm16\' : \'tm16 bm0\' : $ctrl.compositeContent[$index + 1].type != \'pictures\' ? \'tm8 bm16\' : \'tm8 bm0\'" class="pip-composite-pictures"><pip-collage pip-pictures="item.picIds" pip-unique-code="item.id" pip-multiple="true" pip-open="$ctrl.disableControl" pip-rebind="true" ng-disabled="$ctrl.disableControl"></pip-collage></div><div ng-if="item.type == \'documents\' && item.docs && item.docs.length > 0" class="pip-composite-documents layout-row flex"><pip-document-list class="flex" pip-documents="item.docs" pip-rebind="true" pip-document-icon="true" pip-collapse="true" ng-disabled="$ctrl.disableControl"></pip-document-list></div><div ng-if="item.type == \'checklist\' && item.checklist && item.checklist.length > 0" class="pip-composite-checklist"><pip-checklist-view pip-options="item.checklist" pip-changed="$ctrl.onContentChange()" pip-rebind="true" pip-collapse="true" ng-disabled="$ctrl.disabledChecklist"></pip-checklist-view></div><div class="pip-composite-location layout-row layout-align-start-center flex" ng-if="item.type == \'location\' && (item.loc_pos || item.loc_name)"><pip-location class="flex" pip-location-name="item.loc_name" pip-location-pos="item.loc_pos" pip-collapse="true" pip-show-location-icon="true" ng-disabled="$ctrl.disableControl" pip-rebind="true"></pip-location></div><div class="pip-composite-time layout-row layout-align-start-center flex" ng-if="item.type == \'time\' && (item.start || item.end)"><md-icon md-svg-icon="icons:time" class="rm24 lm0"></md-icon><pip-time-range pip-start-date="item.start" pip-end-date="item.end" pip-rebind="true" ng-disabled="$ctrl.disableControl"></pip-time-range></div></div>')}])}(),function(e){try{e=angular.module("pipComposite.Templates")}catch(t){e=angular.module("pipComposite.Templates",[])}e.run(["$templateCache",function(t){t.put("composite_toolbar/CompositeToolbar.html",'<div class="layout-row layout-align-start-start flex"><md-button class="pip-composite-button" ng-if="!$ctrl.emptyState" ng-class="{ \'remove-item\': !$ctrl.emptyState , \'new-item\': !$ctrl.emptyState }" ng-click="$ctrl.onAddItem(\'text\');" aria-label="COMPOSITE-BUTTON-TEXT" ng-disabled="$ctrl.ngDisabled"><md-icon class="icon-text-block" md-svg-icon="icons:text"></md-icon><md-tooltip>{{::\'TEXT\'| translate}}</md-tooltip></md-button><md-button ng-if="$ctrl.toolbarButton.checklist" ng-click="$ctrl.onAddItem(\'checklist\')" ng-disabled="$ctrl.ngDisabled" class="pip-composite-button" aria-label="COMPOSITE-BUTTON-CHECKLIST"><md-icon class="icon-checkbox-on" md-svg-icon="icons:checkbox-on"></md-icon><md-tooltip>{{::\'CHECKLIST\'| translate}}</md-tooltip></md-button><md-button ng-if="$ctrl.toolbarButton.picture" ng-click="$ctrl.onAddItem(\'pictures\')" ng-disabled="$ctrl.ngDisabled" class="pip-composite-button" aria-label="COMPOSITE-BUTTON-PICTURES"><md-icon class="icon-camera" md-svg-icon="icons:camera"></md-icon><md-tooltip>{{::\'PICTURE\'| translate}}</md-tooltip></md-button><md-button ng-click="$ctrl.onAddItem(\'documents\')" ng-if="$ctrl.toolbarButton.document" ng-disabled="$ctrl.ngDisabled" class="pip-composite-button" aria-label="COMPOSITE-BUTTON-DOCUMENTS"><md-icon class="icon-document" md-svg-icon="icons:document"></md-icon><md-tooltip>{{::\'DOCUMENT\'| translate}}</md-tooltip></md-button><md-button ng-click="$ctrl.onAddItem(\'location\')" ng-if="$ctrl.toolbarButton.location" ng-disabled="$ctrl.ngDisabled" class="pip-composite-button" aria-label="COMPOSITE-BUTTON-LOCATIONS"><md-icon class="icon-location" md-svg-icon="icons:location"></md-icon><md-tooltip>{{::\'LOCATION\'| translate}}</md-tooltip></md-button><md-button ng-click="$ctrl.onAddItem(\'time\')" ng-if="$ctrl.toolbarButton.event" ng-disabled="$ctrl.ngDisabled" class="pip-composite-button" aria-label="COMPOSITE-BUTTON-TIME"><md-icon class="icon-time" md-svg-icon="icons:time"></md-icon><md-tooltip>{{::\'TIME\'| translate}}</md-tooltip></md-button></div>')}])}(),function(e){try{e=angular.module("pipComposite.Templates")}catch(t){e=angular.module("pipComposite.Templates",[])}e.run(["$templateCache",function(t){t.put("composite_view/CompositeView.html",'<div ng-repeat="item in $ctrl.compositeContent track by $index"><div class="pip-composite-text lp24-flex rp24-flex" ng-if="item.type == \'text\' && item.text" ng-class="{\'bm16\': $last}"><pip-markdown pip-text="item.text" pip-rebind="true" ng-disabled="true"></pip-markdown></div><div ng-if="item.type == \'pictures\' && item.picIds && item.picIds.length > 0" ng-class="$ctrl.compositeContent[$index - 1].type != \'pictures\' ? $ctrl.compositeContent[$index + 1].type != \'pictures\' ? \'tm16 bm16\' : \'tm16 bm0\' : $ctrl.compositeContent[$index + 1].type != \'pictures\' ? \'tm8 bm16\' : \'tm8 bm0\'" class="pip-composite-pictures lp24-flex rp24-flex"><pip-collage pip-pictures="item.picIds" pip-unique-code="item.id" pip-multiple="true" pip-open="true" pip-rebind="true" ng-disabled="$ctrl.ngDisabled"></pip-collage></div><div ng-if="item.type == \'documents\' && item.docs && item.docs.length > 0" class="pip-composite-documents layout-row layout-align-start-start flex"><pip-document-list pip-documents="item.docs" pip-document-icon="true" pip-rebind="true" ng-disabled="$ctrl.ngDisabled"></pip-document-list></div><div ng-if="item.type == \'checklist\' && item.checklist && item.checklist.length > 0" class="pip-composite-checklist lp24-flex rp24-flex"><pip-checklist-view pip-options="item.checklist" pip-changed="$ctrl.onContentChange()" pip-rebind="true" ng-disabled="$ctrl.isDisabled()"></pip-checklist-view></div><div class="pip-composite-location layout-row layout-align-start-start flex" ng-if="item.type == \'location\' && (item.loc_pos || item.loc_name)"><pip-location class="flex" pip-location-name="item.loc_name" pip-location-pos="item.loc_pos" pip-show-location-icon="true" pip-collapse="false" ng-disabled="$ctrl.ngDisabled" pip-rebind="true"></pip-location></div><div class="pip-composite-time lp24-flex rp24-flex layout-row layout-align-start-center flex" ng-if="item.type == \'time\'"><md-icon md-svg-icon="icons:time" class="lm0"></md-icon><pip-time-range pip-start-date="item.start" pip-end-date="item.end" pip-rebind="true" ng-disabled="ngDisabled()"></pip-time-range></div><div class="pip-composite-embedded lp24-flex rp24-flex layout-row layout-align-start-center flex" ng-if="item.type == \'embedded\' && item.embed_uri"><pip-embedded-view class="bm8" pip-embedded-type="item.embed_type" pip-embedded-uri="item.embed_uri"></pip-embedded-view></div></div>')}])}(),function(e){try{e=angular.module("pipComposite.Templates")}catch(t){e=angular.module("pipComposite.Templates",[])}e.run(["$templateCache",function(t){t.put("content_switch/ContentSwitch.html",'<md-button ng-click="showPictures = !showPictures; onButtonClick(\'pictures\')" aria-label="showPictures" class="md-icon-button" ng-show="showIconPicture" ng-disabled="transaction.busy()"><md-icon class="active-camera" ng-class="{ \'active-camera\': showPictures }" md-svg-icon="icons:camera"></md-icon></md-button><md-button ng-click="showDocuments = !showDocuments; onButtonClick(\'documents\')" aria-label="showDocuments" class="md-icon-button" ng-show="showIconDocument" ng-disabled="transaction.busy()"><md-icon ng-class="{ \'active-document\': showDocuments }" md-svg-icon="icons:document"></md-icon></md-button><md-button ng-click="showEvent = !showEvent; onButtonClick(\'event\')" aria-label="showEvent" class="md-icon-button" ng-show="showIconEvent" ng-disabled="transaction.busy()"><md-icon ng-class="{ \'active-time\': showEvent }" md-svg-icon="icons:time"></md-icon></md-button><md-button ng-click="showLocation = !showLocation; onButtonClick(\'location\')" aria-label="showLocation" class="md-icon-button" ng-show="showIconLocation" ng-disabled="transaction.busy()"><md-icon ng-class="{ \'active-location\': showLocation }" md-svg-icon="icons:location"></md-icon></md-button>')}])}(),function(e){try{e=angular.module("pipComposite.Templates")}catch(t){e=angular.module("pipComposite.Templates",[])}e.run(["$templateCache",function(t){t.put("embedded_edit/EmbeddedEdit.html",'<form name="embedded"><md-input-container class="md-block flex bm24"><label>{{ ::\'EMBEDDED_TYPE_LABEL\'| translate }}</label><md-select ng-model="$ctrl.embed_type" ng-change="$ctrl.onChangeType()" ng-disabled="$ctrl.isDisabled()"><md-option ng-repeat="t in $ctrl.embeddedTypeCollection track by $index" ng-value="t.id">{{ ::t.title | translate }}</md-option></md-select></md-input-container><md-input-container class="md-block flex"><label>{{::\'EMBEDDED_URL_LABEL\' | translate}}</label> <input ng-model="$ctrl.embed_uri" ng-required="$ctrl.embed_uri" type="url" name="url" ng-change="$ctrl.onChangeUrl()" ng-disabled="$ctrl.isDisabled()" ng-model-options="{ delay: 500 }"><div class="hint" ng-if="!embedded.url.$error">{{::\'EMBEDDED_TYPE_HINT\' | translate}}</div><div ng-messages="embedded.url.$error" role="alert"><div ng-message="url">{{ \'EMBEDDED_URL_ERROR\' | translate }}</div></div></md-input-container></form>')}])}(),function(e){try{e=angular.module("pipComposite.Templates")}catch(t){e=angular.module("pipComposite.Templates",[])}e.run(["$templateCache",function(t){t.put("embedded_view/EmbeddedView.html",'<iframe width="100%" height="170" frameborder="0" allowfullscreen="" ng-if="$ctrl.embed_type == \'youtube\'" ng-src="{{ $ctrl.embed_uri }}" style="margin: 0 auto;"></iframe><iframe width="100%" height="170" frameborder="0" allowfullscreen="" style="margin: 0 auto;" ng-src="{{ $ctrl.embed_uri }}" ng-if="$ctrl.embed_type == \'custom\'"><p><a href="{{ $ctrl.embed_uri }}">{{ $ctrl.embed_uri }}</a></p></iframe>')}])}()},{}]},{},[18,23])(23)});


!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;((t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).pip||(t.pip={})).guidance=e()}}(function(){return function a(r,s,p){function l(t,e){if(!s[t]){if(!r[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(c)return c(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var o=s[t]={exports:{}};r[t][0].call(o.exports,function(e){return l(r[t][1][e]||e)},o,o.exports,a,r,s,p)}return s[t].exports}for(var c="function"==typeof require&&require,e=0;e<p.length;e++)l(p[e]);return l}({1:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});function n(){}i.Attachment=n},{}],2:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});function n(){}i.Guide=n},{}],3:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=e("./GuideType"),a=e("./GuideStatus"),n=(r.$inject=["pipRest","pipFormat"],r.prototype.readGuides=function(e,t,i){return(e=e||{}).filter&&(e.filer=this.pipFormat.filterToString(e.filer)),this.pipRest.getResource(this.RESOURCE).page(e,t,i)},r.prototype.readRandomGuide=function(e,t,i){return(e=e||{}).filter&&(e.filer=this.pipFormat.filterToString(e.filer)),this.pipRest.getResource(this.RESOURCE_RANDOM).get(e,t,i)},r.prototype.readIntroGuides=function(e,t,i){var n=(e=e||{}).filter||{};return n.type=o.GuideType.Introduction,n.status=a.GuideStatus.Completed,e.filer=this.pipFormat.filterToString(n),this.pipRest.getResource(this.RESOURCE).page(e,t,i)},r.prototype.readGuide=function(e,t,i){return this.pipRest.getResource(this.RESOURCE).get({guide_id:e},t,i)},r.prototype.createGuide=function(e,t,i){this.pipRest.getResource(this.RESOURCE).save(null,e,t,i)},r.prototype.updateGuide=function(e,t,i,n){this.pipRest.getResource(this.RESOURCE).update({guide_id:e},t,i,n)},r.prototype.deleteGuide=function(e,t,i){this.pipRest.getResource(this.RESOURCE).remove({guide_id:e},null,t,i)},r);function r(e,t){this.pipRest=e,this.pipFormat=t,this.RESOURCE="guides",this.RESOURCE_RANDOM="guidesRandom",this.PAGE_SIZE=100,this.PAGE_START=0,this.PAGE_TOTAL=!0}angular.module("pipGuideData",["pipRest","pipServices"]).service("pipGuideData",n)},{"./GuideStatus":5,"./GuideType":6}],4:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});function n(){}i.GuidePage=n},{}],5:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){};n.New="new",n.Writing="writing",n.Translating="translating",n.Verifying="verifying",n.Completed="completed",i.GuideStatus=n},{}],6:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){};n.Introduction="introduction",n.NewRelease="new release",i.GuideType=n},{}],7:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0})},{}],8:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0})},{}],9:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0})},{}],10:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});function n(){}i.MultiString=n},{}],11:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});function n(){}i.PageData=n},{}],12:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});function n(){}i.PartyReference=n},{}],13:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});function n(){}i.Quote=n},{}],14:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=(o.$inject=["pipRest","pipFormat"],o.prototype.readQuotes=function(e,t,i){return(e=e||{}).filter&&(e.filer=this.pipFormat.filterToString(e.filer)),this.pipRest.getResource(this.RESOURCE).page(e,t,i)},o.prototype.readRandomQuote=function(e,t,i){return(e=e||{}).filter&&(e.filer=this.pipFormat.filterToString(e.filer)),this.pipRest.getResource(this.RESOURCE_RANDOM).get(e,t,i)},o.prototype.readQuote=function(e,t,i){return this.pipRest.getResource(this.RESOURCE).get({quote_id:e},t,i)},o.prototype.createQuote=function(e,t,i){this.pipRest.getResource(this.RESOURCE).save(null,e,t,i)},o.prototype.updateQuote=function(e,t,i,n){this.pipRest.getResource(this.RESOURCE).update({quote_id:e},t,i,n)},o.prototype.deleteQuote=function(e,t,i){this.pipRest.getResource(this.RESOURCE).remove({quote_id:e},null,t,i)},o);function o(e,t){this.pipRest=e,this.pipFormat=t,this.RESOURCE="quotes",this.RESOURCE_RANDOM="quotesRandom",this.PAGE_SIZE=100,this.PAGE_START=0,this.PAGE_TOTAL=!0}angular.module("pipQuoteData",["pipRest","pipServices"]).service("pipQuoteData",n)},{}],15:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){};n.New="new",n.Writing="writing",n.Translating="translating",n.Verifying="verifying",n.Completed="completed",i.QuoteStatus=n},{}],16:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});function n(){}i.Tip=n},{}],17:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=(o.$inject=["pipRest","pipFormat"],o.prototype.readTips=function(e,t,i){return(e=e||{}).filter&&(e.filer=this.pipFormat.filterToString(e.filer)),this.pipRest.getResource(this.RESOURCE).page(e,t,i)},o.prototype.readRandomTip=function(e,t,i){return(e=e||{}).filter&&(e.filer=this.pipFormat.filterToString(e.filer)),this.pipRest.getResource(this.RESOURCE_RANDOM).get(e,t,i)},o.prototype.readTip=function(e,t,i){return this.pipRest.getResource(this.RESOURCE).get({tip_id:e},t,i)},o.prototype.createTip=function(e,t,i){this.pipRest.getResource(this.RESOURCE).save(null,e,t,i)},o.prototype.updateTip=function(e,t,i,n){this.pipRest.getResource(this.RESOURCE).update({tip_id:e},t,i,n)},o.prototype.deleteTip=function(e,t,i){this.pipRest.getResource(this.RESOURCE).remove({tip_id:e},null,t,i)},o);function o(e,t){this.pipRest=e,this.pipFormat=t,this.RESOURCE="tips",this.RESOURCE_RANDOM="tipsRandom",this.PAGE_SIZE=100,this.PAGE_START=0,this.PAGE_TOTAL=!0}angular.module("pipTipData",["pipRest","pipServices"]).service("pipTipData",n)},{}],18:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){};n.New="new",n.Writing="writing",n.Translating="translating",n.Verifying="verifying",n.Completed="completed",i.TipStatus=n},{}],19:[function(e,t,i){"use strict";function n(e){for(var t in e)i.hasOwnProperty(t)||(i[t]=e[t])}Object.defineProperty(i,"__esModule",{value:!0}),e("./Attachment"),e("./Guide"),e("./GuidePage"),e("./GuideStatus"),e("./GuideType"),e("./MultiString"),e("./PartyReference"),e("./Quote"),e("./QuoteStatus"),e("./PageData"),e("./Tip"),e("./TipStatus"),e("./TipDataService"),e("./ITipDataService"),e("./QuoteDataService"),e("./IQuoteDataService"),e("./GuideDataService"),e("./IGuideDataService"),angular.module("pipGuidance.Data",["pipTipData","pipQuoteData","pipGuideData"]),n(e("./Attachment")),n(e("./Guide")),n(e("./GuidePage")),n(e("./GuideStatus")),n(e("./GuideType")),n(e("./MultiString")),n(e("./PartyReference")),n(e("./Quote")),n(e("./QuoteStatus")),n(e("./PageData")),n(e("./Tip")),n(e("./TipStatus"))},{"./Attachment":1,"./Guide":2,"./GuideDataService":3,"./GuidePage":4,"./GuideStatus":5,"./GuideType":6,"./IGuideDataService":7,"./IQuoteDataService":8,"./ITipDataService":9,"./MultiString":10,"./PageData":11,"./PartyReference":12,"./Quote":13,"./QuoteDataService":14,"./QuoteStatus":15,"./Tip":16,"./TipDataService":17,"./TipStatus":18}],20:[function(e,t,i){function n(e){e.translations("en",{GUIDANCE_TITLE:"What should you do here?",GUIDANCE_ACTION:"Do it now!",GUIDANCE_DO_NOT_SHOW:"Don't show it again"}),e.translations("ru",{GUIDANCE_TITLE:"Что здесь делать?",GUIDANCE_ACTION:"Сделать это сейчас!",GUIDANCE_DO_NOT_SHOW:"Не показывать это снова"})}var o=(s.$inject=["$mdDialog"],s.prototype.show=function(e,t,i){this.$mdDialog.show({targetEvent:e.event,templateUrl:"guidance/GuidanceDialog.html",controller:a,controllerAs:"$ctrl",locals:{params:e},clickOutsideToClose:!0}).then(function(){t&&t()},function(){i&&i()})},s);n.$inject=["pipTranslateProvider"];var a=(r.prototype.onCancel=function(){this.$mdDialog.cancel()},r.prototype.onAction=function(){this.$mdDialog.hide()},r.prototype.onHideToggle=function(){this.params.hideToggleCallback&&this.params.hideToggleCallback(this.hideToggle)},r.prototype.getContent=function(e){var t=this.pipTranslate.language||"en";return e&&e[t]?e[t]:""},r);function r(e,t,i,n,o){this.$mdDialog=i,this.pipTranslate=n,this.params=o,this.theme=t[pip.themes.ThemeRootVar],this.title=o.title||"GUIDANCE_TITLE",this.imageUrl=o.imageUrl||"",this.imageWidth=o.imageWidth||"100%",this.imageHeight=o.imageHeight||"150px",this.content=o.content,this.action=o.action||"GUIDANCE_ACTION",this.hideToggle=o.hideToggle,this.showHideToggle=null!=o.hideToggleCallback}function s(e){this.$mdDialog=e}angular.module("pipGuidance.Dialog",["ngMaterial","pipTranslate","pipGuidance.Templates"]).config(n).service("pipGuidanceDialog",o)},{}],21:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),e("./rest"),e("./data"),e("./intro_guidance"),e("./guidance/GuidanceDialog"),e("./tips/TipsService"),e("./quotes/QuotesService"),angular.module("pipGuidance",["pipGuidance.Rest","pipTips.Service","pipIntroGuidance.Service","pipGuidance.Dialog","pipQuotes.Service","pipReleaseIntroDialog"]),function(e){for(var t in e)i.hasOwnProperty(t)||(i[t]=e[t])}(e("./data"))},{"./data":19,"./guidance/GuidanceDialog":20,"./intro_guidance":24,"./quotes/QuotesService":25,"./rest":29,"./tips/TipsService":30}],22:[function(e,t,i){function n(e){e.translations("en",{GUIDANCE_TITLE:"What should you do here?",GUIDANCE_ACTION:"Do it now!",GUIDANCE_DO_NOT_SHOW:"Don't show it again",GUIDE_COMPLETE_BUTTON:"GOT IT !"}),e.translations("ru",{GUIDANCE_TITLE:"Что здесь делать?",GUIDANCE_ACTION:"Сделать это сейчас!",GUIDANCE_DO_NOT_SHOW:"Не показывать это снова",GUIDE_COMPLETE_BUTTON:"Закончить просмотр"})}var o=(s.$inject=["$mdDialog"],s.prototype.show=function(e,t,i){this.$mdDialog.show({targetEvent:e.event,templateUrl:"intro_guidance/IntroGuidanceDialog.html",controller:a,controllerAs:"$ctrl",locals:{params:e},clickOutsideToClose:!0}).then(function(){t&&t()},function(){i&&i()})},s);n.$inject=["pipTranslateProvider"];var a=(r.prototype.onChangePage=function(e){this.number=e,this.isOpen=!1},r.prototype.onBackPage=function(){0!==this.number&&--this.number,this.isOpen=!1},r.prototype.onNextPage=function(){this.number!==this.data.pages.length-1&&(this.number+=1),this.isOpen=!1},r.prototype.onKeyDown=function(e){e&&("ArrowRight"==e.key&&this.onNextPage(),"ArrowLeft"==e.key&&this.onBackPage(),32==e.keyCode&&this.onNextPage(),this.isOpen=!1)},r.prototype.onClose=function(){this.$mdDialog.hide()},r);function r(e,t,i,n,o,a,r){this.$scope=e,this.$rootScope=t,this.pipTranslate=i,this.$mdDialog=n,this.pipMedia=o,this.pipPictureData=a,this.params=r,this.isOpen=!0,this.theme=t[pip.themes.ThemeRootVar];var s=this.params.guide;this.number=0,this.ln=this.params.ln||this.pipTranslate.language||"en",this.data=s,_.each(this.data.pages,function(e){if(e.pic_id){var t=e.pic_id;e.picIds=[],e.picIds.push(t),e.pic_id_url=a.getPictureUrl(e.pic_id)}if(e.pic_uri){var i=e.pic_uri;e.picUris=[],e.picUris.push(i)}})}function s(e){this.$mdDialog=e}angular.module("pipReleaseIntroDialog").config(n).service("pipReleaseIntroDialog",o)},{}],23:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=e("../data"),r=e("../data"),n=(o.$inject=["pipReleaseIntroDialog","pipGuideData","pipTranslate","$rootScope"],o.prototype.showReleaseGuidance=function(e,t,i){var n=this;this.pipGuideData.readGuides({filter:e},function(e){0<(e=_.filter(e.data,function(e){return e.type=a.GuideType.NewRelease&&e.status===r.GuideStatus.Completed})).length&&n.pipReleaseIntroDialog.show({guide:e[0],ln:n.pipTranslate.language},t,i)},i)},o.prototype.showIntroGuidance=function(e,t,i){var n=this;this.pipGuideData.readIntroGuides({filter:e},function(e){0<(e=_.filter(e.data,function(e){return e.type=a.GuideType.Introduction&&e.status===r.GuideStatus.Completed})).length&&n.pipReleaseIntroDialog.show({guide:e[0],ln:n.pipTranslate.language},t,i)},i)},o.prototype.showGuide=function(e,t,i,n){e&&this.pipReleaseIntroDialog.show({guide:e,ln:t},i,n)},o.prototype.findIntroReleaseGuide=function(e,t,i){var n,o=i;return(t||t[o])&&t[o].intro&&t[o].intro.lastId?(n=_.filter(e,function(e){return e.type===a.GuideType.NewRelease&&e.status===r.GuideStatus.Completed&&e.app===o}),n=_.sortBy(n,function(e){return-moment(e.create_time).valueOf()}),!t[o].intro.create_time||0<n.length&&new Date(t[o].intro.create_time)<new Date(n[0].create_time)&&n[0].id!=t.release.lastId?n[0]:null):(n=_.filter(e,function(e){return e.type===a.GuideType.Introduction&&e.status===r.GuideStatus.Completed&&e.app===o}),(n=_.sortBy(n,function(e){return-moment(e.create_time).valueOf()}))[0])},o);function o(e,t,i,n){this.pipReleaseIntroDialog=e,this.pipGuideData=t,this.pipTranslate=i,this.$rootScope=n}angular.module("pipIntroGuidance.Service",["pipReleaseIntroDialog","pipGuideData","pipPictures.Data"]).service("pipGuidance",n)},{"../data":19}],24:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),angular.module("pipReleaseIntroDialog",["ngMaterial","pipTranslate","pipGuidance.Templates"]),e("./IntroGuidanceDialog"),e("./IntroGuidanceService")},{"./IntroGuidanceDialog":22,"./IntroGuidanceService":23}],25:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=(o.$inject=["pipPopoverService","$timeout","$rootScope","pipTips"],o.prototype.checkStatus=function(e){return"completed"==e.status},o.prototype.compareRandom=function(e,t){return Math.random()-.5},o.prototype.filterQuotes=function(e,t){var i,n=_.filter(e,this.checkStatus);if(t){i=[];for(var o=function(e){var t=_.find(n[e].tags,function(e){return e==t});t&&i.push(n[e])},a=0;a<n.length;a++)o(a)}else i=n;return i.sort(this.compareRandom),i},o.prototype.quoteController=function(e,t){function i(){e.locals.quotes[e.index].author&&(e.author=e.locals.quotes[e.index].author[e.locals.ln]?e.locals.quotes[e.index].author[e.locals.ln]:e.locals.quotes[e.index].author.en),e.locals.quotes[e.index].text&&(e.content=e.locals.quotes[e.index].text[e.locals.ln]?e.locals.quotes[e.index].text[e.locals.ln]:e.locals.quotes[e.index].text.en),e.link=e.locals.quotes[e.index].more_url}e.index=0,e.pipMedia=t,i(),e.onNextClick=function(){e.index++,e.index==e.locals.quotes.length?this.pipPopoverService.hide():(i(),this.pipPopoverService.resize())},e.$on("pipWindowResized",i)},o.prototype.showQuotes=function(e,t,i){e&&0<e.length&&(this.pipPopoverService.hide(),this.pipPopoverService.show({element:i?i.currentTarget:null,class:"pip-quote",cancelCallback:function(){return!1},locals:{quotes:e,ln:t||"en"},controller:["$scope","pipMedia",this.quoteController],templateUrl:"quotes/QuoteTemplate.html"}))},o.prototype.waitUserTipsQuotes=function(e,t,i){var n=this,o=null;$(document).ready(function(){$(document).bind("click keydown scroll",function(){n.$timeout.cancel(o),o=n.$timeout(function(){n.pipPopoverService.hide(),!t||e&&Math.random()<.5?n.pipTips.showTips(e,i):n.showQuotes(t,i,null)},18e4)}),$("body").trigger("click")})},o);function o(e,t,i,n){this.pipPopoverService=e,this.$timeout=t,this.$rootScope=i,this.pipTips=n}angular.module("pipQuotes.Service",["pipGuidance.Templates","pipGuidance","pipControls","pipQuoteData"]).service("pipQuotes",n)},{}],26:[function(e,t,i){function n(e){e.registerPagedCollection("guides","/api/v1/guides/:guide_id"),e.registerResource("guidesRandom","/api/v1/guides/random")}n.$inject=["pipRestProvider"],angular.module("pipGuidance.Rest").config(n)},{}],27:[function(e,t,i){function n(e){e.registerPagedCollection("quotes","/api/v1/quotes/:quote_id"),e.registerResource("quotesRandom","/api/v1/quotes/random")}n.$inject=["pipRestProvider"],angular.module("pipGuidance.Rest").config(n)},{}],28:[function(e,t,i){function n(e){e.registerPagedCollection("tips","/api/v1/tips/:tip_id"),e.registerResource("tipsRandom","/api/v1/tips/random")}n.$inject=["pipRestProvider"],angular.module("pipGuidance.Rest").config(n)},{}],29:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),angular.module("pipGuidance.Rest",[]),e("./TipResources"),e("./QuoteResources"),e("./GuideResources")},{"./GuideResources":26,"./QuoteResources":27,"./TipResources":28}],30:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=(o.$inject=["$rootScope","pipPopoverService","pipTipData"],o.prototype.filterTips=function(e,t){this.tips=[];for(var i=_.filter(e,this.checkStatus),n=0;n<i.length;n++)_.find(i[n].topics,function(e){return e==t})&&this.tips.push(i[n]);return this.tips.sort(this.compareRandom),this.tips},o.prototype.tipController=function(e,t,i){function n(){e.title=e.locals.tips[e.index].title[e.locals.ln],e.content=e.locals.tips[e.index].content[e.locals.ln],e.link=e.locals.tips[e.index].more_url,e.image&&t(function(){$(".pip-popover-backdrop").find(".pip-popover").find(".pip-pic").css("background-image","url("+e.image+")")},100)}var o=this;e.index=0,e.pipMedia=i,n(),e.onNextClick=function(){e.index++,e.index===e.locals.tips.length?o.pipPopoverService.hide():(n(),o.pipPopoverService.resize())},e.$on("pipWindowResized",n)},o.prototype.showTips=function(e,t,i){e&&0<e.length&&(this.pipPopoverService.hide(),this.pipPopoverService.show({element:i?i.currentTarget:null,class:"pip-tip",cancelCallback:function(){return!1},locals:{tips:e,ln:t||"en"},controller:["$scope","$timeout","pipMedia",this.tipController],templateUrl:"tips/TipTemplate.html"}))},o.prototype.firstShowTips=function(e,t,i,n,o){},o.prototype.getTips=function(e,t,i,n){var o=this;this.pipTipData.readTips({},function(e){return o.filterTips(e.data,i),n&&n(o.tips),o.tips},function(){return null})},o);function o(e,t,i){this.$rootScope=e,this.pipPopoverService=t,this.pipTipData=i,this.checkStatus=function(e){return"completed"===e.status},this.compareRandom=function(){return Math.random()-.5}}angular.module("pipTips.Service",["pipGuidance.Templates","pipControls","pipTipData"]).service("pipTips",n)},{}],31:[function(e,t,i){!function(t){try{t=angular.module("pipGuidance.Templates")}catch(e){t=angular.module("pipGuidance.Templates",[])}t.run(["$templateCache",function(e){e.put("guidance/GuidanceDialog.html",'<md-dialog class="pip-dialog pip-guidance-dialog layout-column" width="768" md-theme="{{$ctrl.theme}}"><div class="pip-header layout-row"><h3 class="rm16 flex">{{$ctrl.title | translate}}</h3><md-button class="pip-dialog-close" ng-click="$ctrl.onCancel()" aria-label="{{::\'CLOSE\' | translate}}"><span class="icon-cross"></span></md-button></div><div class="pip-body"><div class="pip-content"><pip-picture pip-src="$ctrl.imageUrl" ng-hide="!$ctrl.imageUrl || $ctrl.imageUrl == \'\'" class="bm16 center-block" ng-style="{ width: $ctrl.imageWidth, height: $ctrl.imageHeight, display: \'block\' }"></pip-picture><div class="bm16" ng-bind-html="{{$ctrl.getContent($ctrl.content)}}"></div><md-button class="md-raised md-accent w-stretch" ng-click="$ctrl.onAction()" ng-hide="!$ctrl.action || $ctrl.action==\'\'" arial-label="{{$ctrl.action | translate}}">{{::action | translate}}</md-button><md-checkbox aria-label="{{\'DO_NOT_SHOW\' | translate}}" class="w-stretch m0 tm16 regular_14" ng-model="$ctrl.hideToggle" ng-change="$ctrl.onHideToggle()" ng-show="$ctrl.showHideToggle">{{::\'GUIDANCE_DO_NOT_SHOW\' | translate}}</md-checkbox></div></div></md-dialog>')}])}(),function(t){try{t=angular.module("pipGuidance.Templates")}catch(e){t=angular.module("pipGuidance.Templates",[])}t.run(["$templateCache",function(e){e.put("intro_guidance/IntroGuidanceDialog.html",'<md-dialog class="pip-dialog pip-guidance-dialog pip-guide-preview layout-column" md-theme="{{$ctrl.theme}}" ng-keydown="$ctrl.onKeyDown($event)"><div ng-if="!$ctrl.$routing" ng-swipe-left="$ctrl.onNextPage()" ng-swipe-right="$ctrl.onBackPage()" class="h-stretch flex layout layout-column" ng-style="{\'background-color\':$ctrl.data.pages[$ctrl.number].color}"><div class="layout layout-row layout-align-space-between-center layout-align-xs-center-center w-stretch pip-guide-page pip-scroll-y"><md-button ng-click="$ctrl.onBackPage()" class="md-icon-button lm8 flex-fixed hide-xs" aria-label="BACK" ng-disabled="$ctrl.transaction.busy() || $ctrl.number == 0"><md-icon md-svg-icon="icons:arrow-left" class="pip-arrow-button" ng-class="{\'opacity-disabled\' :$ctrl.number == 0}"></md-icon></md-button><div style="visibility: hidden; position: fixed; width:0px; height: 0px;" ng-if="$ctrl.isOpen"><div ng-repeat="page in $ctrl.data.pages"><img style="visibility: hidden; position: absolute" ng-if="page.pic_uri" src="{{page.pic_uri}}" aria-hidden="true" alt=""> <img style="visibility: hidden; position: absolute" ng-if="page.pic_id_url" src="{{page.pic_id_url}}" aria-hidden="true" alt=""></div></div><div class="layout layout-column layout-align-center-center bm16"><div class="pip-pic" ng-if="$ctrl.data.pages[$ctrl.number].pic_uri" ng-style="{\'background-image\':\'url(\' + $ctrl.data.pages[$ctrl.number].pic_uri + \')\'}"></div><div class="pip-pic" ng-if="$ctrl.data.pages[$ctrl.number].pic_id_url" ng-style="{\'background-image\':\'url(\' + $ctrl.data.pages[$ctrl.number].pic_id_url + \')\'}"></div><div class="layout layout-column layout-align-center-center pip-text"><p class="pip-preview-title" ng-if="$ctrl.data.pages[$ctrl.number].title[$ctrl.ln]" ng-bind-html="$ctrl.data.pages[$ctrl.number].title[$ctrl.ln]"></p><p class="pip-preview-content" ng-if="$ctrl.data.pages[$ctrl.number].content[$ctrl.ln]" ng-bind-html="$ctrl.data.pages[$ctrl.number].content[$ctrl.ln]"></p></div></div><md-button ng-click="$ctrl.onNextPage()" class="rm8 flex-fixed hide-xs md-icon-button" aria-label="DOWN" ng-disabled="$ctrl.transaction.busy() || $ctrl.number == $ctrl.data.pages.length - 1"><md-icon md-svg-icon="icons:arrow-right" class="pip-arrow-button" ng-class="{\'opacity-disabled\' : $ctrl.number == $ctrl.data.pages.length - 1}"></md-icon></md-button></div><div class="flex-fixed flex w-stretch pip-guide-page-footer bp16" ng-style="{\'background-color\':$ctrl.data.pages[$ctrl.number].color}"><div class="layout-row layout-align-center-center" ng-if="$ctrl.data.pages.length > 1"><md-icon ng-repeat="radio in $ctrl.data.pages" ng-click="$ctrl.onChangePage($index)" class="pip-radio-button" md-svg-icon="{{radio != $ctrl.data.pages[$ctrl.number] ? \'icons:radio-off\' : \'icons:circle\'}}"></md-icon></div><div class="h64 layout-row layout-align-xs-space-between-center layout-align-center-center"><md-button ng-click="$ctrl.onBackPage()" class="lm8 flex-fixed md-icon-button" ng-if="$ctrl.pipMedia(\'xs\')" aria-label="BACK" ng-disabled="$ctrl.transaction.busy() || $ctrl.number == 0"><md-icon md-svg-icon="icons:arrow-left" class="pip-arrow-button" ng-class="{\'opacity-disabled\' :$ctrl.number == 0}"></md-icon></md-button><md-button ng-click="$ctrl.onClose()" ng-if="$ctrl.number == $ctrl.data.pages.length - 1" class="pip-button-got rm8 lm8 md-raised" ng-style="{ \'color\':$ctrl.data.pages[$ctrl.number].color }" aria-label="NEXT" ng-disabled="$ctrl.transaction.busy()">{{ :: \'GUIDE_COMPLETE_BUTTON\' | translate }}</md-button><md-button ng-click="$ctrl.onClose()" ng-if="$ctrl.number != $ctrl.data.pages.length - 1" class="pip-button-got rm8 lm8 pip-button-got-not-raised" ng-style="{ \'background-color\':$ctrl.data.pages[$ctrl.number].color}" aria-label="NEXT" ng-disabled="$ctrl.transaction.busy()">{{ :: \'GUIDE_COMPLETE_BUTTON\' | translate }}</md-button><md-button ng-click="$ctrl.onNextPage()" class="rm8 flex-fixed md-icon-button" ng-if="$ctrl.pipMedia(\'xs\')" aria-label="DOWN" ng-disabled="$ctrl.transaction.busy() || $ctrl.number == $ctrl.data.pages.length - 1"><md-icon md-svg-icon="icons:arrow-right" class="pip-arrow-button" ng-class="{\'opacity-disabled\' : $ctrl.number == $ctrl.data.pages.length - 1}"></md-icon></md-button></div></div></div></md-dialog>')}])}(),function(t){try{t=angular.module("pipGuidance.Templates")}catch(e){t=angular.module("pipGuidance.Templates",[])}t.run(["$templateCache",function(e){e.put("quotes/QuoteTemplate.html",'<img src="images/quotes.svg" class="pip-bg"><div class="pip-content pip-popover-content lp24-flex rp24-flex pip-scroll"><div>{{ ::content | translate }}</div></div><div class="pip-footer lm24-flex rm24-flex position-bottom layout-row layout-align-start-center"><div class="pip-author flex color-secondary-text">{{ ::author | translate }}</div><md-button ng-click="onNextClick()" class="tm0 bm0 rm0">{{ ::\'NEXT\' | translate }}</md-button></div>')}])}(),function(t){try{t=angular.module("pipGuidance.Templates")}catch(e){t=angular.module("pipGuidance.Templates",[])}t.run(["$templateCache",function(e){e.put("tips/TipTemplate.html",'<div ng-if="title" class="pip-title p24-flex flex-fixed bp16">{{ title | translate }}</div><div class="pip-content pip-popover-content lp24-flex rp24-flex text-body1 bm64 pip-scroll" ng-class="{\'tm24\' : !title }"><div ng-if="image && pipMedia(\'gt-xs\')" class="pip-pic"></div><pip-markdown pip-text="content" pip-rebind="true"></pip-markdown></div><div class="pip-footer lm24-flex rm24-flex position-bottom layout-row layout-align-start-center"><a ng-if="link" target="_blank" href="{{ link }}" class="text-body2 flex">{{:: \'MORE_URL\' | translate }}</a><div ng-if="!link" class="flex"></div><md-button ng-click="onNextClick()" class="rm0">{{:: \'NEXT\' | translate }}</md-button></div>')}])}()},{}]},{},[21,31])(31)});


!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;((e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).pip||(e.pip={})).support=t()}}(function(){return function o(r,s,c){function l(e,t){if(!s[e]){if(!r[e]){var a="function"==typeof require&&require;if(!t&&a)return a(e,!0);if(p)return p(e,!0);var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}var n=s[e]={exports:{}};r[e][0].call(n.exports,function(t){return l(r[e][1][t]||t)},n,n.exports,o,r,s,c)}return s[e].exports}for(var p="function"==typeof require&&require,t=0;t<c.length;t++)l(c[t]);return l}({1:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=(n.prototype.enable=function(t){if(t){this.trackingId=t,this.enabled=!0;var e=window;e.GoogleAnalyticsObject="ga",e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=+(new Date).getTime(),e.ga("create",t,"auto");var a=document.createElement("script"),i=document.getElementsByTagName("script")[0];a.async=!0,a.src="//www.google-analytics.com/analytics.js",i.parentNode.insertBefore(a,i)}return this.enabled},n.prototype.pageView=function(t,e,a){var i=window;this.enabled&&i.ga&&i.ga("send","pageview",{page:t,userId:e,language:a})},n.prototype.event=function(t,e,a,i,n){var o=window;this.enabled&&o.ga&&o.ga("send","event",{eventCategory:t,eventAction:e,eventValue:a,userId:i,language:n})},n.prototype.$get=function(){return{enabled:this.enabled,trackingId:this.trackingId,pageView:this.pageView,event:this.event}},n);function n(){this.enabled=!1,this.trackingId=null}function o(l,p,d){l.$on("$stateChangeSuccess",function(t,e,a,i,n){var o=p.url(),r=l.$session&&l.$session.userId?l.$session.userId:(l.$identity||{}).id,s=l.$language||"en",c=o.indexOf("?");0<c&&(o=o.substring(0,c)),d.pageView(o,r,s)})}o.$inject=["$rootScope","$location","pipAnalytics"],angular.module("pipAnalytics",[]).run(o).provider("pipAnalytics",i)},{}],2:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0})},{}],3:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});function i(t,e,a){this.id=t,this.uri=e,this.name=a}a.Attachment=i},{}],4:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});function i(t,e,a,i,n,o,r){this.id=t,this.category=e,this.app=a,this.sender=i,this.title=n,this.content=o,this.pics=[],this.docs=[],this.sent_time=r}a.Feedback=i},{}],5:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=(n.$inject=["pipRest","pipFormat"],n.prototype.readFeedbacks=function(t,e,a){return(t=t||{}).filter&&(t.filer=this.pipFormat.filterToString(t.filer)),this.pipRest.getResource(this.RESOURCE).page(t,e,a)},n.prototype.readFeedback=function(t,e,a){return this.pipRest.getResource(this.RESOURCE).get({Feedback_id:t},e,a)},n.prototype.createFeedback=function(t,e,a){this.pipRest.getResource(this.RESOURCE).save(t,e,a)},n.prototype.updateFeedback=function(t,e,a,i){this.pipRest.getResource(this.RESOURCE).update({Feedback_id:t},e,a,i)},n.prototype.deleteFeedback=function(t,e,a){this.pipRest.getResource(this.RESOURCE).remove({Feedback_id:t},null,e,a)},n);function n(t,e){this.pipRest=t,this.pipFormat=e,this.RESOURCE="feedbacks",this.PAGE_SIZE=100,this.PAGE_START=0,this.PAGE_TOTAL=!0}angular.module("pipFeedbackData",["pipRest","pipServices"]).service("pipFeedbackData",i)},{}],6:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0})},{}],7:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});function i(){}a.PageData=i},{}],8:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});function i(t,e,a){this.id=t,this.name=e,this.email=a}a.PartyReference=i},{}],9:[function(t,e,a){"use strict";function i(t){for(var e in t)a.hasOwnProperty(e)||(a[e]=t[e])}Object.defineProperty(a,"__esModule",{value:!0}),t("./Attachment"),t("./Feedback"),t("./PageData"),t("./PartyReference"),t("./FeedbackDataService"),t("./IFeedbackDataService"),angular.module("pipFeedback.Data",["pipFeedbackData"]),i(t("./Attachment")),i(t("./Feedback")),i(t("./PageData")),i(t("./PartyReference"))},{"./Attachment":3,"./Feedback":4,"./FeedbackDataService":5,"./IFeedbackDataService":6,"./PageData":7,"./PartyReference":8}],10:[function(t,e,a){var i=(n.prototype.showAppBar=function(){},n.prototype.onSave=function(){this.$panel&&this.$panel.onSave()},n.prototype.onTypeChange=function(){this.$panel&&this.$panel.onTypeChange(this.data)},n.prototype.saveCallback=function(){this.pipToasts.showNotification(this.pipTranslate.translate("FEEDBACK_SUCCESS"),null,null,null,null)},n);function n(t,e,a,i,n){var o=this;this.pipToasts=i,this.pipTranslate=n,this.contentSwitchOption={picture:!0,document:!0,location:!1,event:!1},this.callback=function(){o.saveCallback()}}function o(t){t.state("feedback",{url:"/feedback",controller:i,controllerAs:"$ctrl",templateUrl:"feedback/Feedback.html",auth:!0})}o.$inject=["pipAuthStateProvider"],angular.module("pipFeedback",["pipAppBar","pipServices","pipCommonRest","pipFeedbackData","pipDropdown","ngMaterial","pipTranslate","pipFeedbackData","pipToasts","pipFeedback.Strings","pipFeedbackPanel","pipSupport.Templates"]).config(o)},{}],11:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=(r.prototype.onSave=function(){this.$panel&&this.$panel.onSave()},r.prototype.onTypeChange=function(){this.$panel&&this.$panel.onTypeChange(this.data)},r.prototype.saveCallback=function(){this.$mdDialog.cancel(),this.pipToasts.showNotification(this.pipTranslate.translate("FEEDBACK_SUCCESS"),null,null,null,null)},r.prototype.goBack=function(){this.$mdDialog.cancel()},r),n=(o.$inject=["$mdDialog"],o.prototype.show=function(t,e,a){this.$mdDialog.show({targetEvent:t.event,controller:i,templateUrl:"feedback/FeedbackDialog.html",clickOutsideToClose:!0,controllerAs:"$ctrl",locals:{party:t.party}}).then(function(t){e&&e(t)},function(){a&&a()})},o);function o(t){this.$mdDialog=t}function r(t,e,a,i,n,o){var r=this;this.$mdDialog=i,this.pipToasts=n,this.pipTranslate=o,this.contentSwitchOption={picture:!0,document:!0,location:!1,event:!1},this.callback=function(){r.saveCallback()}}angular.module("pipFeedbackDialog",["pipAppBar","pipCommonRest","pipDropdown","ngMaterial","pipTranslate","pipFeedbackData","pipToasts","pipFeedback.Strings","pipFeedbackPanel","pipSupport.Templates"]).service("pipFeedbackDialog",n)},{}],12:[function(t,e,a){var i={data:"=",created:"&pipCreated",showPictures:"=",showDocuments:"=",typeCollection:"<typeCollection",saveCallback:"="},o=function(){this.pic_ids=[],this.docs=[]},n=(r.$inject=["$rootScope","pipFeedbackData","pipTranslate","pipFormErrors"],r.prototype.onSave=function(){var e=this;this.pipFeedbackData.createFeedbackWithFiles({transaction:null,pictures:this.pictures,documents:this.docs,item:this.data},function(t){e.saveCallback&&e.saveCallback(t)})},r.prototype.onTypeChange=function(t){this.data.type=this.typeCollection[this.typeIndex].id,this.type=t.name},r);function r(t,e,a,i){var n=this;this.pipFeedbackData=e,this.typeCollection=[{id:"support",name:"SUPPORT"},{id:"feedback",name:"FEEDBACK"},{id:"copyright",name:"COPYRIGHT"},{id:"business",name:"BUSINESS"},{id:"advertising",name:"ADVERTISING"}],this.data=new o,this.$control={},this.pictures=[],this.docs=[],a.translateObjects(this.typeCollection,"name","name"),this.$party=t.$party,this.type=a.translate("FEEDBACK"),this.data.sender_id=this.$party.id,this.data.sender_name=this.$party.name,this.data.sender_email=this.$party.email,this.data.pic_ids=[],this.data.docs=[],this.data.type=this.typeCollection[0].id,this.$control.onSave=function(){n.onSave()},this.$control.onTypeChange=this.onTypeChange,this.errorsWithHint=i.errorsWithHint,this.created&&this.created({$control:this.$control})}angular.module("pipFeedbackPanel",["pipFocused","pipCommonRest","pipFeedbackData","pipServices","pipSupport.Templates"]).component("pipFeedbackPanel",{bindings:i,templateUrl:"feedback/FeedbackPanel.html",controller:n})},{}],13:[function(t,e,a){function i(t){t.translations("en",{FEEDBACK_TITLE:"Contact us",FEEDBACK_HINT_FEEDBACK:"If you need help or you have some ideas or suggestions to improve Pip.Life just use form below",FEEDBACK_HINT_COPYRIGHT:"If you believe that content available on Pip.Life infringes one or more of your copyrights, you can use the form below to submit a DMCA notice. Upon receipt of a valid notice, we are required by law to respond to it by disabling access to the allegedly infringing content. Your Infringement Notice may be forwarded to the party that made the content available, or to third parties such as ChillingEffects.org.",FEEDBACK_HINT_COPYRIGHT2:"If you choose to request removal of content by submitting an infringement notification, please remember that you are initiating a legal process. Do not make false claims. Please be advised that under 17 U.S.C. § 512(f), you may be liable for damages (including costs and attorneys’ fees) if you knowingly misrepresent that a product or activity is infringing your copyrights. Thus, if you are not sure content located on or linked-to by Dribbble infringes your copyright, you should consider first contacting an attorney.",FEEDBACK_COMPANY:"Company name",FEEDBACK_MESSAGE:"Message",FEEDBACK_ADDRESS:"Address",FEEDBACK_COPYRIGHT_HOLDER:"Copyright holder you represent",FEEDBACK_COPYRIGHT_HOLDER_HINT:"If representing someone other than yourself",FEEDBACK_ORIGINAL_LOCATION:"Location of original copyrighted work",FEEDBACK_DESCRIBE_COPYRIGHTED:"Describe the copyrighted work",FEEDBACK_DESCRIBE_COPYRIGHTED_HINT:"Helps us identify the specific referenced work",FEEDBACK_UNAUTHORIZE_LOCATION:"Location of unauthorized material",FEEDBACK_UNAUTHORIZE_LOCATION_HINT:"Please provide specific page URLs, one per line",FEEDBACK_COPYRIGHT_CONC:"I have a good faith belief that use of the copyrighted materials described above as allegedly infringing is not authorized by the copyright owner, its agent, or the law",FEEDBACK_REGUEST_CONC:"I swear, under penalty of perjury, that the information in the notification is accurate and that I am the copyright owner or am authorized to act on behalf of the owner of an exclusive right that is allegedly infringed.",FEEDBACK_SIGNATURE:"You first and last name",FEEDBACK_SIGNATURE_HINT:"Signature",FEEDBACK_SUBJECT:"Subject",FEEDBACK_SUCCESS:"Your message was sent to Pip.Life support team. They will contact you via personal messaging soon. Thanks for your interest in PipLife!"}),t.translations("ru",{FEEDBACK_TITLE:"Обратная связь",FEEDBACK_HINT_FEEDBACK:"Если Вам нужна помощь или у вас есть идеи или предложения по улучшению Pip.Life используйте рассположенную ниже форму",FEEDBACK_HINT_COPYRIGHT:"Если вы считаете, что контент, доступный на Pip.Life нарушает одно или более ваших авторских прав, вы можете использовать форму ниже, чтобы представить уведомление DMCA. После получения уведомления, мы по закону обязаны ответить на него, отключив доступ к контенту, который предположительно нарушает авторские права. Уведомление может быть направлено со стороны, представившей контент или третьих сторон, таких как ChillingEffects.org.",FEEDBACK_HINT_COPYRIGHT2:"Если вы решите запросить удаление содержания, подав уведомление о нарушении, пожалуйста, помните, что вы инициируете судебный процесс. Пожалуйста, обратите внимание, что исодя из статьи 17 U.S.C. § 512 (F), вы можете нести ответственность за убытки (включая расходы и гонорары адвокатам), если вы сознательно искажаете действительность, что продукт или деятельность нарушает ваши авторские права. Таким образом, если вы не уверены, что содержание, расположенное на PipLife нарушает Ваши авторские права посоветуйтесь с адвокатом.",FEEDBACK_COMPANY:"Название компании",FEEDBACK_MESSAGE:"Сообщение",FEEDBACK_ADDRESS:"Адрес",FEEDBACK_COPYRIGHT_HOLDER:"Владелец авторского права",FEEDBACK_COPYRIGHT_HOLDER_HINT:"Заполните поле, если Вы  представляете кого-то кроме себя",FEEDBACK_ORIGINAL_LOCATION:"Расположение оригинальной авторской работы",FEEDBACK_DESCRIBE_COPYRIGHTED:"Опишите авторские права на произведение",FEEDBACK_DESCRIBE_COPYRIGHTED_HINT:"Это поможет нам идентифицировать ссылки на работу",FEEDBACK_UNAUTHORIZE_LOCATION:"Расположение несанкционированного материала",FEEDBACK_UNAUTHORIZE_LOCATION_HINT:"Пожалуйста, укажите конкретную страницу URL, по одной в строке",FEEDBACK_COPYRIGHT_CONC:"У меня есть добросовестное предположение, что использование защищенных авторским правом материалов, описанных выше, в качестве якобы нарушает авторские права, не разрешено владельцем авторского права, его агентом или законом",FEEDBACK_REGUEST_CONC:"Я клянусь под страхом наказания за лжесвидетельство, что содержащаяся в уведомлении информация верна и что я являюсь владельцем авторского права или имею право действовать от имени владельца эксклюзивных прав, которые якобы нарушены.",FEEDBACK_SIGNATURE:"Ваше имя и фамилия",FEEDBACK_SIGNATURE_HINT:"Подпись",FEEDBACK_SUBJECT:"Заголовок",FEEDBACK_SUCCESS:"Ваш запрос передан команде технической поддержки Pip.Life. C вами свяжутся в ближайшее время по электронной почте. Спасибо за ваш интерес и поддержку PipLife."})}i.$inject=["pipTranslateProvider"],angular.module("pipFeedback.Strings",["pipTranslate"]).config(i)},{}],14:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0})},{}],15:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),t("./IFeedbackDialogService"),t("./Feedback"),t("./FeedbackDialog"),t("./FeedbackPanel"),t("./FeedbackStrings")},{"./Feedback":10,"./FeedbackDialog":11,"./FeedbackPanel":12,"./FeedbackStrings":13,"./IFeedbackDialogService":14}],16:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),t("./rest"),t("./data"),t("./analytics/Analytics"),t("./analytics/IAnalyticsProvider"),t("./feedback"),angular.module("pipSupport",["pipFeedback.Data","pipFeedback.Rest","pipFeedback","pipAnalytics"]),function(t){for(var e in t)a.hasOwnProperty(e)||(a[e]=t[e])}(t("./data"))},{"./analytics/Analytics":1,"./analytics/IAnalyticsProvider":2,"./data":9,"./feedback":15,"./rest":18}],17:[function(t,e,a){function i(t){t.registerPartyCollection("feedbacks","/api/1.0/feedbacks/:id")}i.$inject=["pipRestProvider"],angular.module("pipFeedbackData").config(i)},{}],18:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),angular.module("pipFeedback.Rest",[]),t("./FeedbackResources")},{"./FeedbackResources":17}],19:[function(t,e,a){!function(e){try{e=angular.module("pipSupport.Templates")}catch(t){e=angular.module("pipSupport.Templates",[])}e.run(["$templateCache",function(t){t.put("feedback/Feedback.html",'<md-toolbar class="pip-appbar-ext"></md-toolbar><pip-document width="800"><pip-feedback-panel data="$ctrl.data" pip-created="$ctrl.$panel = $control" show-pictures="$ctrl.showPictures" show-documents="$ctrl.showDocuments" save-callback="$ctrl.callback" type-collection="$ctrl.typeCollection"></pip-feedback-panel><div class="pip-footer"><pip-content-switch class="hide-xs"></pip-content-switch><div class="flex"></div><div class="flex-fixed layout-row"><md-button ng-show="$ctrl.transaction.busy()" ng-click="$ctrl.transaction.abort()" class="md-raised md-warn">{{::\'CANCEL\' | translate}}</md-button><md-button ng-hide="$ctrl.transaction.busy()" ng-click="$ctrl.goBack()">{{::\'CANCEL\' | translate}}</md-button><md-button class="md-accent" ng-hide="$ctrl.transaction.busy()" ng-click="$ctrl.onSave()" ng-disabled="$ctrl.data.content == \'\' && $ctrl.data.title == \'\'">{{::\'SEND\' | translate}}</md-button></div></div></pip-document>')}])}(),function(e){try{e=angular.module("pipSupport.Templates")}catch(t){e=angular.module("pipSupport.Templates",[])}e.run(["$templateCache",function(t){t.put("feedback/FeedbackDialog.html",'<md-dialog width="800" class="pip-feedback-dialog"><md-dialog-content class="lp24-flex rp24-flex"><pip-feedback-panel data="$ctrl.data" pip-created="$ctrl.$panel = $control" show-pictures="$ctrl.showPictures" show-documents="$ctrl.showDocuments" save-callback="$ctrl.callback" type-collection="$ctrl.typeCollection"></pip-feedback-panel></md-dialog-content><md-dialog-actions class="layout-row"><pip-content-switch class="show-gt-sm"></pip-content-switch><div class="flex"></div><div class="layout-row flex-fixed"><md-button ng-show="$ctrl.transaction.busy()" ng-click="$ctrl.transaction.abort()" class="md-raised md-warn">{{::\'CANCEL\' | translate}}</md-button><md-button ng-hide="$ctrl.transaction.busy()" ng-click="$ctrl.goBack()">{{::\'CANCEL\' | translate}}</md-button><md-button class="md-accent rm8" ng-hide="$ctrl.transaction.busy()" ng-click="$ctrl.onSave()" ng-disabled="$ctrl.data.content == \'\' && $ctrl.data.title == \'\'">{{::\'SEND\' | translate}}</md-button></div></md-dialog-actions></md-dialog>')}])}(),function(e){try{e=angular.module("pipSupport.Templates")}catch(t){e=angular.module("pipSupport.Templates",[])}e.run(["$templateCache",function(t){t.put("feedback/FeedbackPanel.html",'<div class="pip-body tp24-flex"><div class="pip-content layout-column"><md-progress-linear ng-show="$ctrl.transaction.busy()" md-mode="indeterminate" class="pip-progress-ontop"></md-progress-linear><form name="form" novalidate=""><md-input-container class="md-block hide-gt-xs"><md-select ng-model="typeIndex" ng-disabled="$ctrl.transaction.busy()" aria-label="DROPDOWN"><md-option ng-repeat="action in $ctrl.typeCollection" value="{{ ::$index }}">{{ (action.title || action.name) | translate }}</md-option></md-select></md-input-container><pip-toggle-buttons ng-model="$ctrl.data.type" pip-buttons="$ctrl.typeCollection" class="bm16 hide-xs"></pip-toggle-buttons><p class="tm0 bm16 text-small text-grey line-height-string" ng-if="$ctrl.data.type == \'feedback\' || $ctrl.data.type == \'support\'">{{::\'FEEDBACK_HINT_FEEDBACK\' | translate}}</p><div ng-if="$ctrl.data.type == \'copyright\'"><p class="tm0 bm16 text-small text-grey line-height-string">{{::\'FEEDBACK_HINT_COPYRIGHT\' | translate}}</p><p class="tm0 bm16 text-small text-grey line-height-string">{{::\'FEEDBACK_HINT_COPYRIGHT2\' | translate }}</p></div><div class="pip-ref-item"><pip-avatar pip-party-id="$ctrl.$party.id" pip-party-name="$ctrl.$party.name" class="pip-pic pip-face"></pip-avatar><div class="pip-content"><p class="pip-title">{{$ctrl.$party.name}}</p><p class="pip-subtitle">{{$ctrl.$party.email}}</p></div></div><div ng-if="$ctrl.data.type!=\'copyright\'"><md-input-container class="md-block" md-no-float=""><input type="text" ng-model="$ctrl.data.title" ng-disabled="$ctrl.transaction.busy()" placeholder="{{:: \'SUBJECT\' | translate}}"></md-input-container><md-input-container class="md-block" md-no-float=""><textarea ng-model="$ctrl.data.content" ng-disabled="$ctrl.transaction.busy()" placeholder="{{::\'FEEDBACK_MESSAGE\'|translate}}">\n                        </textarea></md-input-container></div><div ng-if="$ctrl.data.type==\'copyright\'"><md-input-container class="md-block"><label>{{::\'FEEDBACK_COMPANY\'|translate}}</label> <input type="text" ng-model="$ctrl.data.company_name" ng-disabled="$ctrl.transaction.busy()" placeholder="Company Name"></md-input-container><md-input-container class="md-block"><label>{{::\'FEEDBACK_ADDRESS\'|translate}}</label> <input type="text" ng-model="$ctrl.data.company_addr" ng-disabled="$ctrl.transaction.busy()"></md-input-container><md-input-container class="md-block"><label>{{::\'FEEDBACK_COPYRIGHT_HOLDER\' | translate}}</label> <input name="$ctrl.data.copyright_holder" ng-model="$ctrl.data.copyright_holder" ng-disabled="$ctrl.transaction.busy()" step="any" type="text" tabindex="0" required=""><div ng-messages="$ctrl.errorsWithHint($ctrl.form.data.copyright_holder)"><div ng-message="hint">{{::\'FEEDBACK_COPYRIGHT_HOLDER_HINT\' | translate}}</div></div></md-input-container><md-input-container class="md-block flex"><label>{{::\'FEEDBACK_ORIGINAL_LOCATION\'|translate}}</label> <input type="text" ng-model="$ctrl.data.original_loc" ng-disabled="$ctrl.transaction.busy()"></md-input-container><md-input-container class="md-block"><label>{{::\'FEEDBACK_DESCRIBE_COPYRIGHTED\' | translate}}</label> <input name="$ctrl.data.copyrighted_work" ng-model="$ctrl.data.copyrighted_work" ng-disabled="$ctrl.transaction.busy()" step="any" type="text" tabindex="0" required=""><div ng-messages="$ctrl.errorsWithHint($ctrl.form.data.copyrighted_work)"><div ng-message="hint">{{::\'FEEDBACK_DESCRIBE_COPYRIGHTED_HINT\'| translate}}</div></div></md-input-container><md-input-container class="md-block"><label>{{::\'FEEDBACK_UNAUTHORIZE_LOCATION\' | translate}}</label> <textarea name="$ctrl.data.unauth_loc" ng-model="$ctrl.data.unauth_loc" ng-disabled="$ctrl.transaction.busy()" step="any" type="text" tabindex="0" required=""></textarea><div ng-messages="$ctrl.errorsWithHint(form.data.unauth_loc)"><div ng-message="hint">{{::\'FEEDBACK_UNAUTHORIZE_LOCATION_HINT\' | translate}}</div></div></md-input-container><div class="bm16 layout-row"><md-checkbox ng-model="$ctrl.data.copyright_conc" class="lm0 bm0 flex-fixed" aria-label="FEEDBACK_COPYRIGHT_CONC" style="min-width: 24px; margin-top: -2px"></md-checkbox><p class="m0 text-small text-grey line-height-string">{{::\'FEEDBACK_COPYRIGHT_CONC\'|translate}}</p></div><div class="bm16 layout-row"><md-checkbox ng-model="$ctrl.data.request_conc" class="lm0 bm0 flex-fixed" aria-label="FEEDBACK_REGUEST_CONC" style="min-width: 24px; margin-top: -2px"></md-checkbox><p class="m0 text-small text-grey line-height-string">{{::\'FEEDBACK_REGUEST_CONC\'|translate}}</p></div><md-input-container class="md-block"><label>{{::\'FEEDBACK_SIGNATURE\' | translate}}</label> <input name="$ctrl.data.signature" ng-model="$ctrl.data.signature" ng-disabled="$ctrl.transaction.busy()" step="any" type="text" tabindex="0" required=""><div ng-messages="$ctrl.errorsWithHint($ctrl.form.data.signature)"><div ng-message="hint">{{::\'FEEDBACK_SIGNATURE_HINT\' | translate}}</div></div></md-input-container></div><pip-picture-list-edit class="bm8" ng-show="$ctrl.showPictures" pip-picture-ids="$ctrl.data.pic_ids" pip-created="$ctrl.pictures = $event.sender" ng-disabled="$ctrl.transaction.busy()"></pip-picture-list-edit><pip-document-list-edit ng-show="$ctrl.showDocuments" pip-documents="$ctrl.data.docs" pip-created="$ctrl.docs = $event.sender" ng-disabled="$ctrl.transaction.busy()"></pip-document-list-edit></form></div></div>')}])}()},{}]},{},[19,1,2,3,4,5,6,9,7,8,10,11,12,13,14,15,16,17,18])(19)});


!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;((e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).pip||(e.pip={})).maps=t()}}(function(){return function a(s,r,p){function l(e,t){if(!r[e]){if(!s[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(c)return c(e,!0);var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}var i=r[e]={exports:{}};s[e][0].call(i.exports,function(t){return l(s[e][1][t]||t)},i,i.exports,a,s,r,p)}return r[e].exports}for(var c="function"==typeof require&&require,t=0;t<p.length;t++)l(p[t]);return l}({1:[function(t,e,n){!function(){"use strict";angular.module("pipMaps").provider("pipGoogleMaps",function(){var r={mapTypeId:google.maps.MapTypeId.SATELLITE,disableDefaultUI:!0,panControl:!1,zoomControl:!1};this.mapOptions=function(t){return r=_.defaults({},t,r),_.cloneDeep(r)},this.$get=["$rootScope",function(t){return{mapOptions:function(){return _.cloneDeep(r)},map:function(s,t,e){s=s||{};var n=_.once(function(t){google.maps.event.trigger(t,"resize")}),o=t&&t.boundary||{};return{center:{latitude:(o.nw_lat+o.se_lat)/2||0,longitude:(o.nw_lon+o.se_lon)/2||0},zoom:16,control:{},options:_.assign({},s,r),bounds:{},events:{click:e||function(){},tilesloaded:n,zoom_changed:function(t){var e=s.maxZoomLevel,n=s.minZoomLevel,o=null==e?r.maxZoom:e,i=null==n?r.minZoom:n,a=t.getZoom();o<a?t.setZoom(o):a<i&&t.setZoom(i)}}}},infoWindow:function(t,e){return{show:!1,control:{},options:{boxClass:"pip-map-info-window "+t,closeBoxURL:"",pixelOffset:e||new google.maps.Size(-175,-210,"px","px")}}},setMapBounds:function(e,n){var o=t.$watch(function(){return e.bounds},function(t){t.northeast&&t.southwest&&(e.bounds={northeast:{latitude:n.boundary.nw_lat,longitude:n.boundary.se_lon},southwest:{latitude:n.boundary.se_lat,longitude:n.boundary.nw_lon}},o())},!0)},fitMapToBounds:function(t,e){if(!e.isEmpty()){var n=t.getBounds();!_.isEmpty(n)&&(_.isEmpty(n)||!n.contains||n.contains(e.getNorthEast())&&n.contains(e.getSouthWest()))||t.fitBounds(e)}}}}]})}()},{}],2:[function(t,e,n){!function(){"use strict";function t(t){var o=t.prototype.setChildScope;return t.prototype.setChildScope=function(t,e){var n=o.apply(this,arguments);return e&&e.hasOwnProperty("model")&&!e.model&&delete e.model,n},t}t.$inject=["$delegate"],angular.module("pipMaps").provider("pipMapHelperSrv",function(){var a={iconBaseSize:96,iconNormalScaleFactor:.5,iconActiveScaleFactor:1,iconsPerSprite:1},s=[{name:"North",numberInSprite:0,scope:[-22.5,22.5]},{name:"Northeast",numberInSprite:1,scope:[22.5,67.5]},{name:"East",numberInSprite:2,scope:[67.5,112.5]},{name:"Southeast",numberInSprite:3,scope:[112.5,157.5]},{name:"South",numberInSprite:4,scope:[157.5,-157.5]},{name:"SouthWest",numberInSprite:5,scope:[-157.5,-112.5]},{name:"West",numberInSprite:6,scope:[-112.5,-67.5]},{name:"Northwest",numberInSprite:7,scope:[-67.5,-22.5]},{name:"Stop",numberInSprite:8,scope:[]}];this.setIconSettings=function(t){angular.extend(a,t)},this.$get=["uiGmapGoogleMapApi","$timeout",function(t,o){var i={isReady:!1,whenReady:t,maps:{},getIconDimensions:null,setIcon:null,triggerEvent:null,createSize:null,createPoint:null,createKML:null,getCenterFromRegion:null,fitMapToRegion:null,getBoundsFromRegion:null,getBoundsFromCoordinates:null,fitMapToBounds:null,forceMapToFitBounds:null,shouldFitBound:null,setModelOptions:null,getDegreesBetweenTwoPoints:null,getDirection:null,getDirectionByAngle:null,getIconOriginByDirection:null};return t.then(function(t){var e=t.MapTypeId||{},n={roadMap:e.ROADMAP,satellite:e.SATELLITE,hybrid:e.HYBRID,terrain:e.TERRAIN},o=t.SymbolPath||{},i={circle:o.CIRCLE,backwardClosed:o.BACKWARD_CLOSED_ARROW,forwardClosed:o.FORWARD_CLOSED_ARROW,backwardOpened:o.BACKWARD_OPEN_ARROW,forwardCOpened:o.FORWARD_OPEN_ARROW};this.isReady=!0,angular.extend(this,{mapTypes:n,symbols:i,maps:t})}.bind(i)),i.getIconDimensions=function(t,e){var n=angular.extend({},a,t),o=e?n.iconActiveScaleFactor:n.iconNormalScaleFactor,i=n.iconBaseSize*o;return{origin:this.createPoint(0,i*t.numberInSprite||1),anchor:this.createPoint(i/2,i/2),size:this.createSize(i,i),scaledSize:this.createSize(i,n.iconsPerSprite*i),isActive:e}},i.setIcon=function(e,n){n="boolean"==typeof n?n:e.isActive,i.whenReady.then(function(){var t=this.getIconDimensions(e,n);_.extend(e,t)}.bind(this))},i.triggerEvent=function(){var t=this.maps.event;return t?t.trigger.apply(t,arguments):null},i.createSize=function(t,e){var n=this.maps.Size;return n?new n(t,e,"px","px"):{}},i.createPoint=function(t,e){var n=this.maps.Point;return n?new n(t,e):{}},i.createKML=function(t){var e=this.maps.KmlLayer;return e?new e(t):{}},i.getCenterFromRegion=function(t){return t&&t.boundary?{latitude:(t.boundary.nw_lat+t.boundary.se_lat)/2,longitude:(t.boundary.nw_lon+t.boundary.se_lon)/2}:{latitude:0,longitude:0}},i.fitMapToRegion=function(t,e){var n=this.getBoundsFromRegion(e);o(this.forceMapToFitBounds.bind(this,t,n))},i.getBoundsFromRegion=function(t){return t&&t.boundary?this.getBoundsFromCoordinates([{latitude:t.boundary.se_lat,longitude:t.boundary.se_lon},{latitude:t.boundary.nw_lat,longitude:t.boundary.nw_lon}]):{}},i.getBoundsFromCoordinates=function(t){var e=this.maps.LatLngBounds,n=this.maps.LatLng;if(!n||!e)return{};var o=new e;return t.forEach(function(t){t.latitude&&t.longitude&&o.extend(new n(t.latitude,t.longitude))}),o},i.fitMapToBounds=function(t,e,n){e.isEmpty()||(n||this.shouldFitBound(t,e))&&t.fitBounds(e)},i.forceMapToFitBounds=function(t,e){this.fitMapToBounds(t,e,!0)},i.shouldFitBound=function(t,e){var n=e.getNorthEast(),o=e.getSouthWest(),i=t.getBounds(),a=i.contains&&(!i.contains(n)||!i.contains(o));return _.isEmpty(i)||a},i.setModelOptions=function(t,e){var n=t&&t.gObject;n&&angular.isFunction(n.setOptions)&&n.setOptions(e)},i.getDegreesBetweenTwoPoints=function(t,e){var n={lat:function(){return t.lat||t.latitude},lng:function(){return t.lng||t.longitude}},o={lat:function(){return e.lat||e.latitude},lng:function(){return e.lng||e.longitude}};return google.maps.geometry.spherical.computeHeading(n,o)},i.getDirection=function(t,e){var n=this.getDegreesBetweenTwoPoints(t,e);if((t.lat||t.latitude)===(e.lat||e.latitude)&&(t.lng||t.longitude)===(e.lng||e.longitude))return s[8];for(var o=0;o<8;o++)if(n>=s[o].scope[0]&&n<=s[o].scope[1])return s[o];return s[8]},i.getDirectionByAngle=function(t){for(var e=0;e<8;e++)if(t>=s[e].scope[0]&&t<=s[e].scope[1])return s[e];return s[8]},i.getIconOriginByDirection=function(t,e,n,o){void 0===n&&(n=82),void 0===o&&(o=15);var i=this.getDirection(t,e);return new google.maps.Point(0,i.numberInSprite*n+i.numberInSprite*o)},i}]}).decorator("uiGmapModelKey",t)}()},{}],3:[function(t,e,n){!function(){"use strict";function o(t,e,n,o){this.bounds_=t,this.image_=e,this.map_=n,this.opacity=o||null,this.div_=null,this.setMap(n)}function t(t,e,n){var o=this;t.get("mapEventHandlerMixinFct").mixTo(this,e.$applyAsync.bind(e)),this.sidePanel={},this.embededMap=null,this.pipMapHelperSrv=t.get("pipMapHelperSrv"),this.uiGmapIsReady=t.get("uiGmapIsReady"),this.$timeout=t.get("$timeout"),this.$rootScope=t.get("$rootScope"),this.MapPopupFct=t.get("MapPopupFct"),this.pipMapHelperSrv.whenReady.then(this.init.bind(this)),n.addClass("pip-map flex layout-row"),e.$watch("ctrl.componentOptions.center",function(t){if(1!=o.justResized&&o.gMap&&t){var e={lat:t.latitude||t.lat,lng:t.longitude||t.lng};_.isNumber(e.lat)&&_.isNumber(e.lng)&&o.gMap.panTo(e)}},!0),e.$watch("ctrl.componentOptions.zoom",function(t){o.map&&(o.map.zoom=t)}),e.$watch("ctrl.componentOptions.embededMap",function(t,e){if(t&&e&&t.embededSrc&&e.embededSrc&&t.embededSrc==e.embededSrc&&o.embededOverlay){var n=new google.maps.LatLngBounds(new google.maps.LatLng(t.map_north,t.map_west),new google.maps.LatLng(t.map_south,t.map_east));o.embededOverlay.draw(n)}else o.setEmbededBounds()}),this.$rootScope.$on("pipMainResized",function(){o.throttleResize()})}t.$inject=["$injector","$scope","$element"],(o.prototype=new google.maps.OverlayView).onAdd=function(){var t=document.createElement("div");t.style.borderStyle="none",t.style.borderWidth="0px",t.style.position="absolute",this.opacity&&(t.style.opacity=this.opacity);var e=document.createElement("img");e.src=this.image_,e.style.width="100%",e.style.height="100%",e.style.position="absolute",t.appendChild(e),this.div_=t,this.getPanes().overlayLayer.appendChild(t)},o.prototype.draw=function(t){var e=this.getProjection();if(e){t&&(this.bounds_=t);var n=e.fromLatLngToDivPixel(this.bounds_.getSouthWest()),o=e.fromLatLngToDivPixel(this.bounds_.getNorthEast()),i=this.div_;i&&(i.style.left=n.x+"px",i.style.top=n.y+"px",i.style.width=o.x-n.x+"px",i.style.height=o.y-n.y+"px",this.opacity&&(i.style.opacity=this.opacity))}},t.prototype.defaultOptions={map:{disableDefaultUI:!0,panControl:!(o.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&this.div_.parentNode.removeChild(this.div_),this.div_=null}),zoomControl:!1,disableDoubleClickZoom:!0},setInitBounds:!1,popup:{}},t.prototype.init=function(){this.options=angular.merge({map:{mapTypeId:this.pipMapHelperSrv.mapTypes.satellite}},this.defaultOptions,this.componentOptions),this.componentOptions.control||(this.componentOptions.control={}),this.map=this.getMap(),this.map.zoom=this.componentOptions.zoom,this.map.center=this.componentOptions.center,this.options.sidePanel&&this.options.sidePanel.templateUrl&&this.showSidePanel(this.options.sidePanel.templateUrl),this.uiGmapIsReady.promise().finally(this.onMapReady.bind(this))},t.prototype.onMapReady=function(){this.setInitBounds(),this.setEmbededBounds()},t.prototype.setInitBounds=function(){var t=this.getMapInstance();this.options.setInitBounds&&t&&this.pipMapHelperSrv.fitMapToRegion(t,this.options.geoRegion)},t.prototype.setEmbededBounds=function(){var t=this.getMapInstance();if(this.componentOptions.embededMap&&this.componentOptions.embededMap.embededSrc){var e=new google.maps.LatLngBounds(new google.maps.LatLng(this.componentOptions.embededMap.map_north,this.componentOptions.embededMap.map_west),new google.maps.LatLng(this.componentOptions.embededMap.map_south,this.componentOptions.embededMap.map_east)),n=this.componentOptions.embededMap.embededSrc;this.embededOverlay=new o(e,n,t,this.componentOptions.embededMap.opacity)}else this.embededOverlay&&this.embededOverlay.onRemove(),this.embededOverlay=null},t.prototype.getMapInstance=function(){return!this.gMap&&this.componentOptions&&this.componentOptions.control&&this.componentOptions.control.getGMap&&(this.gMap=this.componentOptions.control.getGMap()),this.gMap},t.prototype.getMap=function(){var e=this,n=this.options.events&&this.options.events.click?this.options.events.click:angular.noop,o=this.options.events&&this.options.events.zoom_changed?this.options.events.zoom_changed:angular.noop,i=this.options.events&&this.options.events.center_changed?this.options.events.center_changed:angular.noop,a=_.debounce(function(t){i(t)},500);return{control:{},options:this.options.map,bounds:this.options.bounds||{},events:_.extend(this.options.events,{click:function(t){e.onClick(t),n()},zoom_changed:function(t){t&&e.componentOptions&&e.componentOptions.mapId&&(t.mapId=e.componentOptions.mapId,o(t))},center_changed:function(t){t&&e.componentOptions&&e.componentOptions.mapId&&(t.mapId=e.componentOptions.mapId,a(t))},dblclick:this.onEventHandler.bind(this),tilesloaded:this.updateMapTiles.bind(this)})}},t.prototype.updateMapTiles=function(t){void 0===t&&(t=!1);var e=this.getMapInstance();e&&this.pipMapHelperSrv.triggerEvent(e,"resize")};var i=_.throttle(function(t,e){e&&(t.panTo(e),t.setCenter(e))},400);t.prototype.throttleResize=function(){var t=this,e=this.getMapInstance();if(e){if(1!=this.justResized){this.justResized=!0;var n=e.getCenter();this.$timeout(function(){i(e,n)}),this.$timeout(function(){t.justResized=!1},400)}this.pipMapHelperSrv.triggerEvent(e,"resize")}},t.prototype.fitMapToBounds=function(t){this.pipMapHelperSrv.fitMapToBounds(this.getMapInstance(),t)},t.prototype.showSidePanel=function(t){this.sidePanel.template=t,this.sidePanel.show=!0,this.$timeout(this.updateMapTiles.bind(this))},t.prototype.hideSidePanel=function(){this.sidePanel.template=null,this.sidePanel.show=!1,this.$timeout(this.updateMapTiles.bind(this))},t.prototype.onClick=function(){this.closePopup()},t.prototype.freeze=function(){this.isFrozen||(this.setMapOptions({draggable:!1,disableDoubleClickZoom:!0,scrollwheel:!1}),this.isFrozen=!0)},t.prototype.unfreeze=function(){this.isFrozen&&(this.setMapOptions({draggable:!0,disableDoubleClickZoom:!0,scrollwheel:!0}),this.isFrozen=!1)},t.prototype.setCursor=function(t){this.cursor=t},t.prototype.setMapOptions=function(t){this.getMapInstance().setOptions(t)},t.prototype.createElementPopup=function(t){return this.createPopupInstance(),this.popup.add(t)},t.prototype.createPopupInstance=function(){this.popup||(this.popup=this.MapPopupFct.create())},t.prototype.closePopup=function(){this.popup&&(console.log("this.popup",this.popup),this.popup.close())},angular.module("pipMaps").controller("MapComponentCtrl",t).directive("pipMap",function(){return{strict:"AE",scope:!0,transclude:!0,bindToController:{componentOptions:"=pipOptions"},controller:"MapComponentCtrl",controllerAs:"ctrl",templateUrl:"map.html"}})}()},{}],4:[function(t,e,n){!function(){"use strict";angular.module("pipMaps").factory("mapEventHandlerMixinFct",function(){function n(a){return a=a||angular.noop,{addEventHandler:function(t,e){var n="__onEventOverridden_"+t;return this[n]=e,function(){this[n]=null}.bind(this)},onEventHandler:function(t,e){var n="__onEventOverridden_"+e,o=function(t,e,n,o){return o&&o.length||(o=n,n=null),{gModel:t,eventName:e,args:o,model:n,position:o[0]&&o[0].latLng&&s(o[0].latLng)}}.apply(null,arguments);if(angular.isFunction(this[n]))return this[n](o),void a();var i="on"+e.charAt(0).toUpperCase()+e.slice(1);angular.isFunction(this[i])&&(this[i](o),a())}}}var s=function(t){return{latitude:t.lat(),longitude:t.lng()}};return{mixTo:function(t,e){angular.extend(t,n(e))}}})}()},{}],5:[function(t,e,n){function o(t){t.configure({key:"AIzaSyBg6cm-FDBFPWzRcn39AuSHGQSrdtVIjEo",v:"3.23",libraries:"geometry"})}o.$inject=["uiGmapGoogleMapApiProvider"],angular.module("pipMaps").config(o)},{}],6:[function(t,e,n){var o={overlay:"<pipOverlay",onEdit:"&?pipOnEdit",mapOptions:"=?pipMapOptions",showActionPanel:"<?pipShowActionPanel",actionTypes:"<?pipActionTypes",control:"&?pipControl",disabled:"<?pipDisabled",disabledPolygons:"<?pipDisabledPolygons",disabledPolygonsOptions:"<?pipDisabledPolygonsOptions",disabledPolylines:"<?pipDisabledPolylines",disabledPolylinesOptions:"<?pipDisabledPolylinesOptions",disabledCircles:"<?pipDisabledCircles",disabledCirclesOptions:"<?pipDisabledCirclesOptions"},i=function(){};i.clearMap="clear",i.addCircle="circle",i.addRectangle="rectangle",i.addPolygon="polygon",i.addLine="line";var a=(s.$inject=["$element","$scope","$mdConstant","$document","$timeout","uiGmapGoogleMapApi"],s.prototype.$onDestroy=function(){},s.prototype.$onChanges=function(t){t.overlay&&t.overlay.currentValue&&this.setOverlay(this.convertToGoogleMapOverlay(t.overlay.currentValue),t.overlay.currentValue.type),t.disabled&&this.currentOverlay&&(this.currentOverlay.setDraggable(!t.disabled.currentValue),this.currentOverlay.setEditable&&this.currentOverlay.setEditable(!t.disabled.currentValue))},s.prototype.$onInit=function(){angular.extend(this.map,this.mapOptions),this.control&&this.control({control:this})},s.prototype.fitBounds=function(){if(this.map.control.getGMap&&this.currentOverlay)switch(this.overlay.type){case"circle":this.map.control.getGMap().fitBounds(this.currentOverlay.getBounds());break;case"marker":this.currentOverlay.getPosition&&this.map.control.getGMap().panTo(this.currentOverlay.getPosition());break;case"rectangle":this.map.control.getGMap().fitBounds(this.currentOverlay.getBounds());break;default:if(0<this.currentOverlay.getPath().getArray().length){var e=new google.maps.LatLngBounds;_.each(this.currentOverlay.getPath().getArray(),function(t){e.extend(t)}),this.map.control.getGMap().fitBounds(e)}}},s.prototype.convertToGoogleMapOverlay=function(t){return"polygon"===t.type?this.createPolygon(t):"line"===t.type||"polyline"===t.type?this.createPolyline(t):"circle"===t.type?this.createCircle(t):"marker"===t.type?this.createMarker(t):"rectangle"===t.type?this.createRectangle(t):void 0},s.prototype.createMarker=function(t){if(t.pos&&t.pos.coordinates||t.latitude&&t.longitude){var e;e={lat:t.pos.coordinates?t.pos.coordinates[1]:t.latitude,lng:t.pos.coordinates?t.pos.coordinates[0]:t.longitude};var n=new google.maps.Marker(angular.extend(this.getOptionsByType("marker"),{position:e}));return this.map.control.getGMap&&n.setMap(this.map.control.getGMap()),n}return new google.maps.Circle(this.getOptionsByType("circle"))},s.prototype.createCircle=function(t){if(t.center&&(t.center.coordinates||t.center.latitude&&t.center.longitude)&&t.distance){var e;e={lat:t.center.coordinates?t.center.coordinates[1]:t.center.latitude,lng:t.center.coordinates?t.center.coordinates[0]:t.center.longitude};var n=new google.maps.Circle(angular.extend(this.getOptionsByType("circle"),{center:e,radius:t.distance}));return this.map.control.getGMap&&n.setMap(this.map.control.getGMap()),n}return new google.maps.Circle(this.getOptionsByType("circle"))},s.prototype.createPolygon=function(t){if(t.geometry&&t.geometry.coordinates){var e=[];_.each(t.geometry.coordinates[0],function(t){e.push({lat:t[1],lng:t[0]})});var n=new google.maps.Polygon(angular.extend(this.getOptionsByType("polygon"),{paths:e}));return this.map.control.getGMap&&n.setMap(this.map.control.getGMap()),n}return new google.maps.Polygon(this.getOptionsByType("polygon"))},s.prototype.createPolyline=function(t){if(t.geometry&&t.geometry.coordinates){var e=[];_.each(t.geometry.coordinates,function(t){e.push({lat:t[1],lng:t[0]})});var n=new google.maps.Polyline(angular.extend(this.getOptionsByType("line"),{path:e}));return this.map.control.getGMap&&n.setMap(this.map.control.getGMap()),n}return new google.maps.Polyline(this.getOptionsByType("line"))},s.prototype.createRectangle=function(t){if(t.bounds){var e=t.bounds,n=new google.maps.Rectangle(angular.extend(this.getOptionsByType("rectangle"),{bounds:e}));return this.map.control.getGMap&&n.setMap(this.map.control.getGMap()),n}return new google.maps.Rectangle(this.getOptionsByType("rectangle"))},s.prototype.getOptionsByType=function(t){switch(t){case"polygon":return _.cloneDeep(angular.extend(this._polygonOptions,this.getDisableOptions()));case"circle":return _.cloneDeep(angular.extend(this._circleOptions,this.getDisableOptions()));case"line":case"polyline":return _.cloneDeep(angular.extend(this._polylineOptions,this.getDisableOptions()));case"marker":return _.cloneDeep(angular.extend(this._markerOptions,this.getDisableOptions()));case"rectangle":return _.cloneDeep(angular.extend(this._rectangleOptions,this.getDisableOptions()))}},s.prototype.getDisableOptions=function(){return{editable:!this.disabled,draggable:!this.disabled}},s.prototype.setOverlay=function(t,e,n){var o=this;if(void 0===n&&(n=!0),t){switch(this.clearMap(),this.currentOverlay=t||{},this.currentOverlay.type=e){case"circle":this.currentOverlay.center_changed=function(){o.onEditOverlay()},this.currentOverlay.radius_changed=function(){o.onEditOverlay()};break;case"marker":if(!this.currentOverlay.addListener)return;this.currentOverlay.addListener("position_changed",function(){o.onEditOverlay()});break;case"rectangle":if(!this.currentOverlay.addListener)return;this.currentOverlay.addListener("bounds_changed",function(){o.onEditOverlay()});break;default:if(!this.currentOverlay.getPath)return;google.maps.event.addListener(this.currentOverlay.getPath(),"set_at",function(){o.onEditOverlay()}),google.maps.event.addListener(this.currentOverlay.getPath(),"insert_at",function(){o.onEditOverlay()})}n&&this.fitBounds()}},s.prototype.onEditOverlay=function(){this.onEdit&&this.onEdit({overlay:this.currentOverlay,bounds:this.currentOverlay&&"rectangle"===this.currentOverlay.type?{north:this.currentOverlay.getBounds().getNorthEast().lat(),east:this.currentOverlay.getBounds().getNorthEast().lng(),south:this.currentOverlay.getBounds().getSouthWest().lat(),west:this.currentOverlay.getBounds().getSouthWest().lng()}:{},type:this.currentOverlay?this.currentOverlay.type:null,path:!this.currentOverlay||"polygon"!==this.currentOverlay.type&&"polyline"!==this.currentOverlay.type?[]:this.currentOverlay.getPath(),center:this.currentOverlay&&"circle"===this.currentOverlay.type?this.currentOverlay.getCenter():this.currentOverlay&&this.currentOverlay.getPosition&&"marker"===this.currentOverlay.type?this.currentOverlay.getPosition():{},radius:this.currentOverlay&&"circle"===this.currentOverlay.type?this.currentOverlay.getRadius():{}})},s.prototype.showAction=function(t){return!this.actionTypes||this.actionTypes.includes(t)},Object.defineProperty(s.prototype,"showPanel",{get:function(){return!1!==this.showActionPanel},enumerable:!0,configurable:!0}),s.prototype.addCircle=function(){this.drawingManagerOptions.drawingMode=google.maps.drawing.OverlayType.CIRCLE},s.prototype.addPolygon=function(){this.drawingManagerOptions.drawingMode=google.maps.drawing.OverlayType.POLYGON},s.prototype.addRectangle=function(){this.drawingManagerOptions.drawingMode=google.maps.drawing.OverlayType.RECTANGLE},s.prototype.addLine=function(){this.drawingManagerOptions.drawingMode=google.maps.drawing.OverlayType.POLYLINE},s.prototype.addMarker=function(){this.drawingManagerOptions.drawingMode=google.maps.drawing.OverlayType.MARKER},s.prototype.clearMap=function(){this.drawingManagerOptions.drawingMode=null,this.currentOverlay&&this.currentOverlay.map&&(this.currentOverlay.setMap(null),this.currentOverlay=null,this.onEditOverlay())},s);function s(t,e,n,o,i,a){var s=this;this.$element=t,this.$scope=e,this.$mdConstant=n,this.$document=o,this.$timeout=i,this.uiGmapGoogleMapApi=a,this.map={control:{},options:{disableDefaultUI:!0,mapTypeId:"satellite",panControl:!1,zoomControl:!1,mapTypeControl:!1,streetViewControl:!1}},this.drawingManagerControl={},this.drawingManagerOptions={},this.currentOverlay={},this._circleOptions={fillColor:"#F8E81C",fillOpacity:.2,strokeWeight:3,strokeColor:"#F8E81C",clickable:!1,editable:!this.disabled,zIndex:1},this._polygonOptions={fillColor:"#F8E81C",fillOpacity:.2,strokeWeight:3,strokeColor:"#F8E81C",clickable:!1,editable:!this.disabled,draggable:!this.disabled,zIndex:1},this._polylineOptions={strokeWeight:6,strokeColor:"#F8E81C",clickable:!1,editable:!this.disabled,zIndex:1},this._markerOptions={icon:{path:0,scale:4,strokeWeight:8,fillColor:"#F8E81C",strokeColor:"#F8E81C",strokeOpacity:.9,draggable:!this.disabled}},this._rectangleOptions={fillColor:"#F8E81C",fillOpacity:.2,strokeWeight:3,strokeColor:"#F8E81C",clickable:!1,editable:!this.disabled,draggable:!this.disabled,zIndex:1},t.addClass("pip-map-edit"),a.then(function(t){s.drawingManagerOptions={drawingControl:!1,drawingControlOptions:{position:google.maps.ControlPosition.TOP_CENTER,drawingModes:[google.maps.drawing.OverlayType.CIRCLE,google.maps.drawing.OverlayType.POLYGON,google.maps.drawing.OverlayType.POLYLINE]},circleOptions:s._circleOptions,polygonOptions:s._polygonOptions,polylineOptions:s._polylineOptions,markerOptions:s._markerOptions,rectangleOptions:s._rectangleOptions}}),e.$watch("$ctrl.map.control.getGMap",function(){s.currentOverlay&&s.currentOverlay.setMap&&_.isFunction(s.map.control.getGMap)&&(s.currentOverlay.setMap(s.map.control.getGMap()),s.fitBounds())}),e.$watch("$ctrl.mapOptions.embededMap",function(){_.assign(s.map,s.mapOptions)},!0),e.$watch("$ctrl.mapOptions.isEmbeded",function(){_.assign(s.map,s.mapOptions)}),e.$watch("$ctrl.drawingManagerControl.getDrawingManager",function(t){s.drawingManagerControl.getDrawingManager&&(google.maps.event.addListener(s.drawingManagerControl.getDrawingManager(),"overlaycomplete",function(t){s.drawingManagerControl.getDrawingManager().setDrawingMode(null),s.setOverlay(t.overlay,t.type,!1),s.onEditOverlay()}),google.maps.event.addListener(s.drawingManagerControl.getDrawingManager(),"drawingmode_changed",function(){null!==s.drawingManagerControl.getDrawingManager().getDrawingMode()&&s.currentOverlay&&s.currentOverlay.map&&s.currentOverlay.setMap(null)}),google.maps.event.addDomListener(document,"keyup",function(t){var e=t.keyCode?t.keyCode:t.which;27===e&&s.drawingManagerControl.getDrawingManager().setDrawingMode(null),46===e&&s.clearMap()}))})}function r(t){t.configure({libraries:"drawing"})}r.$inject=["uiGmapGoogleMapApiProvider"],angular.module("pipMapsEdit").component("pipMapEdit",{bindings:o,templateUrl:"edit/MapEdit.html",controller:a,controllerAs:"$ctrl"}).config(r)},{}],7:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),angular.module("pipMapsEdit",[]),t("./MapEdit")},{"./MapEdit":6}],8:[function(t,e,n){!function(){"use strict";angular.module("pipMapsElements").factory("MapElementsCtrlFct",function(){function t(t,e){t.get("mapEventHandlerMixinFct").mixTo(this,e.$applyAsync.bind(e)),this.control={},this.popUpOpened=null,this.pipMapHelperSrv=t.get("pipMapHelperSrv"),this.uiGmapIsReady=t.get("uiGmapIsReady"),this.$q=t.get("$q")}return t.prototype.$onInit=function(){var e=this;this.options=angular.merge({},this.defaultOptions,this.componentOptions),this.models=this.models||[],this.externalDblclick=this.options.events&&this.options.events.dblclick?this.options.events.dblclick:angular.noop,this.externalClick=this.options.events&&this.options.events.click?this.options.events.click:angular.noop,this.externalRightclick=this.options.events&&this.options.events.rightclick?this.options.events.rightclick:angular.noop,this.events=_.extend(this.options.events,{dblclick:this.onEventHandler.bind(this),mousedown:this.onEventHandler.bind(this),mouseup:this.onEventHandler.bind(this),rightclick:this.onEventHandler.bind(this),click:this.onEventHandler.bind(this),position_changed:function(t){e.updatePopupPosition(t)}})},t.prototype.$onDestroy=function(){this.closePopup()},t.prototype.defaultOptions={popup:!1,fitBounds:!1},t.prototype.init=function(t){this.mapCtrl=t,this.initPopup()},t.prototype.setNewOptions=function(t){this.popup&&this.popup.setNewOptions(t)},t.prototype.initPopup=function(){this.options.popup&&(this.options.popup=angular.merge({},this.options.popup,{onShow:this.onShowPopup.bind(this),onClose:this.onClosePopup.bind(this)}),this.pipMapHelperSrv.whenReady.then(function(){this.popup=this.mapCtrl.createElementPopup(this.options.popup)}.bind(this)))},t.prototype.onShowPopup=function(){this.popUpOpened=!0},t.prototype.onClosePopup=function(){this.popUpOpened=!1},t.prototype.getBoundsToFitAsync=function(){return this.options.fitBounds?this.uiGmapIsReady.promise().then(function(){return this.getBounds()}.bind(this)):this.$q.reject("Fit is switched off")},t.prototype.getBounds=function(){return this.pipMapHelperSrv.getBoundsFromCoordinates(this.getAllPositions())},t.prototype.getAllPositions=function(){return angular.isArray(this.models)?this.models.map(function(t){return this.getPosition(t)},this):[]},t.prototype.getPosition=function(t){return{latitude:t.latitude,longitude:t.longitude}},t.prototype.isModelEmpty=function(t){var e=this.getPosition(t);return!e.latitude||!e.longitude},t.prototype.onDblclick=function(t){this.externalDblclick(t)},t.prototype.onClick=function(t){this.externalClick(t),this.longClick?(this.correctCircleModel(t),this.togglePopup(t),this.longClick=!1):this.closePopup()},t.prototype.correctCircleModel=function(e){var n=this;if(e.gModel.radius&&e.gModel.center){var o={};_.each(this.models,function(t){t[n.options.center]&&t[n.options.radius]&&t[n.options.center].latitude.toFixed(5)==e.gModel.center.lat().toFixed(5)&&t[n.options.center].longitude.toFixed(5)==e.gModel.center.lng().toFixed(5)&&t[n.options.radius].toFixed(5)===e.gModel.radius.toFixed(5)&&(o=t)}),e.model=o}},t.prototype.onRightclick=function(t){this.externalRightclick(t),this.correctCircleModel(t),this.togglePopup(t)},t.prototype.onMousedown=function(t){this.start=(new Date).getTime()},t.prototype.onMouseup=function(t){this.end=(new Date).getTime(),this.longClick=300<this.end-this.start},t.prototype.togglePopup=function(t){this.popup&&this.popup.toggle(t)},t.prototype.closePopup=function(t){this.popup&&this.popup.close()},t.prototype.getModels=function(){return this.models},t.prototype.checkContainsModel=function(t){return-1<this.models.indexOf(t)},t.prototype.getPlural=function(t){return this.getPlurals().get(t)},t.prototype.getPlurals=function(){return this.control.getPlurals()},t.prototype.updatePopupPosition=function(t){this.popUpOpened===t.model.id&&this.popup.setPosition({latitude:t.position.lat(),longitude:t.position.lng()})},t.prototype.freezeMap=function(){return this.mapCtrl.freeze()},t.prototype.unfreezeMap=function(){return this.mapCtrl.unfreeze()},t.prototype.setCursor=function(t){return this.mapCtrl.setCursor(t)},t})}()},{}],9:[function(t,e,n){!function(){"use strict";function t(s){return{strict:"AE",scope:{},require:["^pipMap","pipMapElements"],link:function(t,e,n,o){var i=o[0],a=o[1];a.init(i),t.$watch("ctrl.models",function(t){t&&a.getBoundsToFitAsync().then(function(t){s(i.fitMapToBounds.bind(i,t),200)})}),t.$watch("ctrl.componentOptions.popup",function(t){a.setNewOptions(t)},!0)},bindToController:{componentOptions:"=pipOptions",models:"=pipModels"},controller:"MapElementsCtrl",controllerAs:"ctrl",templateUrl:"elements/map-elements.html"}}t.$inject=["$timeout"],angular.module("pipMapsElements").factory("pipMapElementsFct",t)}()},{}],10:[function(t,e,n){!function(){"use strict";angular.module("pipMapsElements").factory("mapElementsRequireFct",function(){return{elements:["?^pipMapMarkers","?^pipMapPolylines","?^pipMapPolygons","?^pipMapKml"],getType:function(t,e){try{return t.slice(e).map(function(t,e){return t&&this.elements[e]},this).filter(function(t){return t})[0].replace("?^pipMap","").toLowerCase()}catch(t){throw new Error("pip-map-editable-element can be used only with map elements directives")}},getController:function(t,e){return t.slice(e).filter(function(t){return t})[0]}}})}()},{}],11:[function(t,e,n){!function(){"use strict";function t(n){function t(t,e){n.call(this,t,e),this.$parse=t.get("$parse")}var e=n.prototype;return(t.prototype=Object.create(e)).defaultOptions=angular.merge({},e.defaultOptions,{stroke:"stroke",fill:"fill",radius:"radius",center:"center",fitBounds:!1}),t.prototype.$onInit=function(){e.$onInit.call(this),this.setPositionGetterSetter()},t.prototype.setPositionGetterSetter=function(){var t=this.options.path;this.getPosition=this.$parse(t),this.setPosition=this.getPosition.assign},t.prototype.setDefaultPositionsIfNeeded=function(t){var e=this.getPosition(t);angular.isArray(e)||this.setPosition(t,[])},t.prototype.getAllPositions=function(){var t=e.getAllPositions.call(this);return Array.prototype.concat.apply([],t)},t.prototype.setPosition=function(t,e){t[this.defaultOptions.center]=e},t.prototype.getPosition=function(t){return t[this.defaultOptions.center]},t.prototype.isModelEmpty=function(t){return!this.getPosition(t)},t}function e(t,e,n){var o=t(n,{$scope:e});return angular.extend(o,this),o.$onInit(),o}function n(t){return angular.extend({},t,{require:["^pipMap","pipMapCircles"],controller:"MapCirclesCtrl",templateUrl:"elements/circles/map-circles.html"})}t.$inject=["MapElementsCtrlFct"],e.$inject=["$controller","$scope","MapCirclesCtrlFct"],n.$inject=["pipMapElementsFct"],angular.module("pipMapsElements").factory("MapCirclesCtrlFct",t).controller("MapCirclesCtrl",e).directive("pipMapCircles",n)}()},{}],12:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),angular.module("pipMapsElements",[]),t("./MapElementControllerService"),t("./MapElementDirectiveService"),t("./MapElementRequireService"),t("./kml/MapKml"),t("./markers/MapMarkers"),t("./polygons/MapPolygons"),t("./polylines/MapPolylines"),t("./circles/MapCircles")},{"./MapElementControllerService":8,"./MapElementDirectiveService":9,"./MapElementRequireService":10,"./circles/MapCircles":11,"./kml/MapKml":13,"./markers/MapMarkers":14,"./polygons/MapPolygons":15,"./polylines/MapPolylines":16}],13:[function(t,e,n){!function(){"use strict";function t(n){function t(t,e){n.call(this,t,e),this.pipMapHelperSrv=t.get("pipMapHelperSrv"),this.existingModels=[]}var e=n.prototype;return(t.prototype=Object.create(e)).defaultOptions=angular.merge({},e.defaultOptions,{layer:{preserveViewport:!0,suppressInfoWindows:!0}}),t.prototype.getPopupParameters=function(){return this.popup.model?{model:this.popup.model,position:this.popup.position,meta:this.popup.model.instance.getMetadata()}:{}},t.prototype.update=function(){this.pipMapHelperSrv.whenReady.then(function(){this.removeOldModels(),this.addNewModels()}.bind(this))},t.prototype.removeOldModels=function(){this.getOldModels().forEach(function(t){t.instance.setMap(null),this.deRegisterModel(t)},this)},t.prototype.getOldModels=function(){var e=this.models.map(function(t){return t.url});return this.existingModels.filter(function(t){return-1===e.indexOf(t.url)})},t.prototype.addNewModels=function(){this.getNewModels().forEach(function(t){var e=angular.copy(t);this.addModel(e),this.registerModel(e),this.addEvents(e)},this)},t.prototype.getNewModels=function(){var e=this.existingModels.map(function(t){return t.url});return this.models.filter(function(t){return-1===e.indexOf(t.url)})},t.prototype.addModel=function(t){var e=this.mapCtrl.getMapInstance(),n=angular.merge({map:e,url:t.url},this.options.layer);t.instance=this.pipMapHelperSrv.createKML(n)},t.prototype.addEvents=function(t){var e=this.onEvent.bind(this,t,"click");t.instance.addListener("click",e)},t.prototype.onEvent=function(t,e){var n=this.copyArguments(arguments,2);this.onEventHandler(t.instance,e,t,n)},t.prototype.copyArguments=function(t,e){for(var n=[],o=0;o<t.length-e;++o)n[o]=t[o+e];return n},t.prototype.getPopupMetaData=function(){return this.popup.model&&this.popup.model.instance.getMetadata()},t.prototype.registerModel=function(t){this.existingModels.push(t)},t.prototype.deRegisterModel=function(t){var e=this.existingModels.indexOf(t);this.existingModels.splice(e,1)},t}function e(t,e,n){var o=t(n,{$scope:e});return angular.extend(o,this),o.$onInit(),o}function n(t){var e=angular.extend({},t,{require:["^pipMap","pipMapKml"],controller:"MapKmlCtrl",templateUrl:"elements/kml/map-kml.html"}),s=e.link;return e.link=function(t,e,n,o){s.apply(this,arguments);var i=o[0],a=o[1];a.mapCtrl=i,t.$watchCollection("ctrl.models",function(t){t&&a.update()})},e}n.$inject=["pipMapElementsFct"],t.$inject=["MapElementsCtrlFct"],e.$inject=["$controller","$scope","MapKmlCtrlFct"],angular.module("pipMapsElements").directive("pipMapKml",n).factory("MapKmlCtrlFct",t).controller("MapKmlCtrl",e)}()},{}],14:[function(t,e,n){!function(){"use strict";function t(n){function t(t,e){n.call(this,t,e),this.$parse=t.get("$parse"),this.pipMapHelperSrv=t.get("pipMapHelperSrv")}var e=n.prototype;return(t.prototype=Object.create(e)).defaultOptions=angular.merge({},e.defaultOptions,{model:{coords:"self",icon:"icon"},connect:!1}),t.prototype.$onInit=function(){e.$onInit.call(this),this.setPositionGetterSetter(),this.initConnect()},t.prototype.initConnect=function(){if(this.options.connect){var t=this.options.connect;this.connect=angular.merge({show:!0},t)}},t.prototype.setPositionGetterSetter=function(){var t=this.options.model.coords;"self"!==t&&(this.getPosition=this.$parse(t),this.setPosition=this.getPosition.assign)},t.prototype.setPosition=function(t,e){angular.extend(t,e)},t.prototype.onShowPopup=function(t){this.popUpOpened=t.id,this.options.popup.options.setPosition},t.prototype.onClosePopup=function(){this.popUpOpened=null},t.prototype.setIconActive=function(t){t&&t.icon&&(this.popupModel=t,this.pipMapHelperSrv.setIcon(this.popupModel.icon,!0))},t.prototype.resetIconActive=function(){this.popupModel&&this.popupModel.icon&&(this.pipMapHelperSrv.setIcon(this.popupModel.icon,!1),this.popupModel=null)},t}function e(t,e,n){var o=t(n,{$scope:e});return angular.extend(o,this),o.$onInit(),o}function n(t){return angular.extend({},t,{require:["^pipMap","pipMapMarkers"],controller:"MapMarkersCtrl",templateUrl:"elements/markers/map-markers.html"})}t.$inject=["MapElementsCtrlFct"],e.$inject=["$controller","$scope","MapMarkersCtrlFct"],n.$inject=["pipMapElementsFct"],angular.module("pipMapsElements").factory("MapMarkersCtrlFct",t).controller("MapMarkersCtrl",e).directive("pipMapMarkers",n)}()},{}],15:[function(t,e,n){!function(){"use strict";function t(n){function t(t,e){n.call(this,t,e),this.$parse=t.get("$parse")}var e=n.prototype;return(t.prototype=Object.create(e)).defaultOptions=angular.merge({},e.defaultOptions,{path:"path",stroke:{color:"#ff6262",weight:5},fitBounds:!1}),t.prototype.$onInit=function(){e.$onInit.call(this),this.setPositionGetterSetter()},t.prototype.setPositionGetterSetter=function(){var t=this.options.path;this.getPosition=this.$parse(t),this.setPosition=this.getPosition.assign},t.prototype.setDefaultPositionsIfNeeded=function(t){var e=this.getPosition(t);angular.isArray(e)||this.setPosition(t,[])},t.prototype.getAllPositions=function(){var t=e.getAllPositions.call(this);return Array.prototype.concat.apply([],t)},t.prototype.setPosition=function(t,e){t[this.defaultOptions.path]=e},t.prototype.getPosition=function(t){return t[this.defaultOptions.path]},t.prototype.isModelEmpty=function(t){var e=this.getPosition(t);return!(e&&e.length&&e[0].latitude&&e[0].longitude)},t}function e(t,e,n){var o=t(n,{$scope:e});return angular.extend(o,this),o.$onInit(),o}function n(t){return angular.extend({},t,{require:["^pipMap","pipMapPolygons"],controller:"MapPolygonsCtrl",templateUrl:"elements/polygons/map-polygons.html"})}t.$inject=["MapElementsCtrlFct"],e.$inject=["$controller","$scope","MapPolygonsCtrlFct"],n.$inject=["pipMapElementsFct"],angular.module("pipMapsElements").factory("MapPolygonsCtrlFct",t).controller("MapPolygonsCtrl",e).directive("pipMapPolygons",n)}()},{}],16:[function(t,e,n){!function(){"use strict";function t(n){function t(t,e){n.call(this,t,e)}var e=n.prototype;return(t.prototype=Object.create(e)).defaultOptions=angular.merge({},e.defaultOptions,{}),t}function e(t,e,n){var o=t(n,{$scope:e});return angular.extend(o,this),o.$onInit(),o}function n(t){return angular.extend({},t,{require:["^pipMap","pipMapPolylines"],controller:"MapPolylinesCtrl",templateUrl:"elements/polylines/map-polylines.html"})}t.$inject=["MapPolygonsCtrlFct"],e.$inject=["$controller","$scope","MapPolylinesCtrlFct"],n.$inject=["pipMapElementsFct"],angular.module("pipMapsElements").factory("MapPolylinesCtrlFct",t).controller("MapPolylinesCtrl",e).directive("pipMapPolylines",n)}()},{}],17:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),t("./popup"),t("./elements"),t("./edit"),angular.module("pipMaps",["uiGmapgoogle-maps","pipMaps.Templates","pipMapsPopup","pipMapsElements","pipMapsEdit"]),t("./config"),t("./GoogleMapsRemoveAfterService"),t("./HelpService"),t("./Map"),t("./MapEventHandlerService")},{"./GoogleMapsRemoveAfterService":1,"./HelpService":2,"./Map":3,"./MapEventHandlerService":4,"./config":5,"./edit":7,"./elements":12,"./popup":22}],18:[function(t,e,n){!function(){"use strict";function t(t){var n=t.get("pipMapHelperSrv"),e=t.get("$rootScope");function o(t){new Error;var e=n.createSize(t.offset.width,t.offset.height);this.options=angular.merge({boxClass:"pip-map-info-window "+t.className,closeBoxURL:"",pixelOffset:e},t.options),this.templateUrl=t.templateUrl,this.onShow=t.onShow,this.onClose=t.onClose,this.initBreakpoints(t.offset.breakpoints)}return o.prototype.initBreakpoints=function(t){t=t||[],this.breakpoints=t.map(function(t){return{name:t.name,offset:n.createSize(t.width,t.height)}},this),this.defaultOffset=this.options.pixelOffset},o.prototype.setNewOptions=function(t){var e=n.createSize(t.offset.width,t.offset.height);this.options=angular.merge({boxClass:"pip-map-info-window "+t.className,closeBoxURL:"",pixelOffset:e},t.options),this.initBreakpoints(t.offset.breakpoints),this.fitOffset()},o.prototype.close=function(){this.onClose()},o.prototype.show=function(t){this.onShow(t),this.fitOffset()},o.prototype.setPosition=function(){this.fitOffset()},o.prototype.fitOffset=function(){this.breakpoints.some(function(t){if(e.utils.hasBreakpoint(t.name))return this.options.pixelOffset=t.offset,!0},this)||(this.options.pixelOffset=this.defaultOffset)},{create:function(t){return new o(t)}}}t.$inject=["$injector"],angular.module("pipMapsPopup").factory("MapElementPopupFct",t)}()},{}],19:[function(t,e,n){!function(){"use strict";angular.module("pipMapsPopup").directive("pipMapPopup",function(){return{strict:"A",scope:{popup:"=pipMapPopup"},templateUrl:"popup/map-popup.html"}})}()},{}],20:[function(t,e,n){!function(){"use strict";angular.module("pipMapsPopup").directive("pipMapPopupContent",function(){return{strict:"AE",transclude:!0,templateUrl:"popup/map-popup-content.html"}})}()},{}],21:[function(t,e,n){!function(){"use strict";function t(t){var o=t.get("MapElementPopupFct"),e=t.get("$rootScope"),n=t.get("$timeout");function i(){this.elements=[]}return i.prototype.add=function(t){var e=this,n=o.create(t);return this.elements.push(n),{toggle:this.toggle.bind(this,n),close:this.close.bind(this,n),setPosition:function(t){!1!==e.element.options.updatePosition&&(e.position=t)},setNewOptions:function(t){n.setNewOptions(t)}}},i.prototype.toggle=function(t,e){if(this.isNewModel(e))return this.close(),this.element=t,n(function(){this.show(t)}.bind(this),10),void this.setPosition(e);this.close()},i.prototype.isNewModel=function(t){return this.model!==t.model},i.prototype.show=function(t){this.model&&this.position&&(this.isEnabled=!0,this.setBreakpointHandler(t))},i.prototype.setPosition=function(t){this.position=this.getPosition(t),this.model=t.model,this.element.show(this.model)},i.prototype.setBreakpointHandler=function(t){this.removeBreakpointHandler=e.$on("pipMainLayoutResized",t.setPosition.bind(t))},i.prototype.resetBreakpointHandler=function(){this.removeBreakpointHandler&&this.removeBreakpointHandler()},i.prototype.close=function(){this.element&&(this.element.close(),this.resetBreakpointHandler(),this.model=null,this.isEnabled=!1,this.position=null,this.element=null)},i.prototype.getPosition=function(t){return t.position},{create:function(){return new i}}}t.$inject=["$injector"],angular.module("pipMapsPopup").factory("MapPopupFct",t)}()},{}],22:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),angular.module("pipMapsPopup",[]),t("./MapElementPopupService"),t("./MapPopup"),t("./MapPopupContent"),t("./MapPopupService")},{"./MapElementPopupService":18,"./MapPopup":19,"./MapPopupContent":20,"./MapPopupService":21}],23:[function(t,e,n){!function(e){try{e=angular.module("pipMaps.Templates")}catch(t){e=angular.module("pipMaps.Templates",[])}e.run(["$templateCache",function(t){t.put("map.html",'<div class="pip-map-side-panel flex-fixed flex-order-1" ng-if="ctrl.sidePanel.show"><ng-include src="ctrl.sidePanel.template"></ng-include></div><ui-gmap-google-map class="flex pip-map-provider-wrapper" control="ctrl.componentOptions.control" center="ctrl.map.center" zoom="ctrl.map.zoom" options="ctrl.map.options" bounds="ctrl.map.bounds" events="ctrl.map.events"><div pip-map-popup="ctrl.popup" ng-if="ctrl.popup"></div><ng-transclude></ng-transclude></ui-gmap-google-map>')}])}(),function(e){try{e=angular.module("pipMaps.Templates")}catch(t){e=angular.module("pipMaps.Templates",[])}e.run(["$templateCache",function(t){t.put("edit/MapEdit.html",'<pip-map pip-options="$ctrl.map"><ui-gmap-drawing-manager options="$ctrl.drawingManagerOptions" control="$ctrl.drawingManagerControl"></ui-gmap-drawing-manager><pip-map-polygons pip-models="$ctrl.disabledPolygons" pip-options="$ctrl.disabledPolygonsOptions"></pip-map-polygons><pip-map-polylines pip-models="$ctrl.disabledPolylines" pip-options="$ctrl.disabledPolylinesOptions"></pip-map-polylines><pip-map-circles pip-models="$ctrl.disabledCircles" pip-options="$ctrl.disabledCirclesOptions"></pip-map-circles></pip-map><div class="action-panel w-stretch layout-row layout-align-center-center" ng-if="$ctrl.showPanel"><div class="action-buttons color-primary-bg flex-fixed"><md-button ng-click="$ctrl.clearMap()" ng-if="$ctrl.showAction(\'clear\')">{{ \'CLEAR_MAP\' | translate }}</md-button><md-button ng-click="$ctrl.addCircle()" ng-if="$ctrl.showAction(\'circle\')">{{ \'ADD_CIRCLE\' | translate }}</md-button><md-button ng-click="$ctrl.addPolygon()" ng-if="$ctrl.showAction(\'polygon\')">{{ \'ADD_POLYGON\' | translate }}</md-button><md-button ng-click="$ctrl.addLine()" ng-if="$ctrl.showAction(\'line\')">{{ \'ADD_LINE\' | translate }}</md-button></div></div>')}])}(),function(e){try{e=angular.module("pipMaps.Templates")}catch(t){e=angular.module("pipMaps.Templates",[])}e.run(["$templateCache",function(t){t.put("edit_old/map-edit-tool.html",'<div layout="column" class="pip-map-edit-tool theme-text-primary" ng-init="currentElement = editCtrl.currentElement; tool = currentElement.tool; model = tool.currentModel"><header hide-xs="" class="pip-map-edit-header" layout="column" layout-align="space-between"><h2 class="md-title">{{:: currentElement.getEditTitle() }}</h2><div class="pip-map-edit-actions" layout="row"><span class="pip-map-edit-actions-block-main"><md-button ng-click="tool.undo()" ng-disabled="tool.isUndoDisabled()"><md-icon md-svg-icon="map:undo" aria-label="Undo"></md-icon></md-button></span><md-divider></md-divider><span class="pip-map-edit-actions-block-tool"><md-button ng-repeat="action in tool.actions" ng-disabled="tool.isActionDisabled(action)" ng-click="tool.setAction(action)"><md-icon md-svg-icon="{{:: action.definition.icon }}" aria-label="{{:: action.definition.name }}" ng-class="{ active: tool.isActionActive(action) }"></md-icon></md-button></span></div></header><header hide-gt-xs="" class="pip-map-edit-header" layout="column" layout-align="space-between"><form name="editCtrl.modelForm" ng-include="editCtrl.currentElement.tool.template"></form></header><md-divider></md-divider><section flex="auto" class="pip-map-edit-content"><form hide-xs="" name="editCtrl.modelForm" ng-include="editCtrl.currentElement.tool.template"></form></section><md-divider></md-divider><footer hide-xs="" class="pip-map-edit-footer" layout="row" layout-align="end center"><div flex=""><md-button ng-click="editCtrl.remove()">{{:: \'DELETE\' | translate }} {{:: currentElement.name }}</md-button></div><md-button ng-click="editCtrl.cancel()">{{:: \'CANCEL\' | translate }}</md-button><md-button ng-click="editCtrl.save()" ng-disabled="editCtrl.modelForm.$invalid">{{:: tool.titleSave | translate }}</md-button></footer><footer hide-gt-xs="" class="pip-map-edit-footer" layout="row" layout-align="start center"><div layout="row" layout-align="space-around"><md-button ng-click="tool.undo()" ng-disabled="tool.isUndoDisabled()"><md-icon md-svg-icon="map:undo" aria-label="Remove"></md-icon></md-button></div><md-divider></md-divider><md-menu flex="" layout="column"><md-button class="pip-map-edit-actions-trigger" ng-click="$mdOpenMenu($event)"><md-icon class="active" md-svg-icon="{{ tool.currentAction.definition.icon }}" aria-label="Trigger menu" md-menu-origin=""></md-icon><md-icon md-svg-icon="map:tools" aria-label="Triangle down"></md-icon></md-button><md-menu-content width="4"><md-menu-item ng-repeat="action in tool.actions"><md-button ng-click="tool.setAction(action)" ng-disabled="tool.isActionDisabled(action)"><md-icon md-svg-icon="{{:: action.definition.icon }}" aria-label="{{:: action.definition.name }}" ng-class="{ active: tool.isActionActive(action) }" md-menu-align-target=""></md-icon>{{:: action.definition.name }}</md-button></md-menu-item></md-menu-content></md-menu><md-divider></md-divider><div layout="row" layout-align="space-around"><md-button ng-click="editCtrl.cancel()"><md-icon md-svg-icon="map:cross" aria-label="Close"></md-icon></md-button><md-button ng-click="editCtrl.save()" ng-disabled="editCtrl.modelForm.$invalid"><md-icon md-svg-icon="map:check" aria-label="Sumbit"></md-icon></md-button></div></footer></div>')}])}(),function(e){try{e=angular.module("pipMaps.Templates")}catch(t){e=angular.module("pipMaps.Templates",[])}e.run(["$templateCache",function(t){t.put("edit_old/map-edit-tools-list.html",'<md-fab-speed-dial class="pip-floating-button map-add-button md-scale" md-direction="up" md-open="fab.isOpen"><md-fab-trigger><md-button class="md-fab" ng-class="{\'md-accent md-raised\': !fab.isOpen, \'md-warn\': fab.isOpen}"><md-icon md-svg-icon="map:plus" aria-label="Open" class="md-headline centered-add-icon" ng-if="!fab.isOpen"></md-icon><md-icon md-svg-icon="map:cross" aria-label="Close" class="md-headline centered-add-icon" ng-if="fab.isOpen"></md-icon></md-button></md-fab-trigger><md-fab-actions class="pip-map-edit-tools-list"><div ng-repeat="element in ::editCtrl.elements"><span class="pip-map-edit-tooltip">{{:: element.name }}</span><md-button class="md-fab md-raised md-mini" ng-click="editCtrl.createElement(element)"><md-icon md-svg-icon="{{:: element.icon }}" aria-label="{{:: element.icon }}"></md-icon></md-button></div></md-fab-actions></md-fab-speed-dial>')}])}(),function(e){try{e=angular.module("pipMaps.Templates")}catch(t){e=angular.module("pipMaps.Templates",[])}e.run(["$templateCache",function(t){t.put("edit_old/map-edit.html",'<script type="text/ng-template" id="map-icons.svg"><svg xmlns="http://www.w3.org/2000/svg"> <defs> <g id="trash" transform="translate(512,0) scale(-1,1) rotate(180,256,256)"><path d="M128 107c0-24 19-43 43-43l170 0c24 0 43 19 43 43l0 256-256 0z m277 320l-74 0-22 21-106 0-22-21-74 0 0-43 298 0z"/></g> <g id="plus" transform="translate(512,0) scale(-1,1) rotate(180,256,256)"><path d="M405 235l-128 0 0-128-42 0 0 128-128 0 0 42 128 0 0 128 42 0 0-128 128 0z"/></g> <g id="cross" transform="translate(512,0) scale(-1,1) rotate(180,256,256)"><path d="M405 375l-30 30-119-119-119 119-30-30 119-119-119-119 30-30 119 119 119-119 30 30-119 119z"/></g> <g id="undo" transform="translate(512,0) scale(-1,1) rotate(180,256,256)"><path d="M213 320l0 85-149-149 149-149 0 87c107 0 182-34 235-109-21 107-85 214-235 235z"/></g> <g id="check" transform="translate(512,0) scale(-1,1) rotate(180,256,256)"><path d="M192 167l-89 89-30-30 119-119 256 256-30 30z"/></g> <g id="tools" transform="translate(512,0) scale(-1,1) rotate(180,256,256)"><path d="M149 299l107-107 107 107z"/></g> <g id="add-point" transform="translate(0,0) scale(25)"><path class="cls-1" d="M8.46,9l2.81-.17a0.31,0.31,0,0,0,.2-0.53L3.4,0.09A0.31,0.31,0,0,0,2.87.3V11.81a0.31,0.31,0,0,0,.51.23L5.51,10.2l1.9,4.64a0.31,0.31,0,0,0,.4.17l2.37-1a0.31,0.31,0,0,0,.17-0.4Z"/><polygon class="cls-1" points="14.96 15.62 14.96 12.72 13.49 12.72 13.49 15.62 10.59 15.62 10.59 17.1 13.49 17.1 13.49 20 14.96 20 14.96 17.1 17.87 17.1 17.87 15.62 14.96 15.62"/></g> <g id="remove-point" transform="translate(0,0) scale(25)"><path class="cls-1" d="M8.46,9l2.81-.17a0.31,0.31,0,0,0,.2-0.53L3.4,0.09a0.31,0.31,0,0,0-.53.22V11.82a0.31,0.31,0,0,0,.51.23l2.12-1.84,1.9,4.64a0.31,0.31,0,0,0,.4.17l2.37-1a0.31,0.31,0,0,0,.17-0.4Z"/><rect class="cls-1" x="10.58" y="15.63" width="7.28" height="1.48"/></g> <g id="pan" transform="translate(0,0) scale(25)"><path d="M15.28,6.56V9H11V4.74h2.41a0.31,0.31,0,0,0,.24-0.51L10.24,0.13a0.31,0.31,0,0,0-.47,0L6.31,4.23a0.31,0.31,0,0,0,.24.51H9V9H4.72V6.56a0.31,0.31,0,0,0-.51-0.24L0.11,9.78a0.31,0.31,0,0,0,0,.47l4.11,3.46a0.31,0.31,0,0,0,.51-0.24V11.07H9v4.23H6.54a0.31,0.31,0,0,0-.24.51l3.46,4.11a0.31,0.31,0,0,0,.47,0l3.46-4.11a0.31,0.31,0,0,0-.24-0.51H11V11.07h4.23v2.41a0.31,0.31,0,0,0,.51.24l4.11-3.46a0.31,0.31,0,0,0,0-.47L15.78,6.32A0.31,0.31,0,0,0,15.28,6.56Z"/></g> <g id="pen" transform="translate(0,0) scale(25)"><path d="M18.92,1.08a3.27,3.27,0,0,0-2.33-1,3.9,3.9,0,0,0-2.71,1.25,3.47,3.47,0,0,0-.44.54L5.66,10.66l-0.43-.43A0.36,0.36,0,0,0,5,10.12a0.39,0.39,0,0,0-.27.11L3.62,11.31a0.38,0.38,0,0,0,0,.53l0.45,0.45a8,8,0,0,1-2.46,1.09,0.54,0.54,0,0,0-.35.38v0S1,18.13,0,19.43a0.36,0.36,0,0,0,0,.36h0l0.13,0.14h0A0.57,0.57,0,0,0,.43,20a0.27,0.27,0,0,0,.13,0c1.42-.82,5.62-1.22,5.66-1.22h0a0.55,0.55,0,0,0,.38-0.35,9.52,9.52,0,0,1,1.1-2.45l0.44,0.44a0.36,0.36,0,0,0,.26.11,0.38,0.38,0,0,0,.27-0.11l1.07-1.07A0.39,0.39,0,0,0,9.87,15a0.36,0.36,0,0,0-.11-0.27l-0.43-.43,8.83-7.79a3.46,3.46,0,0,0,.54-0.44,4,4,0,0,0,1.24-2.47A3.22,3.22,0,0,0,18.92,1.08ZM4.66,17a1.15,1.15,0,1,1,0-1.63A1.15,1.15,0,0,1,4.66,17Z"/></g> <g id="select" transform="translate(0,0) scale(25)"><path d="M15.66,11.25L4.71,0.09a0.31,0.31,0,0,0-.53.22V15.94a0.31,0.31,0,0,0,.51.23l3-2.57,2.54,6.21a0.31,0.31,0,0,0,.4.17l3.31-1.35a0.31,0.31,0,0,0,.17-0.4L11.54,12l3.92-.24A0.31,0.31,0,0,0,15.66,11.25Z"/></g> <g id="hand" transform="translate(0,0) scale(25)"><path d="M16.9,3.52a0.92,0.92,0,0,0-.92.92v4a0.44,0.44,0,0,1-.88,0V1.76a1.1,1.1,0,0,0-2.21,0V8.44h0a0.42,0.42,0,0,1-.83,0V1.2a1.2,1.2,0,0,0-2.39,0s0,7.19,0,7.27a0.4,0.4,0,0,1-.8,0V2.24a1.2,1.2,0,1,0-2.39,0c0,8.67,0,7.67,0,8.39a2,2,0,0,1-.13,1c-0.11.08-.25,0-0.43-0.26C5.51,10.79,4.13,9,2.79,9.63a1.33,1.33,0,0,0-.33,1.93s3,4.34,4,5.84c0.59,0.88.75,1.16,1,1.45C8.15,20,8.58,20,9.84,20H15c2.79,0,2.79-3.31,2.79-4.73V4.94C17.82,3.93,17.41,3.52,16.9,3.52Z"/></g> <g id="draw" transform="translate(0,0) scale(25)"><path d="M1.94,4.37L0,2.49A2.08,2.08,0,0,1,.19,2.27L0.41,2l0.27-.26A2.84,2.84,0,0,0,1,1.48l0.39-.34A5.66,5.66,0,0,1,2,.68,6.24,6.24,0,0,1,2.92.27,3,3,0,0,1,4,.09a2.72,2.72,0,0,1,.81.15A2.6,2.6,0,0,1,5.7.79a2.85,2.85,0,0,1,.74,1,3.49,3.49,0,0,1,.3,1.54,4.64,4.64,0,0,1-.1,1,4.76,4.76,0,0,1-.28.88Q6.14,5.59,5.88,6t-0.59.88l-0.46.75q-0.28.46-.59,1L3.68,9.75a9.54,9.54,0,0,0-.43,1,4.27,4.27,0,0,0-.15.85,2,2,0,0,0,.05.67,1,1,0,0,0,.19.45,0.42,0.42,0,0,0,.32.17A0.72,0.72,0,0,0,4,12.79a1.59,1.59,0,0,0,.34-0.26,2.42,2.42,0,0,0,.3-0.3L4.9,12l0.4-.48L6,10.65l0.77-.93q0.39-.46.62-0.77T8.26,8A9.38,9.38,0,0,1,9.5,7a8.58,8.58,0,0,1,1.57-.84,4.66,4.66,0,0,1,1.78-.35,4,4,0,0,1,2,.46,4.25,4.25,0,0,1,1.33,1.16A4.89,4.89,0,0,1,17,9a8.61,8.61,0,0,1,.32,1.48H20V13.2H17.29a9.87,9.87,0,0,1-.74,3.25,7.19,7.19,0,0,1-1.33,2.06,4.55,4.55,0,0,1-1.6,1.08,4.31,4.31,0,0,1-1.5.31,3.5,3.5,0,0,1-1.37-.27,3.43,3.43,0,0,1-1.11-.74,3.47,3.47,0,0,1-.77-1.08,3.12,3.12,0,0,1-.28-1.32,4.63,4.63,0,0,1,.35-1.61A6.43,6.43,0,0,1,10,13.1a7.75,7.75,0,0,1,1.85-1.55,7.63,7.63,0,0,1,2.67-1q-0.05-.31-0.1-0.66a1.6,1.6,0,0,0-.23-0.63,1.25,1.25,0,0,0-.55-0.49,2.45,2.45,0,0,0-1-.18A2.09,2.09,0,0,0,11.5,9a8.11,8.11,0,0,0-1.17.9q-0.57.57-1.15,1.24T8.1,12.4L7.23,13.46a10.26,10.26,0,0,1-.83.88,6.4,6.4,0,0,1-.81.7,2.76,2.76,0,0,1-.86.41,3.09,3.09,0,0,1-.75.12,4.28,4.28,0,0,1-.75,0,4,4,0,0,1-.74-0.22,3,3,0,0,1-.66-0.37A3.32,3.32,0,0,1,.72,13.56a5.4,5.4,0,0,1-.28-0.92,4.69,4.69,0,0,1-.1-1A5.76,5.76,0,0,1,.8,9.5a21.73,21.73,0,0,1,1-2.15q0.57-1,1.07-1.74l0.61-.89,0.27-.46A3,3,0,0,0,4,3.75,0.91,0.91,0,0,0,4.05,3.3,0.38,0.38,0,0,0,3.82,3a0.42,0.42,0,0,0-.34.05A2.67,2.67,0,0,0,3,3.34L2.5,3.81Q2.22,4.06,1.94,4.37ZM12.15,17.23A1.36,1.36,0,0,0,12.81,17a2.31,2.31,0,0,0,.68-0.63,4.77,4.77,0,0,0,.62-1.17,7.65,7.65,0,0,0,.41-1.85A4.78,4.78,0,0,0,13,14a4.59,4.59,0,0,0-1,.85,3.77,3.77,0,0,0-.53.88,1.89,1.89,0,0,0-.17.67,0.74,0.74,0,0,0,.08.34,0.76,0.76,0,0,0,.21.26,0.66,0.66,0,0,0,.25.15A0.79,0.79,0,0,0,12.15,17.23Z"/></g> <g id="point" transform="translate(0,0) scale(25)"><path d="M10,0a6.88,6.88,0,0,1,4.94,2.06A6.88,6.88,0,0,1,17,7q0,3.93-7,13Q3,10.94,3,7A6.88,6.88,0,0,1,5.06,2.06,6.88,6.88,0,0,1,10,0Zm0,9.51a2.41,2.41,0,0,0,1-.2,2.34,2.34,0,0,0,.78-0.55A2.34,2.34,0,0,0,12.31,8a2.47,2.47,0,0,0,0-1.94,2.34,2.34,0,0,0-.55-0.78A2.34,2.34,0,0,0,11,4.7,2.47,2.47,0,0,0,9,4.7a2.34,2.34,0,0,0-.78.55A2.34,2.34,0,0,0,7.69,6,2.47,2.47,0,0,0,7.69,8a2.34,2.34,0,0,0,.55.78A2.34,2.34,0,0,0,9,9.31,2.41,2.41,0,0,0,10,9.51Z"/></g> </defs></svg><\/script>')}])}(),function(e){try{e=angular.module("pipMaps.Templates")}catch(t){e=angular.module("pipMaps.Templates",[])}e.run(["$templateCache",function(t){t.put("popup/map-popup-content.html",'<div class="map-popup-content"><md-content md-theme="{{:: $root.$theme || \'blue\' }}" flex=""><md-button class="md-icon-button pip-map-info-window-close-button" ng-click="closeClick(); $event.stopPropagation()" tabindex="-1" aria-label="close"><md-icon class="theme-icon-active" md-svg-icon="icons:cross"></md-icon></md-button><ng-transclude></ng-transclude></md-content><div class="pip-map-info-window-arrow-wrapper"><div><div></div></div><div><div></div></div></div></div>')}])}(),function(e){try{e=angular.module("pipMaps.Templates")}catch(t){e=angular.module("pipMaps.Templates",[])}e.run(["$templateCache",function(t){t.put("popup/map-popup.html",'<ui-gmap-window ng-if="popup.isEnabled" show="popup.isEnabled" coords="popup.position" templateurl=":: popup.element.templateUrl" templateparameter=":: popup" options=":: popup.element.options" closeclick="popup.close()"></ui-gmap-window>')}])}(),function(e){try{e=angular.module("pipMaps.Templates")}catch(t){e=angular.module("pipMaps.Templates",[])}e.run(["$templateCache",function(t){t.put("elements/circles/map-circles.html",'<ui-gmap-circle ng-repeat="c in ctrl.models" center="c[ctrl.options.center]" stroke="c[ctrl.options.stroke]" fill="c[ctrl.options.fill]" radius="c[ctrl.options.radius]" geodesic="c.geodesic" events="ctrl.events" visible="true"></ui-gmap-circle>')}])}(),function(e){try{e=angular.module("pipMaps.Templates")}catch(t){e=angular.module("pipMaps.Templates",[])}e.run(["$templateCache",function(t){t.put("elements/kml/map-kml.html","")}])}(),function(e){try{e=angular.module("pipMaps.Templates")}catch(t){e=angular.module("pipMaps.Templates",[])}e.run(["$templateCache",function(t){t.put("elements/markers/map-markers.html",'<ui-gmap-markers models="ctrl.models" coords=":: ctrl.options.model.coords" icon=":: ctrl.options.model.icon" options="\'options\'" control=":: ctrl.control" events=":: ctrl.events" fit=":: ctrl.options.fitBounds"></ui-gmap-markers><ui-gmap-polylines ng-if=":: ctrl.connect" models="ctrl.models" path=":: ctrl.connect.property" stroke=":: ctrl.connect.stroke" icons=":: ctrl.connect.icons"></ui-gmap-polylines>')}])}(),function(e){try{e=angular.module("pipMaps.Templates")}catch(t){e=angular.module("pipMaps.Templates",[])}e.run(["$templateCache",function(t){t.put("elements/polygons/map-polygons.html",'<ui-gmap-polygons models="ctrl.models" path="ctrl.options.path" stroke="ctrl.options.stroke" fill="ctrl.options.fill" control="ctrl.control" events="ctrl.events" visible="\'visible\'" geodesic="\'geodesic\'" editable="\'editable\'" draggable="\'draggable\'" fit=":: ctrl.options.fitBounds"></ui-gmap-polygons>')}])}(),function(e){try{e=angular.module("pipMaps.Templates")}catch(t){e=angular.module("pipMaps.Templates",[])}e.run(["$templateCache",function(t){t.put("elements/polylines/map-polylines.html",'<ui-gmap-polylines models="ctrl.models" path="ctrl.options.path" stroke="ctrl.options.stroke" icons="ctrl.options.icons" control="ctrl.control" events="ctrl.events" visible="\'visible\'" geodesic="\'geodesic\'" editable="\'editable\'" draggable="\'draggable\'" static="ctrl.options.static" fit="ctrl.options.fitBounds"></ui-gmap-polylines>')}])}()},{}]},{},[17,23])(23)});


!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;((e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).pip||(e.pip={})).tags=t()}}(function(){return function a(r,n,o){function u(e,t){if(!n[e]){if(!r[e]){var i="function"==typeof require&&require;if(!t&&i)return i(e,!0);if(c)return c(e,!0);var p=new Error("Cannot find module '"+e+"'");throw p.code="MODULE_NOT_FOUND",p}var s=n[e]={exports:{}};r[e][0].call(s.exports,function(t){return u(r[e][1][t]||t)},s,s.exports,a,r,n,o)}return n[e].exports}for(var c="function"==typeof require&&require,t=0;t<o.length;t++)u(o[t]);return u}({1:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0})},{}],2:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var p=(s.$inject=["pipRest","pipSession"],s.prototype.getUserId=function(){return this.pipSession.session?this.pipSession.session.userId:null},s.prototype.readTags=function(t,e,i){return(t=t||{}).party_id=t.party_id?t.party_id:this.getUserId(),this.pipRest.getResource(this.RESOURCE).get(t,e,i)},s.prototype.createTags=function(t,e,i,p){t.party_id=t.party_id?t.party_id:this.getUserId(),this.pipRest.getResource(this.RESOURCE).save(t,e,i,p)},s.prototype.updateTags=function(t,e,i,p){t.party_id=t.party_id?t.party_id:this.getUserId(),this.pipRest.getResource(this.RESOURCE).update(t,e,i,p)},s);function s(t,e){this.pipRest=t,this.pipSession=e,this.RESOURCE="tags"}var a=(r.prototype.$get=["pipRest","pipSession",function(t,e){return null==this._service&&(this._service=new p(t,e)),this._service}],r);function r(){}angular.module("pipTagData",["pipCommonRest"]).provider("pipTagData",a)},{}],3:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),t("./TagDataService"),t("./ITagDataService")},{"./ITagDataService":1,"./TagDataService":2}],4:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),t("./tag_list/TagList"),t("./rest/TagResources"),t("./data"),angular.module("pipTags",["pipTag.Rest","pipTagData","pipTagList"])},{"./data":3,"./rest/TagResources":5,"./tag_list/TagList":6}],5:[function(t,e,i){function p(t){t.registerResource("tags","/api/1.0/tags/:party_id",{party_id:"@party_id"},{update:{method:"PUT"}})}p.$inject=["pipRestProvider"],angular.module("pipTag.Rest",[]).config(p)},{}],6:[function(t,e,i){var p={bindings:{tags:"<pipTags",type:"<pipType",typeLocal:"<pipTypeLocal",rebuid:"<pipRebind"},templateUrl:"tag_list/TagList.html",controller:(s.prototype.toBoolean=function(t){return!(_.isNull(t)||_.isUndefined(t)||!t||"1"!=(t=t.toString().toLowerCase())&&"true"!=t)},s.prototype.$onChanges=function(t){this.rebind&&t.tags&&(this.tags=t.tags.currentValue)},s)};function s(t,e){e.css("display","block"),e.addClass("pip-tag-list")}angular.module("pipTagList",["pipTranslate"]).component("pipTagList",p)},{}],7:[function(t,e,i){!function(e){try{e=angular.module("pipTags.Templates")}catch(t){e=angular.module("pipTags.Templates",[])}e.run(["$templateCache",function(t){t.put("tag_list/TagList.html",'<div class="pip-chip rm4 pip-type-chip pip-type-chip-left {{\'bg-\' + $ctrl.type + \'-chips\'}}" ng-if="$ctrl.type && !$ctrl.typeLocal"><span>{{$ctrl.type.toUpperCase() | translate | uppercase}}</span></div><div class="pip-chip rm4 pip-type-chip pip-type-chip-left {{\'bg-\' + $ctrl.type + \'-chips\'}}" ng-if="$ctrl.type && $ctrl.typeLocal"><span>{{$ctrl.typeLocal.toUpperCase() | translate | uppercase}}</span></div><div class="pip-chip rm4" ng-repeat="tag in $ctrl.tags"><span>{{::tag}}</span></div>')}])}()},{}]},{},[7,4])(7)});


//# sourceMappingURL=pip-suite.min.js.map
